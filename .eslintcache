[{"C:\\dev\\coding-academy\\sprint4\\src\\index.js":"1","C:\\dev\\coding-academy\\sprint4\\src\\store\\store.js":"2","C:\\dev\\coding-academy\\sprint4\\src\\root-cmp.jsx":"3","C:\\dev\\coding-academy\\sprint4\\src\\store\\user.reducer.js":"4","C:\\dev\\coding-academy\\sprint4\\src\\store\\order.reducer.js":"5","C:\\dev\\coding-academy\\sprint4\\src\\store\\stay.reducer.js":"6","C:\\dev\\coding-academy\\sprint4\\src\\store\\review.reducer.js":"7","C:\\dev\\coding-academy\\sprint4\\src\\services\\user.service.js":"8","C:\\dev\\coding-academy\\sprint4\\src\\routes.js":"9","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\app-footer.jsx":"10","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\stay-filter.jsx":"11","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\app-header.jsx":"12","C:\\dev\\coding-academy\\sprint4\\src\\services\\async-storage.service.js":"13","C:\\dev\\coding-academy\\sprint4\\src\\store\\review.actions.js":"14","C:\\dev\\coding-academy\\sprint4\\src\\services\\event-bus.service.js":"15","C:\\dev\\coding-academy\\sprint4\\src\\pages\\add-edit-stay.jsx":"16","C:\\dev\\coding-academy\\sprint4\\src\\pages\\bnb-app.jsx":"17","C:\\dev\\coding-academy\\sprint4\\src\\pages\\reserve-summary.jsx":"18","C:\\dev\\coding-academy\\sprint4\\src\\pages\\stay-details.jsx":"19","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\expanded-filter.jsx":"20","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\header-profile.jsx":"21","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\header-filter.jsx":"22","C:\\dev\\coding-academy\\sprint4\\src\\services\\review.service.js":"23","C:\\dev\\coding-academy\\sprint4\\src\\store\\stay.actions.js":"24","C:\\dev\\coding-academy\\sprint4\\src\\hooks\\useFormRegister.js":"25","C:\\dev\\coding-academy\\sprint4\\src\\services\\stay.service.js":"26","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\stay-list.jsx":"27","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\calender.jsx":"28","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\reserve.jsx":"29","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\stay-review.jsx":"30","C:\\dev\\coding-academy\\sprint4\\src\\services\\util.service.js":"31","C:\\dev\\coding-academy\\sprint4\\src\\hooks\\useEffectUpdate.js":"32","C:\\dev\\coding-academy\\sprint4\\src\\store\\order.actions.js":"33","C:\\dev\\coding-academy\\sprint4\\src\\services\\order.service.js":"34","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\stay-preview.jsx":"35","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\calc-reserve.jsx":"36","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\header-expanded-filter.jsx":"37"},{"size":815,"mtime":1663261198080,"results":"38","hashOfConfig":"39"},{"size":1118,"mtime":1663482222225,"results":"40","hashOfConfig":"39"},{"size":1136,"mtime":1663748984401,"results":"41","hashOfConfig":"39"},{"size":1440,"mtime":1641996193000,"results":"42","hashOfConfig":"39"},{"size":275,"mtime":1663515708846,"results":"43","hashOfConfig":"39"},{"size":1897,"mtime":1663499675713,"results":"44","hashOfConfig":"39"},{"size":669,"mtime":1641996193000,"results":"45","hashOfConfig":"39"},{"size":3281,"mtime":1663226096223,"results":"46","hashOfConfig":"39"},{"size":649,"mtime":1663603675206,"results":"47","hashOfConfig":"39"},{"size":175,"mtime":1663748318687,"results":"48","hashOfConfig":"39"},{"size":1639,"mtime":1663748866598,"results":"49","hashOfConfig":"39"},{"size":975,"mtime":1663748368809,"results":"50","hashOfConfig":"39"},{"size":2156,"mtime":1663335332680,"results":"51","hashOfConfig":"39"},{"size":1572,"mtime":1663222286981,"results":"52","hashOfConfig":"39"},{"size":1282,"mtime":1641996193000,"results":"53","hashOfConfig":"39"},{"size":1934,"mtime":1663748404229,"results":"54","hashOfConfig":"39"},{"size":1449,"mtime":1663748428266,"results":"55","hashOfConfig":"39"},{"size":420,"mtime":1663748441525,"results":"56","hashOfConfig":"39"},{"size":9597,"mtime":1663659760373,"results":"57","hashOfConfig":"39"},{"size":946,"mtime":1663748280078,"results":"58","hashOfConfig":"39"},{"size":115,"mtime":1663746325683,"results":"59","hashOfConfig":"39"},{"size":1091,"mtime":1663755390988,"results":"60","hashOfConfig":"39"},{"size":1925,"mtime":1663227042285,"results":"61","hashOfConfig":"39"},{"size":4202,"mtime":1663653976259,"results":"62","hashOfConfig":"39"},{"size":2347,"mtime":1663484988320,"results":"63","hashOfConfig":"39"},{"size":3523,"mtime":1663652684110,"results":"64","hashOfConfig":"39"},{"size":410,"mtime":1663682442095,"results":"65","hashOfConfig":"39"},{"size":1174,"mtime":1663745546313,"results":"66","hashOfConfig":"39"},{"size":8172,"mtime":1663748327988,"results":"67","hashOfConfig":"39"},{"size":1753,"mtime":1663745669736,"results":"68","hashOfConfig":"39"},{"size":1295,"mtime":1663652684111,"results":"69","hashOfConfig":"39"},{"size":308,"mtime":1663746945946,"results":"70","hashOfConfig":"39"},{"size":1066,"mtime":1663515706381,"results":"71","hashOfConfig":"39"},{"size":2050,"mtime":1663482222223,"results":"72","hashOfConfig":"39"},{"size":588,"mtime":1663745666575,"results":"73","hashOfConfig":"39"},{"size":1540,"mtime":1663746148333,"results":"74","hashOfConfig":"39"},{"size":88,"mtime":1663755316318,"results":"75","hashOfConfig":"39"},{"filePath":"76","messages":"77","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},"1timrjz",{"filePath":"79","messages":"80","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"81","messages":"82","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"83","usedDeprecatedRules":"78"},{"filePath":"84","messages":"85","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"86","messages":"87","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"88","messages":"89","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"90","usedDeprecatedRules":"78"},{"filePath":"91","messages":"92","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"93","messages":"94","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"95","usedDeprecatedRules":"78"},{"filePath":"96","messages":"97","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"98","messages":"99","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"100","messages":"101","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"102","usedDeprecatedRules":"78"},{"filePath":"103","messages":"104","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"105","messages":"106","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"107","messages":"108","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"109","usedDeprecatedRules":"78"},{"filePath":"110","messages":"111","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"112","messages":"113","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"114","usedDeprecatedRules":"78"},{"filePath":"115","messages":"116","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"117","usedDeprecatedRules":"78"},{"filePath":"118","messages":"119","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"120","messages":"121","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"122","usedDeprecatedRules":"78"},{"filePath":"123","messages":"124","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"125","usedDeprecatedRules":"78"},{"filePath":"126","messages":"127","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"128","messages":"129","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"130","messages":"131","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"132","usedDeprecatedRules":"78"},{"filePath":"133","messages":"134","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"135","messages":"136","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"137","usedDeprecatedRules":"78"},{"filePath":"138","messages":"139","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"140","usedDeprecatedRules":"78"},{"filePath":"141","messages":"142","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"143","messages":"144","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"145","usedDeprecatedRules":"78"},{"filePath":"146","messages":"147","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"148","usedDeprecatedRules":"78"},{"filePath":"149","messages":"150","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"151","messages":"152","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"153","messages":"154","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"155","usedDeprecatedRules":"78"},{"filePath":"156","messages":"157","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"158","messages":"159","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"160","usedDeprecatedRules":"78"},{"filePath":"161","messages":"162","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"163","usedDeprecatedRules":"78"},{"filePath":"164","messages":"165","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"166","messages":"167","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\dev\\coding-academy\\sprint4\\src\\index.js",[],["168","169"],"C:\\dev\\coding-academy\\sprint4\\src\\store\\store.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\root-cmp.jsx",["170"],"import React ,{useState,useEffect}from \"react\";\r\nimport { Routes, Route, useLocation } from 'react-router'\r\n// import { AppHeader } from \"./cmps/app-header\";\r\nimport routes from './routes'\r\nimport { AppHeader } from './cmps/app-header'\r\nimport { AppFooter } from './cmps/app-footer'\r\nimport { StayFilter } from \"./cmps/stay-filter\";\r\n\r\n\r\nexport function RootCmp () {\r\n  const location = useLocation()\r\n    const [layoutClass, setLayoutClass] = useState(false)\r\n\r\n    useEffect(() => {\r\n      location.pathname.includes('details')? setLayoutClass(true):  setLayoutClass(false)\r\n    }, [location.pathname])\r\n\r\n    return (\r\n      <div className= \"full main-container\">\r\n        <AppHeader layoutClass={layoutClass} />\r\n        <main className={`${layoutClass? 'main-container-details':'full main-container'} `} >\r\n          <Routes>\r\n            {routes.map(route => <Route key={route.path} exact={true} element={route.component} path={route.path} />)}\r\n            {/* <Route path=\"user/:id\" element={<UserDetails />} /> */}\r\n          </Routes>\r\n        </main>\r\n        <AppFooter layoutClass={layoutClass} />\r\n      </div>\r\n    )\r\n}\r\n","C:\\dev\\coding-academy\\sprint4\\src\\store\\user.reducer.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\store\\order.reducer.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\store\\stay.reducer.js",["171","172"],"const initialState = {\r\n    stays: [],\r\n    filterBy: null,\r\n    isFilterOpen: false\r\n}\r\nexport function stayReducer(state = initialState, action) {\r\n    var newState = state\r\n    var stays\r\n    var stay\r\n    var isFilterOpen\r\n    switch (action.type) {\r\n        case 'SET_STAYS':\r\n            return { ...state, stays: action.stays }\r\n\r\n        case 'REMOVE_STAY':\r\n            const lastRemovedStay = state.stays.find(stay => stay._id === action.stayId)\r\n            stays = state.stays.filter(stay => stay._id !== action.stayId)\r\n            return { ...state, stays, lastRemovedStay }\r\n\r\n        case 'ADD_STAY':\r\n            return { ...state, stays: [...state.stays, action.stay] }\r\n\r\n        case 'UPDATE_STAY':\r\n            stays = state.stays.map(stay => (stay._id === action.stay._id) ? action.stay : stay)\r\n            return { ...state, stays }\r\n\r\n        case 'ADD_TO_CART':\r\n            return { ...state, stay: [...state.stay, action.stay] }\r\n\r\n        case 'REMOVE_FROM_CART':\r\n            stay = state.stay.filter(stay => stay._id !== action.stayId)\r\n            return { ...state, stay }\r\n\r\n        case 'SET_ISOPENFILTER':\r\n            isFilterOpen = action.isFilterOpen\r\n            return { ...state, isFilterOpen}\r\n\r\n        // case 'CLEAR_CART':\r\n        //     return  { ...state, stay: []}\r\n        //     \r\n        case 'StayUNDO_REMOVE_CART':\r\n            if (state.lastRemovedStay) {\r\n                return { ...state, stays: [...state.stays, state.lastRemovedStay], lastRemovedStay: null }\r\n            }\r\n\r\n        case 'SET_FILTER_BY':\r\n            return { ...state, filterBy: { ...action.filterBy } }\r\n        default:\r\n            return state;\r\n    }\r\n    // For debug:\r\n    // window.stayState = newState\r\n    // console.log('Prev State:', state)\r\n    // console.log('Action:', action)\r\n    // console.log('New State:', newState)\r\n    // return newState\r\n\r\n}\r\n","C:\\dev\\coding-academy\\sprint4\\src\\store\\review.reducer.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\services\\user.service.js",["173","174"],"import { storageService } from './async-storage.service'\r\n// import { httpService } from './http.service'\r\nimport { getActionSetWatchedUser } from '../store/review.actions'\r\n// import { socketService, SOCKET_EVENT_USER_UPDATED, SOCKET_EMIT_USER_WATCH } from './socket.service'\r\nimport { showSuccessMsg } from '../services/event-bus.service'\r\n\r\nconst STORAGE_KEY_LOGGEDIN_USER = 'loggedinUser'\r\n\r\nexport const userService = {\r\n    login,\r\n    logout,\r\n    signup,\r\n    getLoggedinUser,\r\n    saveLocalUser,\r\n    getUsers,\r\n    getById,\r\n    remove,\r\n    update,\r\n    changeScore\r\n}\r\n\r\nwindow.userService = userService\r\n\r\n\r\nfunction getUsers() {\r\n    return storageService.query('user')\r\n    // return httpService.get(`user`)\r\n}\r\n\r\nfunction onUserUpdate(user) {\r\n    showSuccessMsg(`This user ${user.fullname} just got updated from socket, new score: ${user.score}`)\r\n}\r\n\r\nasync function getById(userId) {\r\n    const user = await storageService.get('user', userId)\r\n    // const user = await httpService.get(`user/${userId}`)\r\n\r\n    // socketService.emit(SOCKET_EMIT_USER_WATCH, userId)\r\n    // socketService.off(SOCKET_EVENT_USER_UPDATED, onUserUpdate)\r\n    // socketService.on(SOCKET_EVENT_USER_UPDATED, onUserUpdate)\r\n\r\n    return user\r\n}\r\nfunction remove(userId) {\r\n    return storageService.remove('user', userId)\r\n    // return httpService.delete(`user/${userId}`)\r\n}\r\n\r\nasync function update(user) {\r\n    await storageService.put('user', user)\r\n    // user = await httpService.put(`user/${user._id}`, user)\r\n    // Handle case in which admin updates other user's details\r\n    if (getLoggedinUser()._id === user._id) saveLocalUser(user)\r\n    return user;\r\n}\r\n\r\nasync function login(userCred) {\r\n    const users = await storageService.query('user')\r\n    const user = users.find(user => user.username === userCred.username)\r\n    // const user = await httpService.post('auth/login', userCred)\r\n    if (user) {\r\n        // socketService.login(user._id)\r\n        return saveLocalUser(user)\r\n    }\r\n}\r\nasync function signup(userCred) {\r\n    userCred.score = 10000;\r\n    const user = await storageService.post('user', userCred)\r\n    // const user = await httpService.post('auth/signup', userCred)\r\n    // socketService.login(user._id)\r\n    return saveLocalUser(user)\r\n}\r\nasync function logout() {\r\n    sessionStorage.removeItem(STORAGE_KEY_LOGGEDIN_USER)\r\n    // socketService.logout()\r\n    // return await httpService.post('auth/logout')\r\n}\r\n\r\nasync function changeScore(by) {\r\n    const user = getLoggedinUser()\r\n    if (!user) throw new Error('Not loggedin')\r\n    user.score = user.score + by || by\r\n    await update(user)\r\n    return user.score\r\n}\r\n\r\n\r\nfunction saveLocalUser(user) {\r\n    sessionStorage.setItem(STORAGE_KEY_LOGGEDIN_USER, JSON.stringify(user))\r\n    return user\r\n}\r\n\r\nfunction getLoggedinUser() {\r\n    return JSON.parse(sessionStorage.getItem(STORAGE_KEY_LOGGEDIN_USER))\r\n}\r\n\r\n\r\n// ;(async ()=>{\r\n//     await userService.signup({fullname: 'Puki Norma', username: 'user1', password:'123',score: 10000, isAdmin: false})\r\n//     await userService.signup({fullname: 'Master Adminov', username: 'admin', password:'123', score: 10000, isAdmin: true})\r\n//     await userService.signup({fullname: 'Muki G', username: 'muki', password:'123', score: 10000})\r\n// })()\r\n\r\n\r\n\r\n","C:\\dev\\coding-academy\\sprint4\\src\\routes.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\cmps\\app-footer.jsx",[],"C:\\dev\\coding-academy\\sprint4\\src\\cmps\\stay-filter.jsx",["175"],"import { ExpandedFilter } from './expanded-filter'\r\nimport filterImg from '../assets/img/filter-btn-img.png'\r\nimport React, { useEffect, useRef } from 'react'\r\n\r\nexport const StayFilter = (props) => {\r\n    const filter = useRef(null)\r\n    const filterContainer = useRef(null)\r\n    \r\n    useEffect(() => {\r\n        if (!filterContainer.current || !filter.current)return\r\n        const filterObserver = new IntersectionObserver(onFilterObserved, {\r\n            rootMargin: \"-100px 0px 0px\",\r\n        });\r\n\r\n        filterObserver.observe(filter.current)\r\n\r\n        function onFilterObserved(entries) {\r\n            if (!filterContainer.current || !filter.current)return\r\n            entries.forEach((entry) => {\r\n                filterContainer.current.className = entry.isIntersecting ? 'full main-container' : 'fixed full main-container';\r\n            })\r\n        }\r\n    }, [])\r\n\r\n    const { onClickFilter, onChangeFilter, isFilterOpen } = props\r\n    return (\r\n        <section className='stay-filter full main-container' >\r\n            <div ref={filter}></div>\r\n            <div  ref={filterContainer}> \r\n            <div className={isFilterOpen ? 'filter-open filter-container ' : 'filter-container '}>\r\n                <div className='labels-container'>\r\n                </div>\r\n                <button className='stay-filter-btn' onClick={onClickFilter}>\r\n                    <div><img src={filterImg} /></div>\r\n                    Filters\r\n                </button>\r\n                <ExpandedFilter onChangeFilter={onChangeFilter} onClickFilter={onClickFilter} />\r\n            </div>\r\n            </div>\r\n        </section>\r\n    )\r\n}","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\app-header.jsx",[],"C:\\dev\\coding-academy\\sprint4\\src\\services\\async-storage.service.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\store\\review.actions.js",["176","177"],"import { showSuccessMsg } from '../services/event-bus.service'\r\nimport { reviewService } from '../services/review.service'\r\nimport { userService } from '../services/user.service'\r\n\r\n// Action Creators\r\nexport function getActionRemoveReview(reviewId) {\r\n  return { type: 'REMOVE_REVIEW', reviewId }\r\n}\r\nexport function getActionAddReview(review) {\r\n  return { type: 'ADD_REVIEW', review }\r\n}\r\nexport function getActionSetWatchedUser(user) {\r\n  return { type: 'SET_WATCHED_USER', user }\r\n}\r\n\r\nexport function loadReviews() {\r\n  return async dispatch => {\r\n    try {\r\n      const reviews = await reviewService.query()\r\n      dispatch({ type: 'SET_REVIEWS', reviews })\r\n\r\n    } catch (err) {\r\n      console.log('ReviewActions: err in loadReviews', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function addReview(review) {\r\n  return async dispatch => {\r\n    try {\r\n      const addedReview = await reviewService.add(review)\r\n      dispatch(getActionAddReview(addedReview))\r\n\r\n      // Change the score in user kept in sessionStorage\r\n      // userService.saveLocalUser(addedReview.byUser)\r\n      // const { score } = addedReview.byUser\r\n      // dispatch({ type: 'SET_SCORE', score })\r\n\r\n    } catch (err) {\r\n      console.log('ReviewActions: err in addReview', err)\r\n      throw err\r\n    }\r\n  }\r\n}\r\n\r\nexport function removeReview(reviewId) {\r\n  return async dispatch => {\r\n    try {\r\n      await reviewService.remove(reviewId)\r\n      dispatch(getActionRemoveReview(reviewId))\r\n    } catch (err) {\r\n      console.log('ReviewActions: err in removeReview', err)\r\n      throw err\r\n    }\r\n  }\r\n}\r\n","C:\\dev\\coding-academy\\sprint4\\src\\services\\event-bus.service.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\pages\\add-edit-stay.jsx",["178","179","180","181"],"// import { upload } from '@testing-library/user-event/dist/upload'\r\nimport { useEffect, useRef } from 'react'\r\nimport { useNavigate, useParams } from 'react-router-dom'\r\nimport { useDispatch } from 'react-redux'\r\nimport { useFormRegister } from '../hooks/useFormRegister'\r\nimport { addStay, updateStay } from '../store/stay.actions'\r\n\r\n\r\nexport const StayEdit = () => {\r\n\r\n    const params = useParams()\r\n    const navigate = useNavigate()\r\n    const dispatch = useDispatch()\r\n\r\n\r\n    const [register, setStay, stay] = useFormRegister({\r\n        name: '',\r\n        price: ''\r\n        // img: null\r\n    })\r\n\r\n    const inputRef = useRef()\r\n\r\n    useEffect(() => {\r\n        inputRef.current.focus()\r\n        const stayId = params.stayId\r\n        if (!stayId) return\r\n        // stayService\r\n        //     .getById(stayId)\r\n        //     .then((stay) => {\r\n        //         setStay(stay)\r\n        //     })\r\n        //     .catch((err) => {\r\n        //         console.log('err:', err)\r\n        //     })\r\n    }, [])\r\n\r\n    const onSaveStay = (ev) => {\r\n        ev.preventDefault()\r\n        if (stay._id) {\r\n            try {\r\n                const res = dispatch(updateStay(stay))\r\n                navigate('/')\r\n            } catch (err) {\r\n                console.error('ERROR!', err)\r\n            }\r\n        } else {\r\n            try {\r\n                const res = dispatch(addStay(stay))\r\n                navigate('/')\r\n            } catch (err) {\r\n                console.error('ERROR!', err)\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    return (\r\n        <form onSubmit={onSaveStay}>\r\n            <h1>{stay._id ? 'Edit' : 'Add'} stay</h1>\r\n\r\n            <label htmlFor=\"name\">name</label>\r\n            <input ref={inputRef} {...register('name', 'text')} />\r\n\r\n            <label htmlFor=\"price\">Price</label>\r\n            <input {...register('price', 'number')} />\r\n            <button>submit</button>\r\n        </form>\r\n    )\r\n}","C:\\dev\\coding-academy\\sprint4\\src\\pages\\bnb-app.jsx",["182"],"import React, { useEffect } from 'react'\r\n// import { connect } from 'react-redux'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { loadStays, setFilterBy } from '../store/stay.actions'\r\nimport { StayList } from '../cmps/stay-list'\r\nimport { StayFilter } from '../cmps/stay-filter'\r\n// import { stayService } from '../services/stay.service'\r\n// import {eventBusService } from '../services/event-bus.service'\r\n\r\nexport const BnbApp = () => {\r\n    const { stays, isFilterOpen } = useSelector(state => state.stayModule)\r\n    const dispatch = useDispatch()\r\n\r\n    useEffect(() => {\r\n        dispatch(loadStays())\r\n    }, [])\r\n\r\n    const onChangeFilter = (filterBy) => {\r\n        dispatch(setFilterBy(filterBy))\r\n        dispatch(loadStays())\r\n    }\r\n\r\n    const onClickFilter = (ev) => {\r\n        ev.preventDefault()\r\n        dispatch({\r\n            type: 'SET_ISOPENFILTER',\r\n            isFilterOpen: !isFilterOpen\r\n        })\r\n        if (!isFilterOpen) dispatch(loadStays())\r\n    }\r\n    \r\n    if (!stays) return <div>Loading...</div>\r\n    return (\r\n        <section className={isFilterOpen ? 'filter-open bnb-app full main-container ' : 'bnb-app full main-container '}>\r\n            <div onClick={onClickFilter} className='main-screen' ></div>\r\n            <StayFilter isFilterOpen={isFilterOpen} onChangeFilter={onChangeFilter} onClickFilter={onClickFilter} />\r\n            <StayList stays={stays} />\r\n        </section>\r\n    )\r\n}","C:\\dev\\coding-academy\\sprint4\\src\\pages\\reserve-summary.jsx",[],"C:\\dev\\coding-academy\\sprint4\\src\\pages\\stay-details.jsx",["183","184"],"import { useEffect } from \"react\"\r\nimport { useState } from \"react\"\r\nimport { useNavigate, useParams } from \"react-router-dom\"\r\nimport { Calender } from \"../cmps/calender\"\r\nimport { Reserve } from \"../cmps/reserve\"\r\nimport { stayService } from \"../services/stay.service\"\r\nimport { ReactComponent as Star } from '../assets/icons/star.svg';\r\nimport { ReactComponent as Heart } from '../assets/icons/heart.svg';\r\nimport { ReactComponent as Share } from '../assets/icons/share.svg';\r\nimport { ReactComponent as Footprint } from '../assets/icons/footprint.svg';\r\nimport { ReactComponent as Security } from '../assets/icons/security.svg';\r\nimport { ReactComponent as Location } from '../assets/icons/location.svg';\r\nimport { ReactComponent as User } from '../assets/icons/user.svg';\r\nimport wifi from '../assets/img/wifi.png'\r\nimport monitor from '../assets/img/monitor.png'\r\nimport kitchen from '../assets/img/kitchen-tools.png'\r\nimport hairDryer from '../assets/img/hair-dryer.png'\r\nimport hanger from '../assets/img/clothes-hanger.png'\r\nimport airConditioner from '../assets/img/air-conditioner.png'\r\nimport { Review } from \"../cmps/stay-review\"\r\n\r\nexport const StayDetails = () => {\r\n\r\n    const [stay, setStay] = useState(null)\r\n    const params = useParams()\r\n    const navigate = useNavigate()\r\n\r\n    useEffect(() => {\r\n        loadStay()\r\n        // loadReviews()\r\n    }, [])\r\n\r\n    const loadStay = () => {\r\n        const stayId = params.id\r\n        stayService.getById(stayId).then((stay) => {\r\n            console.log('stay:', stay)\r\n            setStay(stay)\r\n            // setReviews(reviews)\r\n        })\r\n    }\r\n\r\n    const avgRate = () => {\r\n        let rates = stay.reviews.map(review => review.rate)\r\n        rates = rates.reduce((a, b) => a + b, 0)\r\n        console.log('rates:', rates)\r\n        return (rates / stay.reviews.length).toFixed(2)\r\n    }\r\n\r\n    if (!stay) return <div>Loading...</div>\r\n\r\n    return (\r\n        <div className=\"stay-details\">\r\n            <div className=\"header-details\">\r\n                <h1>{stay.name}</h1>\r\n                <div className=\"mini-details\">\r\n                    <div className=\"mini-info\">\r\n                        <span><Star /> {avgRate()}</span>&middot;\r\n                        <button className=\"review-amount\">{stay.reviews.length} reviews</button>&middot;\r\n                        <span className=\"country-code\">{stay.loc.countryCode},{stay.loc.country}</span>\r\n                    </div>\r\n                    <div className=\"details-actions\">\r\n                        <div className=\"share-details\"><button href=\"#\"><span><Share /></span>Share</button></div>\r\n                        <div className=\"save-details\"><button href=\"#\"><span><Heart /></span> Save</button></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"img-details\">\r\n                <div className=\"main-img\">\r\n                    <img src={stay.imgUrls[0]} alt=\"\" srcSet=\"\" />\r\n                </div>\r\n                <div className=\"middle-top\">\r\n                    <img src={stay.imgUrls[1]} alt=\"\" srcSet=\"\" />\r\n                </div>\r\n                <div className=\"middle-bottom\">\r\n                    <img src={stay.imgUrls[2]} alt=\"\" srcSet=\"\" />\r\n                </div>\r\n                <div className=\"top-right\">\r\n                    <img src={stay.imgUrls[3]} alt=\"\" srcSet=\"\" />\r\n                </div>\r\n                <div className=\"bottom-right\">\r\n                    <img src={stay.imgUrls[4]} alt=\"\" srcSet=\"\" />\r\n                </div>\r\n            </div>\r\n            <div className=\"main-details\">\r\n                <div className=\"details-section\">\r\n                    <div className=\"mini-details\">\r\n                        <div className=\"stay-details\">\r\n                            <h2>{stay.roomType} hosted by {stay.host.fullname}</h2>\r\n                            <span>{stay.capacity} guests</span>&middot;\r\n                            <span>{stay.bathrooms} bathrooms</span>&middot;\r\n                            <span>{stay.bedrooms} bedrooms</span>\r\n                        </div>\r\n                        <div><User /></div>\r\n                    </div>\r\n                    <hr />\r\n                    <div className=\"some-keys\">\r\n                        <div className=\"guest-impression\">\r\n                            <div className=\"logo\"><Location /></div>\r\n                            <div className=\"txt\">\r\n                                <div className=\"header\">Great location</div>\r\n                                <div className=\"description\">100% of recent guests gave the location a 5-star rating.</div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"guest-impression\">\r\n                            <div className=\"logo\"><Security /></div>\r\n                            <div className=\"txt\">\r\n                                <div className=\"header\">Great check-in experience</div>\r\n                                <div className=\"description\">100% of recent guests gave the check-in process a 5-star rating.</div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"guest-impression\">\r\n                            <div className=\"logo\"><Footprint /></div>\r\n                            <div className=\"txt\">\r\n                                <div className=\"header\">Furry friends welcome</div>\r\n                                <div className=\"description\">Bring your pets along for the stay.</div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <hr />\r\n                    <div className=\"air-cover\">\r\n                        <h2 className=\"air-cover-img\">\r\n                            <img src=\"https://a0.muscache.com/im/pictures/54e427bb-9cb7-4a81-94cf-78f19156faad.jpg\" alt=\"\" />\r\n                        </h2>\r\n                        <div className=\"air-cover-description\">\r\n                            Every booking includes free protection from Host cancellations, listing inaccuracies, and other issues like trouble checking in.\r\n                        </div>\r\n                        <button aria-label=\"Learn more\" type=\"button\" className=\"learn-more-link\">Learn more</button>\r\n                    </div>\r\n                    <hr />\r\n                    <div className=\"more-description\">\r\n                        <div className=\"summary\">{stay.summary}</div>\r\n                        <button className=\"show-more\">Show more </button>\r\n                    </div>\r\n                    <hr />\r\n                    <div className=\"amenities-section\">\r\n                        <div className=\"amenities-header\">\r\n                            <h2>What this place offers</h2>\r\n                        </div>\r\n                        <div className=\"amenities\">\r\n                            <div>\r\n                                <div className=\"amenitie\">\r\n                                    <div>Wifi</div>\r\n                                    <div className=\"wifi-icon\"><img src={wifi} alt=\"\"/></div>\r\n                                </div>\r\n                            </div>\r\n                            <div>\r\n                                <div className=\"amenitie\">\r\n                                    <div>Kitchen</div>\r\n                                    <div className=\"kitchen-icon\"><img src={kitchen} alt=\"\"/></div>\r\n                                </div>\r\n                            </div>\r\n                            <div>\r\n                                <div className=\"amenitie\">\r\n                                    <div>hair-dryer</div>\r\n                                    <div className=\"hairDryer-icon\"><img src={hairDryer} alt=\"\"/></div>\r\n                                </div>\r\n                            </div>\r\n                            <div>\r\n                                <div className=\"amenitie\">\r\n                                    <div>Hanger</div>\r\n                                    <div className=\"hanger-icon\"><img src={hanger} alt=\"\"/></div>\r\n                                </div>\r\n                            </div>\r\n                            <div>\r\n                                <div className=\"amenitie\">\r\n                                    <div>Air-Conditioner</div>\r\n                                    <div className=\"airConditioner-icon\"><img src={airConditioner} alt=\"\"/></div>\r\n                                </div>\r\n                            </div>\r\n                            <div>\r\n                                <div className=\"amenitie\">\r\n                                    <div>Monitor</div>\r\n                                    <div className=\"monitor-icon\"><img src={monitor} alt=\"\"/></div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <hr />\r\n                    <div className=\"date-picker\">\r\n                        <Calender stay={stay} />\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"reserve-section\">\r\n                    <div className=\"reserve-form\">\r\n                        <div className=\"reserve\">\r\n                            <Reserve stay={stay} avgRate={avgRate}/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"reviews-section\">\r\n                <Review stay={stay} avgRate={avgRate}/>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\expanded-filter.jsx",["185","186"],"import { useFormRegister } from '../hooks/useFormRegister'\r\n\r\nexport const ExpandedFilter = (props) => {\r\n\r\n    const [register, setFilter, filterBy] = useFormRegister({\r\n        name: '',\r\n        maxPrice: 1610,\r\n        minPrice: 50,\r\n        labels: '',\r\n    }, props.onChangeFilter)\r\n\r\n    const { onClickFilter } = props\r\n\r\n    return (\r\n        <form className='expanded-filter' onSubmit={onClickFilter}>\r\n           \r\n            <h1>Price range</h1>\r\n            <section className='range-slider'>\r\n                <input min=\"0\" max=\"1800\"  {...register('minPrice', 'range')} />\r\n                <input min=\"0\" max=\"1600\"  {...register('maxPrice', 'range')} />\r\n            </section>\r\n            <div className='number-price-filter'>\r\n                <input {...register('minPrice', 'number')} /> - <input {...register('maxPrice', 'number')} />\r\n            </div>\r\n            <button>show homes</button>\r\n        </form>\r\n    )\r\n}\r\n","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\header-profile.jsx",[],"C:\\dev\\coding-academy\\sprint4\\src\\cmps\\header-filter.jsx",["187"],"C:\\dev\\coding-academy\\sprint4\\src\\services\\review.service.js",["188"],"// import { httpService } from './http.service'\r\nimport { storageService } from './async-storage.service'\r\n// import { socketService, SOCKET_EVENT_REVIEW_ADDED, SOCKET_EVENT_REVIEW_ABOUT_YOU } from './socket.service'\r\nimport { getActionRemoveReview, getActionAddReview } from '../store/review.actions'\r\n\r\nconst reviewChannel = new BroadcastChannel('reviewChannel')\r\n\r\n// ;(() => {\r\n//   reviewChannel.addEventListener('message', (ev) => {\r\n//     store.dispatch(ev.data)\r\n//   })\r\n//   socketService.on(SOCKET_EVENT_REVIEW_ADDED, (review) => {\r\n//     console.log('GOT from socket', review)\r\n//     store.dispatch(getActionAddReview(review))\r\n//   })\r\n//   socketService.on(SOCKET_EVENT_REVIEW_ABOUT_YOU, (review) => {\r\n//     showSuccessMsg(`New review about me ${review.txt}`)\r\n//   })\r\n// })()\r\n\r\n\r\n\r\nexport const reviewService = {\r\n  add,\r\n  query,\r\n  remove\r\n}\r\n\r\n\r\nfunction query(filterBy) {\r\n  var queryStr = (!filterBy) ? '' : `?name=${filterBy.name}&sort=anaAref`\r\n  // return httpService.get(`review${queryStr}`)\r\n  return storageService.query('review')\r\n}\r\n\r\nasync function remove(reviewId) {\r\n  // await httpService.delete(`review/${reviewId}`)\r\n  await storageService.remove('review', reviewId)\r\n  reviewChannel.postMessage(getActionRemoveReview(reviewId))\r\n\r\n\r\n}\r\nasync function add(review) {\r\n  // const addedReview = await httpService.post(`review`, review)\r\n\r\n  // review.byUser = userService.getLoggedinUser()\r\n  // review.aboutUser = await userService.getById(review.aboutUserId)\r\n  const addedReview = await storageService.post('review', review)\r\n\r\n  reviewChannel.postMessage(getActionAddReview(addedReview))\r\n\r\n  return addedReview\r\n}\r\n\r\n// This way, we can also subscribe to none-store data change\r\n// function subscribe(listener) {\r\n//   reviewChannel.addEventListener('message', listener)\r\n// }\r\n// function unsubscribe(listener) {\r\n//   reviewChannel.removeEventListener('message', listener)\r\n// }\r\n","C:\\dev\\coding-academy\\sprint4\\src\\store\\stay.actions.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\hooks\\useFormRegister.js",["189"],"import { useEffect, useState } from \"react\"\nimport { useEffectUpdate } from \"./useEffectUpdate\"\n\nexport const useFormRegister = (initialState, callBack) => {\n\n    const [fields, setFields] = useState(initialState)\n\n    useEffectUpdate(() => {\n        if (callBack) callBack(fields)\n    }, [fields])\n\n    const handleChange = ({ target }) => {\n        const field = target.name\n        let value = target.value\n\n        switch (target.type) {\n            case 'number':\n            case 'range':\n                value = +target.value || ''\n                break;\n            case 'checkbox':\n                value = target.checked\n                break;\n            case 'date':\n                value = new Date(value)\n                break;\n            case 'time':\n                const newDate = new Date()\n                const hours = value.split(':')[0]\n                const minutes = value.split(':')[1]\n                newDate.setHours(hours)\n                newDate.setMinutes(minutes)\n                value = newDate\n                break\n            default:\n                break\n        }\n        setFields(prevFields => ({ ...prevFields, [field]: value }))\n    }\n\n    const getFormattedDate = (value) => {\n        const valueDate = new Date(value)\n        return `${valueDate.getFullYear()}-${(valueDate.getMonth() + 1 + '').padStart(2, '0')}-${(valueDate.getDate() + '').padStart(2, '0')}`\n    }\n    const getFormattedTime = (value) => {\n        const valueTime = new Date(value)\n        return `${(valueTime.getHours() + '').padStart(2, '0')}:${(valueTime.getMinutes() + '').padStart(2, '0')}`\n    }\n    const register = (field, type = '', value) => { // value only used when type === 'radio'\n        const inputProp = {\n            onChange: handleChange,\n            name: field,\n            id: field,\n            value: fields[field],\n            type\n        }\n        if (type === 'checkbox') inputProp.checked = fields[field]\n        if (type === 'date') inputProp.value = getFormattedDate(fields[field])\n        if (type === 'time') inputProp.value = getFormattedTime(fields[field])\n        if (type === 'radio') {\n            inputProp.value = value\n            inputProp.id = value\n            inputProp.checked = fields[field] === value\n        }\n        return inputProp\n    }\n    return [register, setFields, fields]\n}","C:\\dev\\coding-academy\\sprint4\\src\\services\\stay.service.js",["190"],"\r\nimport { storageService } from './async-storage.service.js'\r\nimport { utilService } from './util.service.js'\r\nimport { userService } from './user.service.js'\r\nconst fs = require('fs')\r\n// This file demonstrates how to use a BroadcastChannel to notify other browser tabs \r\n\r\nconst STORAGE_KEY = 'stay'\r\n\r\nvar gStays = require('../data/stay.json')\r\n\r\nexport const stayService = {\r\n    query,\r\n    getById,\r\n    save,\r\n    remove\r\n}\r\nwindow.cs = stayService\r\n\r\nfunction query(filterBy) {\r\n    return storageService.query(STORAGE_KEY).then(stays => {\r\n      if (!stays[0]){\r\n        gStays.forEach(stay => stay.reviews.map(review => review.rate = utilService.getRandomIntInclusive(3,5)))\r\n        stays = storageService.postMany(STORAGE_KEY, gStays).then(x => console.log(x))\r\n      }\r\n        if (filterBy) {\r\n            let { maxPrice, minPrice } = filterBy\r\n            if (!maxPrice) maxPrice = Infinity\r\n            if (!minPrice) minPrice = 0\r\n            stays = stays.filter(stay => stay.price <= maxPrice && stay.price >= minPrice)\r\n            return stays\r\n        }\r\n        return stays\r\n    }\r\n    )\r\n}\r\n\r\nfunction getById(stayId) {\r\n    return storageService.get(STORAGE_KEY, stayId)\r\n    // return axios.get(`/api/stay/${stayId}`)\r\n}\r\nasync function remove(stayId) {\r\n    await storageService.remove(STORAGE_KEY, stayId)\r\n}\r\nasync function save(stay) {\r\n    var savedStay\r\n    if (stay._id) {\r\n        savedStay = await storageService.put(STORAGE_KEY, stay)\r\n\r\n    } else {\r\n        // Later, owner is set by the backend\r\n        let newStay = _getEmptyStay()\r\n        newStay.name = stay.name\r\n        newStay.price =stay.price\r\n        console.log('newStay:', newStay)\r\n        gStays.push(newStay)\r\n        savedStay = await storageService.post(STORAGE_KEY, newStay)\r\n    }\r\n    return  _saveStayToFile()\r\n        .then(() => savedStay)\r\n}\r\n\r\nfunction _saveStayToFile() {\r\n  return new Promise((resolve, reject) => {\r\n      const data = JSON.stringify(gStays, null, 2)\r\n      fs.writeFile('data/stay.json', data, (err) => {\r\n          if (err) return reject('Cannot save to file')\r\n          resolve()\r\n      })\r\n  })\r\n}\r\n\r\nfunction _getEmptyStay(){\r\n    return     {\r\n        \"type\": \"House\",\r\n        \"imgUrls\": [\"https://a0.muscache.com/im/pictures/e83e702f-ef49-40fb-8fa0-6512d7e26e9b.jpg?aki_policy=large\", \"otherImg.jpg\"],\r\n        \"summary\": \"Fantastic duplex apartment with three bedrooms, located in the historic area of Porto, Ribeira (Cube)...\",\r\n        \"capacity\": 8,\r\n        \"amenities\": [\r\n          \"TV\",\r\n          \"Wifi\",\r\n          \"Kitchen\",\r\n          \"Smoking allowed\",\r\n          \"Pets allowed\",\r\n          \"Cooking basics\"\r\n        ],\r\n        \"host\": {\r\n          \"_id\": \"u101\",\r\n          \"fullname\": \"Davit Pok\",\r\n          \"imgUrl\": \"https://a0.muscache.com/im/pictures/fab79f25-2e10-4f0f-9711-663cb69dc7d8.jpg?aki_policy=profile_small\",\r\n        },\r\n        \"loc\": {\r\n          \"country\": \"Portugal\",\r\n          \"countryCode\": \"PT\",\r\n          \"city\": \"Porto\",\r\n          \"address\": \"17 Kombo st\",\r\n          \"lat\": -8.61308,\r\n          \"lng\": 41.1413\r\n        },\r\n        \"reviews\": [\r\n          {\r\n            \"id\": \"madeId\",\r\n            \"txt\": \"Very helpful hosts. Cooked traditional...\",\r\n            \"rate\": 4,\r\n            \"by\": {\r\n              \"_id\": \"u102\",\r\n              \"fullname\": \"user2\",\r\n              \"imgUrl\": \"/img/img2.jpg\"\r\n            }\r\n          }\r\n        ],\r\n        \"likedByUsers\" : ['mini-user'] // for user-wishlist : use $in\r\n      }\r\n\r\n}\r\n\r\n\r\n","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\stay-list.jsx",[],"C:\\dev\\coding-academy\\sprint4\\src\\cmps\\calender.jsx",["191"],"import React from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\n// import { useSelector } from \"react-redux\";\r\nimport { useFormRegister } from \"../hooks/useFormRegister\";\r\n// import { orderService } from \"../services/order.service\";\r\nimport { saveDates } from \"../store/order.actions\";\r\n\r\n\r\nexport const Calender = ({stay}) => {\r\n  const [register, setStartDate, date] = useFormRegister({\r\n    startDate: '',\r\n    endDate: ''\r\n  });\r\n\r\n  \r\n  const dispatch = useDispatch()\r\n\r\n  \r\n\r\n  useEffect(() => { \r\n    \r\n  }, [])\r\n\r\n  const setDate = (ev) => {\r\n    ev.preventDefault()\r\n    const startDate = new Date(date.startDate).toLocaleDateString()\r\n    const endDate = new Date(date.endDate).toLocaleDateString()\r\n    dispatch(saveDates(stay._id, startDate, endDate))\r\n\r\n  }\r\n\r\n  return (\r\n    <section>\r\n      <form onSubmit={(ev) => setDate(ev)}>\r\n\r\n        <label htmlFor=\"start\">Start date:</label>\r\n        <input {...register('startDate', 'date')} />\r\n\r\n        <label htmlFor=\"end\">End date:</label>\r\n        <input {...register('endDate', 'date')} />\r\n\r\n        <button>set</button>\r\n      </form>\r\n    </section>\r\n  )\r\n};\r\n\r\n","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\reserve.jsx",["192"],"import { useState } from \"react\"\r\nimport { useDispatch } from \"react-redux\"\r\nimport { useSelector } from \"react-redux\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { saveOrder } from \"../store/order.actions\"\r\nimport { ReactComponent as Star } from '../assets/icons/star.svg';\r\nimport { CalcReserve } from \"./calc-reserve\"\r\n\r\nexport const Reserve = ({ stay, avgRate }) => {\r\n\r\n    let { order } = useSelector(state => state.orderModule)\r\n    const [isOpen, setIsOpen] = useState(false)\r\n    const dispatch = useDispatch()\r\n\r\n\r\n    const [guestsCount, setGuestsCount] = useState({\r\n        adults: 0,\r\n        children: 0,\r\n        infants: 0,\r\n        pets: 0,\r\n    })\r\n\r\n    const toggleMenu = () => {\r\n        setIsOpen(!isOpen)\r\n    }\r\n\r\n    const onClick = (category, action) => {\r\n        action = action === '+' ? 1 : -1\r\n        if (guestsCount[category] + action < 0 || action > stay.capacity) return\r\n        guestsCount[category] += action\r\n        setGuestsCount(prevGuestsCount => ({ ...prevGuestsCount }))\r\n        console.log(guestsCount)\r\n    }\r\n\r\n    const submitReserve = () => {\r\n        const guests = guestsCount\r\n        order = { ...order, guests }\r\n        console.log('order:', order)\r\n        dispatch(saveOrder(order))\r\n    }\r\n\r\n    const mouseMove = (e) => {\r\n        const rect = e.target.getBoundingClientRect();\r\n        const mouseX = e.pageX - e.currentTarget.offsetLeft;\r\n        const mouseY = e.pageY - e.currentTarget.offsetTop;\r\n        e.currentTarget.style.cssText = `\r\n    --mouse-x: ${mouseX}; \r\n    --mouse-y: ${mouseY};\r\n  `;\r\n    }\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"reserve-form\">\r\n            <div className=\"reserve-header\">\r\n                <div>\r\n                    <div><span className=\"price\">${stay.price}</span><span> night</span></div>\r\n                </div>\r\n                <div className=\"reserve-rate\">\r\n                    <div><span><Star /></span><span> {avgRate()}</span></div>&middot;\r\n                    <button>{stay.reviews.length} reviews</button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"reserve-info\">\r\n                <div className=\"pick-dates\">\r\n                    <div className=\"dates-first-layer\">\r\n                        <div className=\"dates-second-layer\">\r\n                            <button className=\"reserve-dates\">\r\n                                <div className=\"check-in\">\r\n                                    <div className=\"txt-reserve\">Check-in</div>\r\n                                    <div className=\"date-reserve\">{order.startDate}</div>\r\n                                </div>\r\n                                <div className=\"check-out\">\r\n                                    <div className=\"txt-reserve\">Check-out</div>\r\n                                    <div className=\"date-reserve\">{order.endDate}</div>\r\n                                </div>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"guest-info\">\r\n                    <div className=\"guest-first-layer\">\r\n                        <div className=\"guest-details-layer\">\r\n                            <div className=\"guest-final-details\">\r\n                                <button className=\"guests-details\" onClick={() => toggleMenu()}>\r\n                                    <div className=\"title\">Guests</div>\r\n                                    <div className=\"saddf\">\r\n                                        <div className=\"guest-description\">\r\n                                            {guestsCount.adults + guestsCount.children} guest\r\n                                            {(guestsCount.infants) ? ',' + guestsCount.infants + 'infants' : ''}\r\n                                            {(guestsCount.pets) ? ',' + guestsCount.pets + 'pets' : ''}\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                </button>\r\n                            </div>\r\n                            {isOpen &&\r\n\r\n                                <div className=\"select-guests\">\r\n                                    <div className=\"pick-guest-account\">\r\n                                        <div>\r\n                                            <h3>Adults</h3>\r\n                                            <h5>Age 13+</h5>\r\n                                        </div>\r\n                                        <div>\r\n                                            <span onClick={() => onClick('adults', '+')}>+</span>\r\n                                            <span>{guestsCount.adults}</span>\r\n                                            <span onClick={() => onClick('adults', '-')}>-</span>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"pick-guest-account\">\r\n                                        <div>\r\n                                            <h3>Children</h3>\r\n                                            <h5>Ages 2-12</h5>\r\n                                        </div>\r\n                                        <div>\r\n                                            <span onClick={() => onClick('children', '+')}>+</span>\r\n                                            <span>{guestsCount.children}</span>\r\n                                            <span onClick={() => onClick('children', '-')}>-</span>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"pick-guest-account\">\r\n                                        <div>\r\n                                            <h3>Infants</h3>\r\n                                            <h5>Under 2</h5>\r\n                                        </div>\r\n                                        <div>\r\n                                            <span onClick={() => onClick('infants', '+')}>+</span>\r\n                                            <span>{guestsCount.infants}</span>\r\n                                            <span onClick={() => onClick('infants', '-')}>-</span>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"pick-guest-account\">\r\n                                        <div>\r\n                                            <h3>Pets</h3>\r\n                                        </div>\r\n                                        <div>\r\n                                            <span onClick={() => onClick('pets', '+')}>+</span>\r\n                                            <span>{guestsCount.pets}</span>\r\n                                            <span onClick={() => onClick('pets', '-')}>-</span>\r\n                                        </div>\r\n                                    </div>\r\n                                    <button onClick={() => toggleMenu()}>close</button>\r\n                                </div>\r\n                            }\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"reserve-btn-section\">\r\n                <Link to=\"/summary\" props={{}}>\r\n\r\n                    <div className=\"min-h-screen flex flex-col items-center justify-center bg-gray-100\">\r\n                        <button onMouseMove={(e) => mouseMove(e)} onClick={() => submitReserve()} id=\"gradientBtn\">\r\n                            <span className=\"absolute inset-0 gradient opacity-0 transition-opacity duration-300\"></span>\r\n                            <span className=\"relative z-1 pointer-events-none\">Let's Go</span>\r\n                        </button>\r\n                    </div>\r\n\r\n                </Link>\r\n            </div>\r\n\r\n            {order.endDate &&\r\n                <section>\r\n                    <div className=\"msg-txt\">\r\n                        <div>You won't be charged yet</div>\r\n                    </div>\r\n                    <CalcReserve stay={stay} />\r\n                </section>\r\n            }\r\n\r\n        </div>\r\n    )\r\n}","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\stay-review.jsx",[],"C:\\dev\\coding-academy\\sprint4\\src\\services\\util.service.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\hooks\\useEffectUpdate.js",["193","194"],"import { useEffect, useRef } from \"react\"\n\nexport const useEffectUpdate = (callBack, dependencies) => {\n    \n    const isFirst = useRef(true)\n\n    useEffect(()=>{\n        if (isFirst.current) {\n            isFirst.current = false\n            return\n        }   \n        callBack()\n    }, dependencies)\n    \n}","C:\\dev\\coding-academy\\sprint4\\src\\store\\order.actions.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\services\\order.service.js",["195"],"\r\nimport { storageService } from './async-storage.service.js'\r\nimport { utilService } from './util.service.js'\r\nimport { userService } from './user.service.js'\r\n\r\n// This file demonstrates how to use a BroadcastChannel to notify other browser tabs \r\n\r\nconst STORAGE_KEY = 'order'\r\n\r\nexport const orderService = {\r\n    query,\r\n    getById,\r\n    save,\r\n    remove,\r\n    createOrder\r\n}\r\nwindow.cs = orderService\r\n\r\nfunction query(filterBy) {\r\n    return storageService.query(STORAGE_KEY).then(orders => {\r\n        \r\n        // if(!orders) return _getEmptyOrder()\r\n        return orders\r\n    }\r\n    )\r\n}\r\n\r\nfunction createOrder(hostId, startDate, endDate){\r\n     const order = _getNewOrder(hostId, startDate, endDate)\r\n     save(order)\r\n     return order\r\n}\r\n\r\nfunction getById(orderId) {\r\n    return storageService.get(STORAGE_KEY, orderId)\r\n    // return axios.get(`/api/order/${orderId}`)\r\n}\r\nasync function remove(orderId) {\r\n    await storageService.remove(STORAGE_KEY, orderId)\r\n}\r\n\r\nasync function save(order) {\r\n    var savedOrder\r\n    if (order._id) {\r\n        savedOrder = await storageService.put(STORAGE_KEY, order)\r\n\r\n    } else {\r\n        // Later, owner is set by the backend\r\n        let newOrder = _getNewOrder()\r\n        newOrder.name = order.name\r\n        newOrder.price = order.price\r\n        console.log('newOrder:', newOrder)\r\n        savedOrder = await storageService.post(STORAGE_KEY, newOrder)\r\n    }\r\n    return savedOrder\r\n}\r\n\r\nfunction _getNewOrder(hostId='', startDate='', endDate='') {\r\n    return {\r\n        \"_id\": utilService.makeId(),\r\n        hostId,\r\n        \"createdAt\": Date.now(),\r\n        \"buyer\": {\r\n            \"_id\": \"u101\",\r\n            \"fullname\": \"User 1\"\r\n        },\r\n        \"totalPrice\": 160,\r\n        startDate,\r\n        endDate,\r\n        \"guests\": {\r\n            \"adults\": 2,\r\n            \"kids\": 1\r\n        },\r\n        \"stay\": {\r\n            \"_id\": \"h102\",\r\n            \"name\": \"House Of Uncle My\",\r\n            \"price\": 80.00\r\n        },\r\n        \"status\": \"pending\"\r\n    }\r\n\r\n}\r\n\r\n\r\n// TEST DATA\r\n\r\n\r\n","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\stay-preview.jsx",["196"],"import React from \"react\";\r\n\r\nexport function StayPreview({ stay }) {\r\n    return (\r\n            <div key={stay._id} className='stay-preview'>\r\n                <img src={stay.imgUrls[0]} />\r\n                <div>\r\n                    <p><span>{stay.loc.city}, {stay.loc.country}</span></p>\r\n                    <p>{stay.loc.address}, {stay.loc.city}</p>\r\n                    {/* <p>{stay.capacity.guests} beds</p> */}\r\n                    <p>Oct 12-18</p>\r\n                    <p className=\"price\"><span>${stay.price}</span> night</p>\r\n                </div>\r\n            </div>\r\n    )\r\n}","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\calc-reserve.jsx",[],"C:\\dev\\coding-academy\\sprint4\\src\\cmps\\header-expanded-filter.jsx",[],{"ruleId":"197","replacedBy":"198"},{"ruleId":"199","replacedBy":"200"},{"ruleId":"201","severity":1,"message":"202","line":7,"column":10,"nodeType":"203","messageId":"204","endLine":7,"endColumn":20},{"ruleId":"201","severity":1,"message":"205","line":7,"column":9,"nodeType":"203","messageId":"204","endLine":7,"endColumn":17},{"ruleId":"206","severity":1,"message":"207","line":46,"column":9,"nodeType":"208","messageId":"209","endLine":47,"endColumn":66},{"ruleId":"201","severity":1,"message":"210","line":3,"column":10,"nodeType":"203","messageId":"204","endLine":3,"endColumn":33},{"ruleId":"201","severity":1,"message":"211","line":30,"column":10,"nodeType":"203","messageId":"204","endLine":30,"endColumn":22},{"ruleId":"212","severity":1,"message":"213","line":34,"column":26,"nodeType":"214","endLine":34,"endColumn":49},{"ruleId":"201","severity":1,"message":"215","line":1,"column":10,"nodeType":"203","messageId":"204","endLine":1,"endColumn":24},{"ruleId":"201","severity":1,"message":"216","line":3,"column":10,"nodeType":"203","messageId":"204","endLine":3,"endColumn":21},{"ruleId":"201","severity":1,"message":"217","line":16,"column":22,"nodeType":"203","messageId":"204","endLine":16,"endColumn":29},{"ruleId":"218","severity":1,"message":"219","line":36,"column":8,"nodeType":"220","endLine":36,"endColumn":10,"suggestions":"221"},{"ruleId":"201","severity":1,"message":"222","line":42,"column":23,"nodeType":"203","messageId":"204","endLine":42,"endColumn":26},{"ruleId":"201","severity":1,"message":"222","line":49,"column":23,"nodeType":"203","messageId":"204","endLine":49,"endColumn":26},{"ruleId":"218","severity":1,"message":"223","line":16,"column":8,"nodeType":"220","endLine":16,"endColumn":10,"suggestions":"224"},{"ruleId":"201","severity":1,"message":"225","line":26,"column":11,"nodeType":"203","messageId":"204","endLine":26,"endColumn":19},{"ruleId":"218","severity":1,"message":"226","line":31,"column":8,"nodeType":"220","endLine":31,"endColumn":10,"suggestions":"227"},{"ruleId":"201","severity":1,"message":"228","line":5,"column":22,"nodeType":"203","messageId":"204","endLine":5,"endColumn":31},{"ruleId":"201","severity":1,"message":"229","line":5,"column":33,"nodeType":"203","messageId":"204","endLine":5,"endColumn":41},{"ruleId":"212","severity":1,"message":"213","line":23,"column":75,"nodeType":"214","endLine":23,"endColumn":95},{"ruleId":"201","severity":1,"message":"230","line":31,"column":7,"nodeType":"203","messageId":"204","endLine":31,"endColumn":15},{"ruleId":"201","severity":1,"message":"231","line":1,"column":10,"nodeType":"203","messageId":"204","endLine":1,"endColumn":19},{"ruleId":"201","severity":1,"message":"216","line":4,"column":10,"nodeType":"203","messageId":"204","endLine":4,"endColumn":21},{"ruleId":"201","severity":1,"message":"232","line":11,"column":20,"nodeType":"203","messageId":"204","endLine":11,"endColumn":32},{"ruleId":"201","severity":1,"message":"233","line":43,"column":15,"nodeType":"203","messageId":"204","endLine":43,"endColumn":19},{"ruleId":"218","severity":1,"message":"234","line":13,"column":8,"nodeType":"203","endLine":13,"endColumn":20},{"ruleId":"218","severity":1,"message":"235","line":13,"column":8,"nodeType":"203","endLine":13,"endColumn":20,"suggestions":"236"},{"ruleId":"201","severity":1,"message":"216","line":4,"column":10,"nodeType":"203","messageId":"204","endLine":4,"endColumn":21},{"ruleId":"212","severity":1,"message":"213","line":6,"column":17,"nodeType":"214","endLine":6,"endColumn":46},"no-native-reassign",["237"],"no-negated-in-lhs",["238"],"no-unused-vars","'StayFilter' is defined but never used.","Identifier","unusedVar","'newState' is assigned a value but never used.","no-fallthrough","Expected a 'break' statement before 'case'.","SwitchCase","case","'getActionSetWatchedUser' is defined but never used.","'onUserUpdate' is defined but never used.","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","'showSuccessMsg' is defined but never used.","'userService' is defined but never used.","'setStay' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'params.stayId'. Either include it or remove the dependency array.","ArrayExpression",["239"],"'res' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'dispatch'. Either include it or remove the dependency array.",["240"],"'navigate' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'loadStay'. Either include it or remove the dependency array.",["241"],"'setFilter' is assigned a value but never used.","'filterBy' is assigned a value but never used.","'queryStr' is assigned a value but never used.","'useEffect' is defined but never used.","'setStartDate' is assigned a value but never used.","'rect' is assigned a value but never used.","React Hook useEffect was passed a dependency list that is not an array literal. This means we can't statically verify whether you've passed the correct dependencies.","React Hook useEffect has a missing dependency: 'callBack'. Either include it or remove the dependency array. If 'callBack' changes too often, find the parent component that defines it and wrap that definition in useCallback.",["242"],"no-global-assign","no-unsafe-negation",{"desc":"243","fix":"244"},{"desc":"245","fix":"246"},{"desc":"247","fix":"248"},{"desc":"249","fix":"250"},"Update the dependencies array to be: [params.stayId]",{"range":"251","text":"252"},"Update the dependencies array to be: [dispatch]",{"range":"253","text":"254"},"Update the dependencies array to be: [loadStay]",{"range":"255","text":"256"},"Update the dependencies array to be: [callBack]",{"range":"257","text":"258"},[1015,1017],"[params.stayId]",[634,636],"[dispatch]",[1374,1376],"[loadStay]",[288,300],"[callBack]"]