[{"C:\\dev\\coding-academy\\sprint4\\src\\index.js":"1","C:\\dev\\coding-academy\\sprint4\\src\\serviceWorkerRegistration.js":"2","C:\\dev\\coding-academy\\sprint4\\src\\redux\\store.js":"3","C:\\dev\\coding-academy\\sprint4\\src\\redux\\Slice.js":"4","C:\\dev\\coding-academy\\sprint4\\src\\root-cmp.jsx":"5","C:\\dev\\coding-academy\\sprint4\\src\\routes.js":"6","C:\\dev\\coding-academy\\sprint4\\src\\pages\\bnb-app.jsx":"7","C:\\dev\\coding-academy\\sprint4\\src\\services\\event-bus.service.js":"8","C:\\dev\\coding-academy\\sprint4\\src\\store\\review.actions.js":"9","C:\\dev\\coding-academy\\sprint4\\src\\services\\async-storage.service.js":"10","C:\\dev\\coding-academy\\sprint4\\src\\services\\util.service.js":"11","C:\\dev\\coding-academy\\sprint4\\src\\services\\user.service.js":"12","C:\\dev\\coding-academy\\sprint4\\src\\services\\review.service.js":"13","C:\\dev\\coding-academy\\sprint4\\src\\store\\store.js":"14","C:\\dev\\coding-academy\\sprint4\\src\\services\\socket.service.js":"15","C:\\dev\\coding-academy\\sprint4\\src\\store\\user.reducer.js":"16","C:\\dev\\coding-academy\\sprint4\\src\\store\\review.reducer.js":"17","C:\\dev\\coding-academy\\sprint4\\src\\store\\system.reducer.js":"18","C:\\dev\\coding-academy\\sprint4\\src\\store\\stay.reducer.js":"19","C:\\dev\\coding-academy\\sprint4\\src\\services\\stay.service.js":"20","C:\\dev\\coding-academy\\sprint4\\src\\store\\stay.actions.js":"21"},{"size":806,"mtime":1663175154259,"results":"22","hashOfConfig":"23"},{"size":5141,"mtime":1663162203290,"results":"24","hashOfConfig":"23"},{"size":251,"mtime":1663162203333,"results":"25","hashOfConfig":"23"},{"size":714,"mtime":1663162203315,"results":"26","hashOfConfig":"23"},{"size":557,"mtime":1663176778567,"results":"27","hashOfConfig":"23"},{"size":691,"mtime":1663222818860,"results":"28","hashOfConfig":"23"},{"size":772,"mtime":1663235207481,"results":"29","hashOfConfig":"23"},{"size":1282,"mtime":1641996193000,"results":"30","hashOfConfig":"23"},{"size":1572,"mtime":1663222286981,"results":"31","hashOfConfig":"23"},{"size":2156,"mtime":1642344260000,"results":"32","hashOfConfig":"23"},{"size":1294,"mtime":1641996193000,"results":"33","hashOfConfig":"23"},{"size":3281,"mtime":1663226096223,"results":"34","hashOfConfig":"23"},{"size":1925,"mtime":1663227042285,"results":"35","hashOfConfig":"23"},{"size":1031,"mtime":1663223679918,"results":"36","hashOfConfig":"23"},{"size":3181,"mtime":1663221899380,"results":"37","hashOfConfig":"23"},{"size":1440,"mtime":1641996193000,"results":"38","hashOfConfig":"23"},{"size":669,"mtime":1641996193000,"results":"39","hashOfConfig":"23"},{"size":322,"mtime":1641996193000,"results":"40","hashOfConfig":"23"},{"size":1737,"mtime":1663225968050,"results":"41","hashOfConfig":"23"},{"size":2702,"mtime":1663235141558,"results":"42","hashOfConfig":"23"},{"size":4035,"mtime":1663229870798,"results":"43","hashOfConfig":"23"},{"filePath":"44","messages":"45","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},"1timrjz",{"filePath":"47","messages":"48","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"49"},{"filePath":"50","messages":"51","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"52","messages":"53","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"54","messages":"55","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"56","messages":"57","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"58","messages":"59","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"60","messages":"61","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"62","messages":"63","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"64","usedDeprecatedRules":"46"},{"filePath":"65","messages":"66","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"67","messages":"68","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"69","messages":"70","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"71","usedDeprecatedRules":"46"},{"filePath":"72","messages":"73","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"74","usedDeprecatedRules":"46"},{"filePath":"75","messages":"76","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"77"},{"filePath":"78","messages":"79","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"80"},{"filePath":"81","messages":"82","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"77"},{"filePath":"83","messages":"84","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"77"},{"filePath":"85","messages":"86","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"77"},{"filePath":"87","messages":"88","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"89","messages":"90","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"91","messages":"92","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},"C:\\dev\\coding-academy\\sprint4\\src\\index.js",[],["93","94"],"C:\\dev\\coding-academy\\sprint4\\src\\serviceWorkerRegistration.js",[],["95","96"],"C:\\dev\\coding-academy\\sprint4\\src\\redux\\store.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\redux\\Slice.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\root-cmp.jsx",[],"C:\\dev\\coding-academy\\sprint4\\src\\routes.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\pages\\bnb-app.jsx",["97","98","99"],"C:\\dev\\coding-academy\\sprint4\\src\\services\\event-bus.service.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\store\\review.actions.js",["100","101"],"import { showSuccessMsg } from '../services/event-bus.service'\r\nimport { reviewService } from '../services/review.service'\r\nimport { userService } from '../services/user.service'\r\n\r\n// Action Creators\r\nexport function getActionRemoveReview(reviewId) {\r\n  return { type: 'REMOVE_REVIEW', reviewId }\r\n}\r\nexport function getActionAddReview(review) {\r\n  return { type: 'ADD_REVIEW', review }\r\n}\r\nexport function getActionSetWatchedUser(user) {\r\n  return { type: 'SET_WATCHED_USER', user }\r\n}\r\n\r\nexport function loadReviews() {\r\n  return async dispatch => {\r\n    try {\r\n      const reviews = await reviewService.query()\r\n      dispatch({ type: 'SET_REVIEWS', reviews })\r\n\r\n    } catch (err) {\r\n      console.log('ReviewActions: err in loadReviews', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function addReview(review) {\r\n  return async dispatch => {\r\n    try {\r\n      const addedReview = await reviewService.add(review)\r\n      dispatch(getActionAddReview(addedReview))\r\n\r\n      // Change the score in user kept in sessionStorage\r\n      // userService.saveLocalUser(addedReview.byUser)\r\n      // const { score } = addedReview.byUser\r\n      // dispatch({ type: 'SET_SCORE', score })\r\n\r\n    } catch (err) {\r\n      console.log('ReviewActions: err in addReview', err)\r\n      throw err\r\n    }\r\n  }\r\n}\r\n\r\nexport function removeReview(reviewId) {\r\n  return async dispatch => {\r\n    try {\r\n      await reviewService.remove(reviewId)\r\n      dispatch(getActionRemoveReview(reviewId))\r\n    } catch (err) {\r\n      console.log('ReviewActions: err in removeReview', err)\r\n      throw err\r\n    }\r\n  }\r\n}\r\n","C:\\dev\\coding-academy\\sprint4\\src\\services\\async-storage.service.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\services\\util.service.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\services\\user.service.js",["102","103"],"import { storageService } from './async-storage.service'\r\n// import { httpService } from './http.service'\r\nimport { getActionSetWatchedUser } from '../store/review.actions'\r\n// import { socketService, SOCKET_EVENT_USER_UPDATED, SOCKET_EMIT_USER_WATCH } from './socket.service'\r\nimport { showSuccessMsg } from '../services/event-bus.service'\r\n\r\nconst STORAGE_KEY_LOGGEDIN_USER = 'loggedinUser'\r\n\r\nexport const userService = {\r\n    login,\r\n    logout,\r\n    signup,\r\n    getLoggedinUser,\r\n    saveLocalUser,\r\n    getUsers,\r\n    getById,\r\n    remove,\r\n    update,\r\n    changeScore\r\n}\r\n\r\nwindow.userService = userService\r\n\r\n\r\nfunction getUsers() {\r\n    return storageService.query('user')\r\n    // return httpService.get(`user`)\r\n}\r\n\r\nfunction onUserUpdate(user) {\r\n    showSuccessMsg(`This user ${user.fullname} just got updated from socket, new score: ${user.score}`)\r\n}\r\n\r\nasync function getById(userId) {\r\n    const user = await storageService.get('user', userId)\r\n    // const user = await httpService.get(`user/${userId}`)\r\n\r\n    // socketService.emit(SOCKET_EMIT_USER_WATCH, userId)\r\n    // socketService.off(SOCKET_EVENT_USER_UPDATED, onUserUpdate)\r\n    // socketService.on(SOCKET_EVENT_USER_UPDATED, onUserUpdate)\r\n\r\n    return user\r\n}\r\nfunction remove(userId) {\r\n    return storageService.remove('user', userId)\r\n    // return httpService.delete(`user/${userId}`)\r\n}\r\n\r\nasync function update(user) {\r\n    await storageService.put('user', user)\r\n    // user = await httpService.put(`user/${user._id}`, user)\r\n    // Handle case in which admin updates other user's details\r\n    if (getLoggedinUser()._id === user._id) saveLocalUser(user)\r\n    return user;\r\n}\r\n\r\nasync function login(userCred) {\r\n    const users = await storageService.query('user')\r\n    const user = users.find(user => user.username === userCred.username)\r\n    // const user = await httpService.post('auth/login', userCred)\r\n    if (user) {\r\n        // socketService.login(user._id)\r\n        return saveLocalUser(user)\r\n    }\r\n}\r\nasync function signup(userCred) {\r\n    userCred.score = 10000;\r\n    const user = await storageService.post('user', userCred)\r\n    // const user = await httpService.post('auth/signup', userCred)\r\n    // socketService.login(user._id)\r\n    return saveLocalUser(user)\r\n}\r\nasync function logout() {\r\n    sessionStorage.removeItem(STORAGE_KEY_LOGGEDIN_USER)\r\n    // socketService.logout()\r\n    // return await httpService.post('auth/logout')\r\n}\r\n\r\nasync function changeScore(by) {\r\n    const user = getLoggedinUser()\r\n    if (!user) throw new Error('Not loggedin')\r\n    user.score = user.score + by || by\r\n    await update(user)\r\n    return user.score\r\n}\r\n\r\n\r\nfunction saveLocalUser(user) {\r\n    sessionStorage.setItem(STORAGE_KEY_LOGGEDIN_USER, JSON.stringify(user))\r\n    return user\r\n}\r\n\r\nfunction getLoggedinUser() {\r\n    return JSON.parse(sessionStorage.getItem(STORAGE_KEY_LOGGEDIN_USER))\r\n}\r\n\r\n\r\n// ;(async ()=>{\r\n//     await userService.signup({fullname: 'Puki Norma', username: 'user1', password:'123',score: 10000, isAdmin: false})\r\n//     await userService.signup({fullname: 'Master Adminov', username: 'admin', password:'123', score: 10000, isAdmin: true})\r\n//     await userService.signup({fullname: 'Muki G', username: 'muki', password:'123', score: 10000})\r\n// })()\r\n\r\n\r\n\r\n","C:\\dev\\coding-academy\\sprint4\\src\\services\\review.service.js",["104"],"// import { httpService } from './http.service'\r\nimport { storageService } from './async-storage.service'\r\n// import { socketService, SOCKET_EVENT_REVIEW_ADDED, SOCKET_EVENT_REVIEW_ABOUT_YOU } from './socket.service'\r\nimport { getActionRemoveReview, getActionAddReview } from '../store/review.actions'\r\n\r\nconst reviewChannel = new BroadcastChannel('reviewChannel')\r\n\r\n// ;(() => {\r\n//   reviewChannel.addEventListener('message', (ev) => {\r\n//     store.dispatch(ev.data)\r\n//   })\r\n//   socketService.on(SOCKET_EVENT_REVIEW_ADDED, (review) => {\r\n//     console.log('GOT from socket', review)\r\n//     store.dispatch(getActionAddReview(review))\r\n//   })\r\n//   socketService.on(SOCKET_EVENT_REVIEW_ABOUT_YOU, (review) => {\r\n//     showSuccessMsg(`New review about me ${review.txt}`)\r\n//   })\r\n// })()\r\n\r\n\r\n\r\nexport const reviewService = {\r\n  add,\r\n  query,\r\n  remove\r\n}\r\n\r\n\r\nfunction query(filterBy) {\r\n  var queryStr = (!filterBy) ? '' : `?name=${filterBy.name}&sort=anaAref`\r\n  // return httpService.get(`review${queryStr}`)\r\n  return storageService.query('review')\r\n}\r\n\r\nasync function remove(reviewId) {\r\n  // await httpService.delete(`review/${reviewId}`)\r\n  await storageService.remove('review', reviewId)\r\n  reviewChannel.postMessage(getActionRemoveReview(reviewId))\r\n\r\n\r\n}\r\nasync function add(review) {\r\n  // const addedReview = await httpService.post(`review`, review)\r\n\r\n  // review.byUser = userService.getLoggedinUser()\r\n  // review.aboutUser = await userService.getById(review.aboutUserId)\r\n  const addedReview = await storageService.post('review', review)\r\n\r\n  reviewChannel.postMessage(getActionAddReview(addedReview))\r\n\r\n  return addedReview\r\n}\r\n\r\n// This way, we can also subscribe to none-store data change\r\n// function subscribe(listener) {\r\n//   reviewChannel.addEventListener('message', listener)\r\n// }\r\n// function unsubscribe(listener) {\r\n//   reviewChannel.removeEventListener('message', listener)\r\n// }\r\n","C:\\dev\\coding-academy\\sprint4\\src\\store\\store.js",[],["105","106"],"C:\\dev\\coding-academy\\sprint4\\src\\services\\socket.service.js",[],["107","108"],"C:\\dev\\coding-academy\\sprint4\\src\\store\\user.reducer.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\store\\review.reducer.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\store\\system.reducer.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\store\\stay.reducer.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\services\\stay.service.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\store\\stay.actions.js",[],{"ruleId":"109","replacedBy":"110"},{"ruleId":"111","replacedBy":"112"},{"ruleId":"109","replacedBy":"113"},{"ruleId":"111","replacedBy":"114"},{"ruleId":"115","severity":1,"message":"116","line":1,"column":21,"nodeType":"117","messageId":"118","endLine":1,"endColumn":29},{"ruleId":"115","severity":1,"message":"119","line":2,"column":10,"nodeType":"117","messageId":"118","endLine":2,"endColumn":17},{"ruleId":"120","severity":1,"message":"121","line":15,"column":8,"nodeType":"122","endLine":15,"endColumn":10,"suggestions":"123"},{"ruleId":"115","severity":1,"message":"124","line":1,"column":10,"nodeType":"117","messageId":"118","endLine":1,"endColumn":24},{"ruleId":"115","severity":1,"message":"125","line":3,"column":10,"nodeType":"117","messageId":"118","endLine":3,"endColumn":21},{"ruleId":"115","severity":1,"message":"126","line":3,"column":10,"nodeType":"117","messageId":"118","endLine":3,"endColumn":33},{"ruleId":"115","severity":1,"message":"127","line":30,"column":10,"nodeType":"117","messageId":"118","endLine":30,"endColumn":22},{"ruleId":"115","severity":1,"message":"128","line":31,"column":7,"nodeType":"117","messageId":"118","endLine":31,"endColumn":15},{"ruleId":"109","replacedBy":"129"},{"ruleId":"111","replacedBy":"130"},{"ruleId":"109","replacedBy":"131"},{"ruleId":"111","replacedBy":"132"},"no-native-reassign",["133"],"no-negated-in-lhs",["134"],["133"],["134"],"no-unused-vars","'useState' is defined but never used.","Identifier","unusedVar","'connect' is defined but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'dispatch'. Either include it or remove the dependency array.","ArrayExpression",["135"],"'showSuccessMsg' is defined but never used.","'userService' is defined but never used.","'getActionSetWatchedUser' is defined but never used.","'onUserUpdate' is defined but never used.","'queryStr' is assigned a value but never used.",["133"],["134"],["133"],["134"],"no-global-assign","no-unsafe-negation",{"desc":"136","fix":"137"},"Update the dependencies array to be: [dispatch]",{"range":"138","text":"139"},[511,513],"[dispatch]"]