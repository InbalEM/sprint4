[{"C:\\dev\\coding-academy\\sprint4\\src\\index.js":"1","C:\\dev\\coding-academy\\sprint4\\src\\serviceWorkerRegistration.js":"2","C:\\dev\\coding-academy\\sprint4\\src\\redux\\store.js":"3","C:\\dev\\coding-academy\\sprint4\\src\\redux\\Slice.js":"4","C:\\dev\\coding-academy\\sprint4\\src\\root-cmp.jsx":"5","C:\\dev\\coding-academy\\sprint4\\src\\routes.js":"6","C:\\dev\\coding-academy\\sprint4\\src\\pages\\bnb-app.jsx":"7","C:\\dev\\coding-academy\\sprint4\\src\\services\\event-bus.service.js":"8","C:\\dev\\coding-academy\\sprint4\\src\\store\\review.actions.js":"9","C:\\dev\\coding-academy\\sprint4\\src\\services\\async-storage.service.js":"10","C:\\dev\\coding-academy\\sprint4\\src\\services\\util.service.js":"11","C:\\dev\\coding-academy\\sprint4\\src\\services\\user.service.js":"12","C:\\dev\\coding-academy\\sprint4\\src\\services\\review.service.js":"13","C:\\dev\\coding-academy\\sprint4\\src\\store\\store.js":"14","C:\\dev\\coding-academy\\sprint4\\src\\services\\socket.service.js":"15","C:\\dev\\coding-academy\\sprint4\\src\\store\\user.reducer.js":"16","C:\\dev\\coding-academy\\sprint4\\src\\store\\review.reducer.js":"17","C:\\dev\\coding-academy\\sprint4\\src\\store\\system.reducer.js":"18","C:\\dev\\coding-academy\\sprint4\\src\\store\\stay.reducer.js":"19","C:\\dev\\coding-academy\\sprint4\\src\\services\\stay.service.js":"20","C:\\dev\\coding-academy\\sprint4\\src\\store\\stay.actions.js":"21","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\stay-list.jsx":"22","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\stay-preview.jsx":"23","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\app-footer.jsx":"24","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\stay-filter.jsx":"25","C:\\dev\\coding-academy\\sprint4\\src\\hooks\\useFormRegister.js":"26","C:\\dev\\coding-academy\\sprint4\\src\\hooks\\useEffectUpdate.js":"27","C:\\dev\\coding-academy\\sprint4\\src\\pages\\add-edit-stay.jsx":"28"},{"size":815,"mtime":1663261198080,"results":"29","hashOfConfig":"30"},{"size":5141,"mtime":1663162203290,"results":"31","hashOfConfig":"30"},{"size":251,"mtime":1663162203333,"results":"32","hashOfConfig":"30"},{"size":714,"mtime":1663162203315,"results":"33","hashOfConfig":"30"},{"size":599,"mtime":1663251193893,"results":"34","hashOfConfig":"30"},{"size":838,"mtime":1663262601106,"results":"35","hashOfConfig":"30"},{"size":1029,"mtime":1663257915924,"results":"36","hashOfConfig":"30"},{"size":1282,"mtime":1641996193000,"results":"37","hashOfConfig":"30"},{"size":1572,"mtime":1663222286981,"results":"38","hashOfConfig":"30"},{"size":2156,"mtime":1642344260000,"results":"39","hashOfConfig":"30"},{"size":1294,"mtime":1641996193000,"results":"40","hashOfConfig":"30"},{"size":3281,"mtime":1663226096223,"results":"41","hashOfConfig":"30"},{"size":1925,"mtime":1663227042285,"results":"42","hashOfConfig":"30"},{"size":1035,"mtime":1663244457199,"results":"43","hashOfConfig":"30"},{"size":3181,"mtime":1663221899380,"results":"44","hashOfConfig":"30"},{"size":1440,"mtime":1641996193000,"results":"45","hashOfConfig":"30"},{"size":669,"mtime":1641996193000,"results":"46","hashOfConfig":"30"},{"size":322,"mtime":1641996193000,"results":"47","hashOfConfig":"30"},{"size":1719,"mtime":1663258459252,"results":"48","hashOfConfig":"30"},{"size":4393,"mtime":1663264603508,"results":"49","hashOfConfig":"30"},{"size":4202,"mtime":1663265001907,"results":"50","hashOfConfig":"30"},{"size":324,"mtime":1663251726235,"results":"51","hashOfConfig":"30"},{"size":514,"mtime":1663259408553,"results":"52","hashOfConfig":"30"},{"size":428,"mtime":1663253652232,"results":"53","hashOfConfig":"30"},{"size":889,"mtime":1663260943235,"results":"54","hashOfConfig":"30"},{"size":2354,"mtime":1663254602934,"results":"55","hashOfConfig":"30"},{"size":314,"mtime":1662470192432,"results":"56","hashOfConfig":"30"},{"size":1948,"mtime":1663265418731,"results":"57","hashOfConfig":"30"},{"filePath":"58","messages":"59","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},"1timrjz",{"filePath":"61","messages":"62","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},{"filePath":"64","messages":"65","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"66"},{"filePath":"67","messages":"68","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"66"},{"filePath":"69","messages":"70","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"71","messages":"72","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"73","messages":"74","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"75","usedDeprecatedRules":"60"},{"filePath":"76","messages":"77","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"78","messages":"79","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"80","usedDeprecatedRules":"60"},{"filePath":"81","messages":"82","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"83","messages":"84","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"85","messages":"86","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"87","usedDeprecatedRules":"60"},{"filePath":"88","messages":"89","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"90","usedDeprecatedRules":"60"},{"filePath":"91","messages":"92","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"93","messages":"94","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"95"},{"filePath":"96","messages":"97","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"98","messages":"99","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"100","messages":"101","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"102"},{"filePath":"103","messages":"104","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"105","usedDeprecatedRules":"60"},{"filePath":"106","messages":"107","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"108","usedDeprecatedRules":"60"},{"filePath":"109","messages":"110","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"111","messages":"112","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"113","messages":"114","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"115","messages":"116","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"117","messages":"118","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"119","messages":"120","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"121","usedDeprecatedRules":"60"},{"filePath":"122","messages":"123","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"124","usedDeprecatedRules":"60"},{"filePath":"125","messages":"126","errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"127"},"C:\\dev\\coding-academy\\sprint4\\src\\index.js",[],["128","129"],"C:\\dev\\coding-academy\\sprint4\\src\\serviceWorkerRegistration.js",[],["130","131"],"C:\\dev\\coding-academy\\sprint4\\src\\redux\\store.js",[],["132","133"],"C:\\dev\\coding-academy\\sprint4\\src\\redux\\Slice.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\root-cmp.jsx",[],"C:\\dev\\coding-academy\\sprint4\\src\\routes.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\pages\\bnb-app.jsx",["134","135"],"import React, { useEffect, useState } from 'react'\r\n// import { connect } from 'react-redux'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\n\r\nimport { loadStays, setFilterBy } from '../store/stay.actions'\r\nimport { StayList } from '../cmps/stay-list'\r\nimport { StayFilter } from '../cmps/stay-filter'\r\n// import { stayService } from '../services/stay.service'\r\n// import {eventBusService } from '../services/event-bus.service'\r\n\r\nexport const BnbApp = () => {\r\n    const { stays } = useSelector(state => state.stayModule)\r\n    const dispatch = useDispatch()\r\n\r\n    useEffect(() => {\r\n        dispatch(loadStays())\r\n    }, [])\r\n\r\n    const onChangeFilter = (filterBy)=>{\r\n        dispatch(setFilterBy(filterBy))\r\n        dispatch(loadStays())\r\n    }\r\n\r\n    // console.log('stays app:', stays)\r\n    if (!stays) return <div>Loading...</div>\r\n    return (\r\n        <section className='bnbApp'>\r\n            <StayFilter onChangeFilter= {onChangeFilter}/>\r\n            <StayList stays={stays} />\r\n        </section>\r\n    )\r\n}","C:\\dev\\coding-academy\\sprint4\\src\\services\\event-bus.service.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\store\\review.actions.js",["136","137"],"import { showSuccessMsg } from '../services/event-bus.service'\r\nimport { reviewService } from '../services/review.service'\r\nimport { userService } from '../services/user.service'\r\n\r\n// Action Creators\r\nexport function getActionRemoveReview(reviewId) {\r\n  return { type: 'REMOVE_REVIEW', reviewId }\r\n}\r\nexport function getActionAddReview(review) {\r\n  return { type: 'ADD_REVIEW', review }\r\n}\r\nexport function getActionSetWatchedUser(user) {\r\n  return { type: 'SET_WATCHED_USER', user }\r\n}\r\n\r\nexport function loadReviews() {\r\n  return async dispatch => {\r\n    try {\r\n      const reviews = await reviewService.query()\r\n      dispatch({ type: 'SET_REVIEWS', reviews })\r\n\r\n    } catch (err) {\r\n      console.log('ReviewActions: err in loadReviews', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function addReview(review) {\r\n  return async dispatch => {\r\n    try {\r\n      const addedReview = await reviewService.add(review)\r\n      dispatch(getActionAddReview(addedReview))\r\n\r\n      // Change the score in user kept in sessionStorage\r\n      // userService.saveLocalUser(addedReview.byUser)\r\n      // const { score } = addedReview.byUser\r\n      // dispatch({ type: 'SET_SCORE', score })\r\n\r\n    } catch (err) {\r\n      console.log('ReviewActions: err in addReview', err)\r\n      throw err\r\n    }\r\n  }\r\n}\r\n\r\nexport function removeReview(reviewId) {\r\n  return async dispatch => {\r\n    try {\r\n      await reviewService.remove(reviewId)\r\n      dispatch(getActionRemoveReview(reviewId))\r\n    } catch (err) {\r\n      console.log('ReviewActions: err in removeReview', err)\r\n      throw err\r\n    }\r\n  }\r\n}\r\n","C:\\dev\\coding-academy\\sprint4\\src\\services\\async-storage.service.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\services\\util.service.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\services\\user.service.js",["138","139"],"import { storageService } from './async-storage.service'\r\n// import { httpService } from './http.service'\r\nimport { getActionSetWatchedUser } from '../store/review.actions'\r\n// import { socketService, SOCKET_EVENT_USER_UPDATED, SOCKET_EMIT_USER_WATCH } from './socket.service'\r\nimport { showSuccessMsg } from '../services/event-bus.service'\r\n\r\nconst STORAGE_KEY_LOGGEDIN_USER = 'loggedinUser'\r\n\r\nexport const userService = {\r\n    login,\r\n    logout,\r\n    signup,\r\n    getLoggedinUser,\r\n    saveLocalUser,\r\n    getUsers,\r\n    getById,\r\n    remove,\r\n    update,\r\n    changeScore\r\n}\r\n\r\nwindow.userService = userService\r\n\r\n\r\nfunction getUsers() {\r\n    return storageService.query('user')\r\n    // return httpService.get(`user`)\r\n}\r\n\r\nfunction onUserUpdate(user) {\r\n    showSuccessMsg(`This user ${user.fullname} just got updated from socket, new score: ${user.score}`)\r\n}\r\n\r\nasync function getById(userId) {\r\n    const user = await storageService.get('user', userId)\r\n    // const user = await httpService.get(`user/${userId}`)\r\n\r\n    // socketService.emit(SOCKET_EMIT_USER_WATCH, userId)\r\n    // socketService.off(SOCKET_EVENT_USER_UPDATED, onUserUpdate)\r\n    // socketService.on(SOCKET_EVENT_USER_UPDATED, onUserUpdate)\r\n\r\n    return user\r\n}\r\nfunction remove(userId) {\r\n    return storageService.remove('user', userId)\r\n    // return httpService.delete(`user/${userId}`)\r\n}\r\n\r\nasync function update(user) {\r\n    await storageService.put('user', user)\r\n    // user = await httpService.put(`user/${user._id}`, user)\r\n    // Handle case in which admin updates other user's details\r\n    if (getLoggedinUser()._id === user._id) saveLocalUser(user)\r\n    return user;\r\n}\r\n\r\nasync function login(userCred) {\r\n    const users = await storageService.query('user')\r\n    const user = users.find(user => user.username === userCred.username)\r\n    // const user = await httpService.post('auth/login', userCred)\r\n    if (user) {\r\n        // socketService.login(user._id)\r\n        return saveLocalUser(user)\r\n    }\r\n}\r\nasync function signup(userCred) {\r\n    userCred.score = 10000;\r\n    const user = await storageService.post('user', userCred)\r\n    // const user = await httpService.post('auth/signup', userCred)\r\n    // socketService.login(user._id)\r\n    return saveLocalUser(user)\r\n}\r\nasync function logout() {\r\n    sessionStorage.removeItem(STORAGE_KEY_LOGGEDIN_USER)\r\n    // socketService.logout()\r\n    // return await httpService.post('auth/logout')\r\n}\r\n\r\nasync function changeScore(by) {\r\n    const user = getLoggedinUser()\r\n    if (!user) throw new Error('Not loggedin')\r\n    user.score = user.score + by || by\r\n    await update(user)\r\n    return user.score\r\n}\r\n\r\n\r\nfunction saveLocalUser(user) {\r\n    sessionStorage.setItem(STORAGE_KEY_LOGGEDIN_USER, JSON.stringify(user))\r\n    return user\r\n}\r\n\r\nfunction getLoggedinUser() {\r\n    return JSON.parse(sessionStorage.getItem(STORAGE_KEY_LOGGEDIN_USER))\r\n}\r\n\r\n\r\n// ;(async ()=>{\r\n//     await userService.signup({fullname: 'Puki Norma', username: 'user1', password:'123',score: 10000, isAdmin: false})\r\n//     await userService.signup({fullname: 'Master Adminov', username: 'admin', password:'123', score: 10000, isAdmin: true})\r\n//     await userService.signup({fullname: 'Muki G', username: 'muki', password:'123', score: 10000})\r\n// })()\r\n\r\n\r\n\r\n","C:\\dev\\coding-academy\\sprint4\\src\\services\\review.service.js",["140"],"// import { httpService } from './http.service'\r\nimport { storageService } from './async-storage.service'\r\n// import { socketService, SOCKET_EVENT_REVIEW_ADDED, SOCKET_EVENT_REVIEW_ABOUT_YOU } from './socket.service'\r\nimport { getActionRemoveReview, getActionAddReview } from '../store/review.actions'\r\n\r\nconst reviewChannel = new BroadcastChannel('reviewChannel')\r\n\r\n// ;(() => {\r\n//   reviewChannel.addEventListener('message', (ev) => {\r\n//     store.dispatch(ev.data)\r\n//   })\r\n//   socketService.on(SOCKET_EVENT_REVIEW_ADDED, (review) => {\r\n//     console.log('GOT from socket', review)\r\n//     store.dispatch(getActionAddReview(review))\r\n//   })\r\n//   socketService.on(SOCKET_EVENT_REVIEW_ABOUT_YOU, (review) => {\r\n//     showSuccessMsg(`New review about me ${review.txt}`)\r\n//   })\r\n// })()\r\n\r\n\r\n\r\nexport const reviewService = {\r\n  add,\r\n  query,\r\n  remove\r\n}\r\n\r\n\r\nfunction query(filterBy) {\r\n  var queryStr = (!filterBy) ? '' : `?name=${filterBy.name}&sort=anaAref`\r\n  // return httpService.get(`review${queryStr}`)\r\n  return storageService.query('review')\r\n}\r\n\r\nasync function remove(reviewId) {\r\n  // await httpService.delete(`review/${reviewId}`)\r\n  await storageService.remove('review', reviewId)\r\n  reviewChannel.postMessage(getActionRemoveReview(reviewId))\r\n\r\n\r\n}\r\nasync function add(review) {\r\n  // const addedReview = await httpService.post(`review`, review)\r\n\r\n  // review.byUser = userService.getLoggedinUser()\r\n  // review.aboutUser = await userService.getById(review.aboutUserId)\r\n  const addedReview = await storageService.post('review', review)\r\n\r\n  reviewChannel.postMessage(getActionAddReview(addedReview))\r\n\r\n  return addedReview\r\n}\r\n\r\n// This way, we can also subscribe to none-store data change\r\n// function subscribe(listener) {\r\n//   reviewChannel.addEventListener('message', listener)\r\n// }\r\n// function unsubscribe(listener) {\r\n//   reviewChannel.removeEventListener('message', listener)\r\n// }\r\n","C:\\dev\\coding-academy\\sprint4\\src\\store\\store.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\services\\socket.service.js",[],["141","142"],"C:\\dev\\coding-academy\\sprint4\\src\\store\\user.reducer.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\store\\review.reducer.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\store\\system.reducer.js",[],["143","144"],"C:\\dev\\coding-academy\\sprint4\\src\\store\\stay.reducer.js",["145","146"],"const initialState = {\r\n    stays: [],\r\n    filterBy: null\r\n}\r\nexport function stayReducer(state = initialState, action) {\r\n    var newState = state\r\n    var stays\r\n    var stay\r\n    switch (action.type) {\r\n        case 'SET_STAYS':\r\n            return { ...state, stays: action.stays }\r\n\r\n        case 'REMOVE_STAY':\r\n            const lastRemovedStay = state.stays.find(stay => stay._id === action.stayId)\r\n            stays = state.stays.filter(stay => stay._id !== action.stayId)\r\n            return { ...state, stays, lastRemovedStay }\r\n\r\n        case 'ADD_STAY':\r\n            return { ...state, stays: [...state.stays, action.stay] }\r\n\r\n        case 'UPDATE_STAY':\r\n            stays = state.stays.map(stay => (stay._id === action.stay._id) ? action.stay : stay)\r\n            return { ...state, stays }\r\n\r\n        case 'ADD_TO_CART':\r\n            return { ...state, stay: [...state.stay, action.stay] }\r\n\r\n        case 'REMOVE_FROM_CART':\r\n            stay = state.stay.filter(stay => stay._id !== action.stayId)\r\n            return { ...state, stay }\r\n\r\n        // case 'CLEAR_CART':\r\n        //     return  { ...state, stay: []}\r\n        //     \r\n        case 'StayUNDO_REMOVE_CART':\r\n            if (state.lastRemovedStay) {\r\n                return { ...state, stays: [...state.stays, state.lastRemovedStay], lastRemovedStay: null }\r\n            }\r\n\r\n        case 'SET_FILTER_BY':\r\n            return { ...state, filterBy: { ...action.filterBy } }\r\n        default:\r\n            return state;\r\n    }\r\n    // For debug:\r\n    // window.stayState = newState\r\n    // console.log('Prev State:', state)\r\n    // console.log('Action:', action)\r\n    // console.log('New State:', newState)\r\n    // return newState\r\n\r\n}\r\n","C:\\dev\\coding-academy\\sprint4\\src\\services\\stay.service.js",["147","148"],"\r\nimport { storageService } from './async-storage.service.js'\r\nimport { utilService } from './util.service.js'\r\nimport { userService } from './user.service.js'\r\n\r\n// This file demonstrates how to use a BroadcastChannel to notify other browser tabs \r\n\r\nconst STORAGE_KEY = 'stay'\r\n\r\nexport const stayService = {\r\n    query,\r\n    getById,\r\n    save,\r\n    remove\r\n}\r\nwindow.cs = stayService\r\n\r\nfunction query(filterBy) {\r\n    return storageService.query(STORAGE_KEY).then(stays => {\r\n        if (filterBy) {\r\n            let { maxPrice, minPrice } = filterBy\r\n            if (!maxPrice) maxPrice = Infinity\r\n            if (!minPrice) minPrice = 0\r\n            stays = stays.filter(stay => stay.price <= maxPrice && stay.price >= minPrice)\r\n            return stays\r\n        }\r\n        return stays\r\n    }\r\n    )\r\n}\r\n\r\nfunction getById(stayId) {\r\n    return storageService.get(STORAGE_KEY, stayId)\r\n    // return axios.get(`/api/stay/${stayId}`)\r\n}\r\nasync function remove(stayId) {\r\n    await storageService.remove(STORAGE_KEY, stayId)\r\n}\r\nasync function save(stay) {\r\n    var savedStay\r\n    if (stay._id) {\r\n        savedStay = await storageService.put(STORAGE_KEY, stay)\r\n\r\n    } else {\r\n        // Later, owner is set by the backend\r\n        let newStay = _getEmptyStay()\r\n        newStay.name = stay.name\r\n        newStay.price =stay.price\r\n        console.log('newStay:', newStay)\r\n        savedStay = await storageService.post(STORAGE_KEY, newStay)\r\n    }\r\n    return savedStay\r\n}\r\n\r\nfunction _getEmptyStay(){\r\n    return     {\r\n        \"type\": \"House\",\r\n        \"imgUrls\": [\"https://a0.muscache.com/im/pictures/e83e702f-ef49-40fb-8fa0-6512d7e26e9b.jpg?aki_policy=large\", \"otherImg.jpg\"],\r\n        \"summary\": \"Fantastic duplex apartment with three bedrooms, located in the historic area of Porto, Ribeira (Cube)...\",\r\n        \"capacity\": 8,\r\n        \"amenities\": [\r\n          \"TV\",\r\n          \"Wifi\",\r\n          \"Kitchen\",\r\n          \"Smoking allowed\",\r\n          \"Pets allowed\",\r\n          \"Cooking basics\"\r\n        ],\r\n        \"host\": {\r\n          \"_id\": \"u101\",\r\n          \"fullname\": \"Davit Pok\",\r\n          \"imgUrl\": \"https://a0.muscache.com/im/pictures/fab79f25-2e10-4f0f-9711-663cb69dc7d8.jpg?aki_policy=profile_small\",\r\n        },\r\n        \"loc\": {\r\n          \"country\": \"Portugal\",\r\n          \"countryCode\": \"PT\",\r\n          \"city\": \"Porto\",\r\n          \"address\": \"17 Kombo st\",\r\n          \"lat\": -8.61308,\r\n          \"lng\": 41.1413\r\n        },\r\n        \"reviews\": [\r\n          {\r\n            \"id\": \"madeId\",\r\n            \"txt\": \"Very helpful hosts. Cooked traditional...\",\r\n            \"rate\": 4,\r\n            \"by\": {\r\n              \"_id\": \"u102\",\r\n              \"fullname\": \"user2\",\r\n              \"imgUrl\": \"/img/img2.jpg\"\r\n            }\r\n          }\r\n        ],\r\n        \"likedByUsers\" : ['mini-user'] // for user-wishlist : use $in\r\n      }\r\n\r\n}\r\n\r\n\r\n// TEST DATA\r\n// storageService.post(STORAGE_KEY,     {\r\n//     \"_id\": \"1000654161\",\r\n//     \"name\": \"Ribeira Charming Duplex\",\r\n//     \"type\": \"House\",\r\n//     \"imgUrls\": [\"https://a0.muscache.com/im/pictures/e83e702f-ef49-40fb-8fa0-6512d7e26e9b.jpg?aki_policy=large\", \"otherImg.jpg\"],\r\n//     \"price\": 80.00,\r\n//     \"summary\": \"Fantastic duplex apartment with three bedrooms, located in the historic area of Porto, Ribeira (Cube)...\",\r\n//     \"capacity\": {\"guests\": 8, \"bedroom\": 4, \"bed\": 8, \"bath\": 3  },\r\n//     \"amenities\": [\r\n//       \"TV\",\r\n//       \"Wifi\",\r\n//       \"Kitchen\",\r\n//       \"Smoking allowed\",\r\n//       \"Pets allowed\",\r\n//       \"Cooking basics\"\r\n//     ],\r\n//     \"host\": {\r\n//       \"_id\": \"u101\",\r\n//       \"fullname\": \"Davit Pok\",\r\n//       \"imgUrl\": \"https://a0.muscache.com/im/pictures/fab79f25-2e10-4f0f-9711-663cb69dc7d8.jpg?aki_policy=profile_small\",\r\n//     },\r\n//     \"loc\": {\r\n//       \"country\": \"Portugal\",\r\n//       \"countryCode\": \"PT\",\r\n//       \"city\": \"Porto\",\r\n//       \"address\": \"17 Kombo st\",\r\n//       \"lat\": -8.61308,\r\n//       \"lng\": 41.1413\r\n//     },\r\n//     \"reviews\": [\r\n//       {\r\n//         \"id\": \"madeId\",\r\n//         \"txt\": \"Very helpful hosts. Cooked traditional...\",\r\n//         \"rate\": 4,\r\n//         \"by\": {\r\n//           \"_id\": \"u102\",\r\n//           \"fullname\": \"user2\",\r\n//           \"imgUrl\": \"/img/img2.jpg\"\r\n//         }\r\n//       }\r\n//     ],\r\n//     \"likedByUsers\" : ['mini-user'] // for user-wishlist : use $in\r\n//   }).then(x => console.log(x))\r\n\r\n\r\n\r\n\r\n","C:\\dev\\coding-academy\\sprint4\\src\\store\\stay.actions.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\cmps\\stay-list.jsx",[],"C:\\dev\\coding-academy\\sprint4\\src\\cmps\\stay-preview.jsx",[],"C:\\dev\\coding-academy\\sprint4\\src\\cmps\\app-footer.jsx",[],"C:\\dev\\coding-academy\\sprint4\\src\\cmps\\stay-filter.jsx",[],"C:\\dev\\coding-academy\\sprint4\\src\\hooks\\useFormRegister.js",["149"],"import { useEffect, useState } from \"react\"\nimport { useEffectUpdate } from \"./useEffectUpdate\"\n\nexport const useFormRegister = (initialState, callBack) => {\n\n    const [fields, setFields] = useState(initialState)\n\n    useEffectUpdate(() => {\n        if (callBack) callBack(fields)\n    }, [fields])\n\n    const handleChange = ({ target }) => {\n        const field = target.name\n        let value = target.value\n\n        switch (target.type) {\n            case 'number':\n            case 'range':\n                value = +target.value || ''\n                break;\n            case 'checkbox':\n                value = target.checked\n                break;\n            case 'date':\n                value = new Date(value)\n                break;\n            case 'time':\n                const newDate = new Date()\n                const hours = value.split(':')[0]\n                const minutes = value.split(':')[1]\n                newDate.setHours(hours)\n                newDate.setMinutes(minutes)\n                value = newDate\n                break\n\n\n            default:\n                break\n        }\n        setFields(prevFields => ({ ...prevFields, [field]: value }))\n    }\n\n    const getFormattedDate = (value) => {\n        const valueDate = new Date(value)\n        return `${valueDate.getFullYear()}-${(valueDate.getMonth() + 1 + '').padStart(2, '0')}-${(valueDate.getDate() + '').padStart(2, '0')}`\n    }\n\n    const getFormattedTime = (value) => {\n        const valueTime = new Date(value)\n        return `${(valueTime.getHours() + '').padStart(2, '0')}:${(valueTime.getMinutes() + '').padStart(2, '0')}`\n    }\n\n\n    const register = (field, type = '', value) => { // value only used when type === 'radio'\n        const inputProp = {\n            onChange: handleChange,\n            name: field,\n            id: field,\n            value: fields[field],\n            type\n        }\n        if (type === 'checkbox') inputProp.checked = fields[field]\n        if (type === 'date') inputProp.value = getFormattedDate(fields[field])\n        if (type === 'time') inputProp.value = getFormattedTime(fields[field])\n        if (type === 'radio') {\n            inputProp.value = value\n            inputProp.id = value\n            inputProp.checked = fields[field] === value\n        }\n        return inputProp\n    }\n\n    return [register, setFields, fields]\n\n}","C:\\dev\\coding-academy\\sprint4\\src\\hooks\\useEffectUpdate.js",["150","151"],"import { useEffect, useRef } from \"react\"\n\nexport const useEffectUpdate = (callBack, dependencies) => {\n    \n    const isFirst = useRef(true)\n\n    useEffect(()=>{\n\n        if (isFirst.current) {\n            isFirst.current = false\n            return\n        }\n       \n        callBack()\n    }, dependencies)\n    \n}","C:\\dev\\coding-academy\\sprint4\\src\\pages\\add-edit-stay.jsx",["152","153","154","155","156"],"// import { upload } from '@testing-library/user-event/dist/upload'\r\nimport { useEffect, useState, useRef } from 'react'\r\nimport { useNavigate, useParams } from 'react-router-dom'\r\nimport { useDispatch } from 'react-redux'\r\nimport { useFormRegister } from '../hooks/useFormRegister'\r\nimport { addStay, updateStay } from '../store/stay.actions'\r\n\r\n\r\nexport const StayEdit = () => {\r\n\r\n    const params = useParams()\r\n    const navigate = useNavigate()\r\n    const dispatch = useDispatch()\r\n\r\n\r\n    const [register, setStay, stay] = useFormRegister({\r\n        name: '',\r\n        price: ''\r\n        // img: null\r\n    })\r\n\r\n    const inputRef = useRef()\r\n\r\n    useEffect(() => {\r\n        inputRef.current.focus()\r\n        const stayId = params.stayId\r\n        if (!stayId) return\r\n        // stayService\r\n        //     .getById(stayId)\r\n        //     .then((stay) => {\r\n        //         setStay(stay)\r\n        //     })\r\n        //     .catch((err) => {\r\n        //         console.log('err:', err)\r\n        //     })\r\n    }, [])\r\n\r\n    const onSaveStay = (ev) => {\r\n        ev.preventDefault()\r\n        if (stay._id) {\r\n            try {\r\n                const res = dispatch(updateStay(stay))\r\n                navigate('/')\r\n            } catch (err) {\r\n                console.error('ERROR!', err)\r\n            }\r\n        } else {\r\n            try {\r\n                const res = dispatch(addStay(stay))\r\n                navigate('/')\r\n            } catch (err) {\r\n                console.error('ERROR!', err)\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n    return (\r\n        <form onSubmit={onSaveStay}>\r\n            <h1>{stay._id ? 'Edit' : 'Add'} stay</h1>\r\n\r\n            <label htmlFor=\"name\">name</label>\r\n            <input ref={inputRef} {...register('name', 'text')} />\r\n\r\n            <label htmlFor=\"price\">Price</label>\r\n            <input {...register('price', 'number')} />\r\n            <button>submit</button>\r\n        </form>\r\n    )\r\n}",{"ruleId":"157","replacedBy":"158"},{"ruleId":"159","replacedBy":"160"},{"ruleId":"157","replacedBy":"161"},{"ruleId":"159","replacedBy":"162"},{"ruleId":"157","replacedBy":"163"},{"ruleId":"159","replacedBy":"164"},{"ruleId":"165","severity":1,"message":"166","line":1,"column":28,"nodeType":"167","messageId":"168","endLine":1,"endColumn":36},{"ruleId":"169","severity":1,"message":"170","line":17,"column":8,"nodeType":"171","endLine":17,"endColumn":10,"suggestions":"172"},{"ruleId":"165","severity":1,"message":"173","line":1,"column":10,"nodeType":"167","messageId":"168","endLine":1,"endColumn":24},{"ruleId":"165","severity":1,"message":"174","line":3,"column":10,"nodeType":"167","messageId":"168","endLine":3,"endColumn":21},{"ruleId":"165","severity":1,"message":"175","line":3,"column":10,"nodeType":"167","messageId":"168","endLine":3,"endColumn":33},{"ruleId":"165","severity":1,"message":"176","line":30,"column":10,"nodeType":"167","messageId":"168","endLine":30,"endColumn":22},{"ruleId":"165","severity":1,"message":"177","line":31,"column":7,"nodeType":"167","messageId":"168","endLine":31,"endColumn":15},{"ruleId":"157","replacedBy":"178"},{"ruleId":"159","replacedBy":"179"},{"ruleId":"157","replacedBy":"180"},{"ruleId":"159","replacedBy":"181"},{"ruleId":"165","severity":1,"message":"182","line":6,"column":9,"nodeType":"167","messageId":"168","endLine":6,"endColumn":17},{"ruleId":"183","severity":1,"message":"184","line":40,"column":9,"nodeType":"185","messageId":"186","endLine":41,"endColumn":66},{"ruleId":"165","severity":1,"message":"187","line":3,"column":10,"nodeType":"167","messageId":"168","endLine":3,"endColumn":21},{"ruleId":"165","severity":1,"message":"174","line":4,"column":10,"nodeType":"167","messageId":"168","endLine":4,"endColumn":21},{"ruleId":"165","severity":1,"message":"188","line":1,"column":10,"nodeType":"167","messageId":"168","endLine":1,"endColumn":19},{"ruleId":"169","severity":1,"message":"189","line":15,"column":8,"nodeType":"167","endLine":15,"endColumn":20},{"ruleId":"169","severity":1,"message":"190","line":15,"column":8,"nodeType":"167","endLine":15,"endColumn":20,"suggestions":"191"},{"ruleId":"165","severity":1,"message":"166","line":2,"column":21,"nodeType":"167","messageId":"168","endLine":2,"endColumn":29},{"ruleId":"165","severity":1,"message":"192","line":16,"column":22,"nodeType":"167","messageId":"168","endLine":16,"endColumn":29},{"ruleId":"169","severity":1,"message":"193","line":36,"column":8,"nodeType":"171","endLine":36,"endColumn":10,"suggestions":"194"},{"ruleId":"165","severity":1,"message":"195","line":42,"column":23,"nodeType":"167","messageId":"168","endLine":42,"endColumn":26},{"ruleId":"165","severity":1,"message":"195","line":49,"column":23,"nodeType":"167","messageId":"168","endLine":49,"endColumn":26},"no-native-reassign",["196"],"no-negated-in-lhs",["197"],["196"],["197"],["196"],["197"],"no-unused-vars","'useState' is defined but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'dispatch'. Either include it or remove the dependency array.","ArrayExpression",["198"],"'showSuccessMsg' is defined but never used.","'userService' is defined but never used.","'getActionSetWatchedUser' is defined but never used.","'onUserUpdate' is defined but never used.","'queryStr' is assigned a value but never used.",["196"],["197"],["196"],["197"],"'newState' is assigned a value but never used.","no-fallthrough","Expected a 'break' statement before 'case'.","SwitchCase","case","'utilService' is defined but never used.","'useEffect' is defined but never used.","React Hook useEffect was passed a dependency list that is not an array literal. This means we can't statically verify whether you've passed the correct dependencies.","React Hook useEffect has a missing dependency: 'callBack'. Either include it or remove the dependency array. If 'callBack' changes too often, find the parent component that defines it and wrap that definition in useCallback.",["199"],"'setStay' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'params.stayId'. Either include it or remove the dependency array.",["200"],"'res' is assigned a value but never used.","no-global-assign","no-unsafe-negation",{"desc":"201","fix":"202"},{"desc":"203","fix":"204"},{"desc":"205","fix":"206"},"Update the dependencies array to be: [dispatch]",{"range":"207","text":"208"},"Update the dependencies array to be: [callBack]",{"range":"209","text":"210"},"Update the dependencies array to be: [params.stayId]",{"range":"211","text":"212"},[632,634],"[dispatch]",[294,306],"[callBack]",[1025,1027],"[params.stayId]"]