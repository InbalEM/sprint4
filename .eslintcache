<<<<<<< HEAD
[{"C:\\dev\\coding-academy\\sprint4\\src\\index.js":"1","C:\\dev\\coding-academy\\sprint4\\src\\store\\store.js":"2","C:\\dev\\coding-academy\\sprint4\\src\\root-cmp.jsx":"3","C:\\dev\\coding-academy\\sprint4\\src\\store\\user.reducer.js":"4","C:\\dev\\coding-academy\\sprint4\\src\\store\\stay.reducer.js":"5","C:\\dev\\coding-academy\\sprint4\\src\\store\\order.reducer.js":"6","C:\\dev\\coding-academy\\sprint4\\src\\store\\review.reducer.js":"7","C:\\dev\\coding-academy\\sprint4\\src\\services\\user.service.js":"8","C:\\dev\\coding-academy\\sprint4\\src\\routes.js":"9","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\app-header.jsx":"10","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\app-footer.jsx":"11","C:\\dev\\coding-academy\\sprint4\\src\\services\\event-bus.service.js":"12","C:\\dev\\coding-academy\\sprint4\\src\\store\\review.actions.js":"13","C:\\dev\\coding-academy\\sprint4\\src\\services\\async-storage.service.js":"14","C:\\dev\\coding-academy\\sprint4\\src\\pages\\add-edit-stay.jsx":"15","C:\\dev\\coding-academy\\sprint4\\src\\pages\\stay-details.jsx":"16","C:\\dev\\coding-academy\\sprint4\\src\\pages\\reserve-summary.jsx":"17","C:\\dev\\coding-academy\\sprint4\\src\\services\\review.service.js":"18","C:\\dev\\coding-academy\\sprint4\\src\\services\\stay.service.js":"19","C:\\dev\\coding-academy\\sprint4\\src\\store\\stay.actions.js":"20","C:\\dev\\coding-academy\\sprint4\\src\\hooks\\useFormRegister.js":"21","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\stay-list.jsx":"22","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\stay-filter.jsx":"23","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\stay-review.jsx":"24","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\details-header.jsx":"25","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\calender.jsx":"26","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\reserve.jsx":"27","C:\\dev\\coding-academy\\sprint4\\src\\services\\util.service.js":"28","C:\\dev\\coding-academy\\sprint4\\src\\hooks\\useEffectUpdate.js":"29","C:\\dev\\coding-academy\\sprint4\\src\\store\\order.actions.js":"30","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\expanded-filter.jsx":"31","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\stay-preview.jsx":"32","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\calc-reserve.jsx":"33","C:\\dev\\coding-academy\\sprint4\\src\\services\\order.service.js":"34","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\header-filter.jsx":"35","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\header-profile.jsx":"36","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\header-expanded-filter.jsx":"37","C:\\dev\\coding-academy\\sprint4\\src\\pages\\stay-app.jsx":"38"},{"size":815,"mtime":1663261198080,"results":"39","hashOfConfig":"40"},{"size":1118,"mtime":1663482222225,"results":"41","hashOfConfig":"40"},{"size":1024,"mtime":1663755856138,"results":"42","hashOfConfig":"40"},{"size":1440,"mtime":1641996193000,"results":"43","hashOfConfig":"40"},{"size":1885,"mtime":1663776338177,"results":"44","hashOfConfig":"40"},{"size":275,"mtime":1663515708846,"results":"45","hashOfConfig":"40"},{"size":669,"mtime":1641996193000,"results":"46","hashOfConfig":"40"},{"size":3281,"mtime":1663226096223,"results":"47","hashOfConfig":"40"},{"size":779,"mtime":1663830465947,"results":"48","hashOfConfig":"40"},{"size":1596,"mtime":1663849786637,"results":"49","hashOfConfig":"40"},{"size":175,"mtime":1663748318687,"results":"50","hashOfConfig":"40"},{"size":1282,"mtime":1641996193000,"results":"51","hashOfConfig":"40"},{"size":1572,"mtime":1663222286981,"results":"52","hashOfConfig":"40"},{"size":2156,"mtime":1663335332680,"results":"53","hashOfConfig":"40"},{"size":1910,"mtime":1663833344408,"results":"54","hashOfConfig":"40"},{"size":10003,"mtime":1663770709605,"results":"55","hashOfConfig":"40"},{"size":850,"mtime":1663770555543,"results":"56","hashOfConfig":"40"},{"size":1925,"mtime":1663227042285,"results":"57","hashOfConfig":"40"},{"size":3748,"mtime":1663849262507,"results":"58","hashOfConfig":"40"},{"size":4589,"mtime":1663755552756,"results":"59","hashOfConfig":"40"},{"size":2347,"mtime":1663484988320,"results":"60","hashOfConfig":"40"},{"size":410,"mtime":1663682442095,"results":"61","hashOfConfig":"40"},{"size":1674,"mtime":1663845993396,"results":"62","hashOfConfig":"40"},{"size":1763,"mtime":1663833071478,"results":"63","hashOfConfig":"40"},{"size":99,"mtime":1663755552752,"results":"64","hashOfConfig":"40"},{"size":1415,"mtime":1663756248343,"results":"65","hashOfConfig":"40"},{"size":8175,"mtime":1663755552752,"results":"66","hashOfConfig":"40"},{"size":1297,"mtime":1663845704256,"results":"67","hashOfConfig":"40"},{"size":308,"mtime":1663746945946,"results":"68","hashOfConfig":"40"},{"size":1071,"mtime":1663795348660,"results":"69","hashOfConfig":"40"},{"size":991,"mtime":1663845818665,"results":"70","hashOfConfig":"40"},{"size":1510,"mtime":1663849294689,"results":"71","hashOfConfig":"40"},{"size":1574,"mtime":1663834804898,"results":"72","hashOfConfig":"40"},{"size":2178,"mtime":1663845767253,"results":"73","hashOfConfig":"40"},{"size":1407,"mtime":1663848282106,"results":"74","hashOfConfig":"40"},{"size":115,"mtime":1663746325683,"results":"75","hashOfConfig":"40"},{"size":3015,"mtime":1663846500761,"results":"76","hashOfConfig":"40"},{"size":1446,"mtime":1663778440088,"results":"77","hashOfConfig":"40"},{"filePath":"78","messages":"79","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"80"},"1timrjz",{"filePath":"81","messages":"82","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"80"},{"filePath":"83","messages":"84","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"80"},{"filePath":"85","messages":"86","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"80"},{"filePath":"87","messages":"88","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"80"},{"filePath":"89","messages":"90","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"80"},{"filePath":"91","messages":"92","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"80"},{"filePath":"93","messages":"94","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"95","usedDeprecatedRules":"80"},{"filePath":"96","messages":"97","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"80"},{"filePath":"98","messages":"99","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"100","messages":"101","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"80"},{"filePath":"102","messages":"103","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"80"},{"filePath":"104","messages":"105","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"106","usedDeprecatedRules":"80"},{"filePath":"107","messages":"108","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"80"},{"filePath":"109","messages":"110","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"111","usedDeprecatedRules":"80"},{"filePath":"112","messages":"113","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"114","usedDeprecatedRules":"80"},{"filePath":"115","messages":"116","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"117","messages":"118","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"119","usedDeprecatedRules":"80"},{"filePath":"120","messages":"121","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"122","messages":"123","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"80"},{"filePath":"124","messages":"125","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"126","usedDeprecatedRules":"80"},{"filePath":"127","messages":"128","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"80"},{"filePath":"129","messages":"130","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"80"},{"filePath":"131","messages":"132","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"80"},{"filePath":"133","messages":"134","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"80"},{"filePath":"135","messages":"136","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"137","usedDeprecatedRules":"80"},{"filePath":"138","messages":"139","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"140","usedDeprecatedRules":"80"},{"filePath":"141","messages":"142","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"80"},{"filePath":"143","messages":"144","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"145","usedDeprecatedRules":"80"},{"filePath":"146","messages":"147","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"80"},{"filePath":"148","messages":"149","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"80"},{"filePath":"150","messages":"151","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"152","messages":"153","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"80"},{"filePath":"154","messages":"155","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"80"},{"filePath":"156","messages":"157","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"158","usedDeprecatedRules":"80"},{"filePath":"159","messages":"160","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"80"},{"filePath":"161","messages":"162","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"163","usedDeprecatedRules":"80"},{"filePath":"164","messages":"165","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"166","usedDeprecatedRules":"80"},"C:\\dev\\coding-academy\\sprint4\\src\\index.js",[],["167","168"],"C:\\dev\\coding-academy\\sprint4\\src\\store\\store.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\root-cmp.jsx",[],"C:\\dev\\coding-academy\\sprint4\\src\\store\\user.reducer.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\store\\stay.reducer.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\store\\order.reducer.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\store\\review.reducer.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\services\\user.service.js",["169","170"],"import { storageService } from './async-storage.service'\r\n// import { httpService } from './http.service'\r\nimport { getActionSetWatchedUser } from '../store/review.actions'\r\n// import { socketService, SOCKET_EVENT_USER_UPDATED, SOCKET_EMIT_USER_WATCH } from './socket.service'\r\nimport { showSuccessMsg } from '../services/event-bus.service'\r\n\r\nconst STORAGE_KEY_LOGGEDIN_USER = 'loggedinUser'\r\n\r\nexport const userService = {\r\n    login,\r\n    logout,\r\n    signup,\r\n    getLoggedinUser,\r\n    saveLocalUser,\r\n    getUsers,\r\n    getById,\r\n    remove,\r\n    update,\r\n    changeScore\r\n}\r\n\r\nwindow.userService = userService\r\n\r\n\r\nfunction getUsers() {\r\n    return storageService.query('user')\r\n    // return httpService.get(`user`)\r\n}\r\n\r\nfunction onUserUpdate(user) {\r\n    showSuccessMsg(`This user ${user.fullname} just got updated from socket, new score: ${user.score}`)\r\n}\r\n\r\nasync function getById(userId) {\r\n    const user = await storageService.get('user', userId)\r\n    // const user = await httpService.get(`user/${userId}`)\r\n\r\n    // socketService.emit(SOCKET_EMIT_USER_WATCH, userId)\r\n    // socketService.off(SOCKET_EVENT_USER_UPDATED, onUserUpdate)\r\n    // socketService.on(SOCKET_EVENT_USER_UPDATED, onUserUpdate)\r\n\r\n    return user\r\n}\r\nfunction remove(userId) {\r\n    return storageService.remove('user', userId)\r\n    // return httpService.delete(`user/${userId}`)\r\n}\r\n\r\nasync function update(user) {\r\n    await storageService.put('user', user)\r\n    // user = await httpService.put(`user/${user._id}`, user)\r\n    // Handle case in which admin updates other user's details\r\n    if (getLoggedinUser()._id === user._id) saveLocalUser(user)\r\n    return user;\r\n}\r\n\r\nasync function login(userCred) {\r\n    const users = await storageService.query('user')\r\n    const user = users.find(user => user.username === userCred.username)\r\n    // const user = await httpService.post('auth/login', userCred)\r\n    if (user) {\r\n        // socketService.login(user._id)\r\n        return saveLocalUser(user)\r\n    }\r\n}\r\nasync function signup(userCred) {\r\n    userCred.score = 10000;\r\n    const user = await storageService.post('user', userCred)\r\n    // const user = await httpService.post('auth/signup', userCred)\r\n    // socketService.login(user._id)\r\n    return saveLocalUser(user)\r\n}\r\nasync function logout() {\r\n    sessionStorage.removeItem(STORAGE_KEY_LOGGEDIN_USER)\r\n    // socketService.logout()\r\n    // return await httpService.post('auth/logout')\r\n}\r\n\r\nasync function changeScore(by) {\r\n    const user = getLoggedinUser()\r\n    if (!user) throw new Error('Not loggedin')\r\n    user.score = user.score + by || by\r\n    await update(user)\r\n    return user.score\r\n}\r\n\r\n\r\nfunction saveLocalUser(user) {\r\n    sessionStorage.setItem(STORAGE_KEY_LOGGEDIN_USER, JSON.stringify(user))\r\n    return user\r\n}\r\n\r\nfunction getLoggedinUser() {\r\n    return JSON.parse(sessionStorage.getItem(STORAGE_KEY_LOGGEDIN_USER))\r\n}\r\n\r\n\r\n// ;(async ()=>{\r\n//     await userService.signup({fullname: 'Puki Norma', username: 'user1', password:'123',score: 10000, isAdmin: false})\r\n//     await userService.signup({fullname: 'Master Adminov', username: 'admin', password:'123', score: 10000, isAdmin: true})\r\n//     await userService.signup({fullname: 'Muki G', username: 'muki', password:'123', score: 10000})\r\n// })()\r\n\r\n\r\n\r\n","C:\\dev\\coding-academy\\sprint4\\src\\routes.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\cmps\\app-header.jsx",[],"C:\\dev\\coding-academy\\sprint4\\src\\cmps\\app-footer.jsx",[],"C:\\dev\\coding-academy\\sprint4\\src\\services\\event-bus.service.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\store\\review.actions.js",["171","172"],"import { showSuccessMsg } from '../services/event-bus.service'\r\nimport { reviewService } from '../services/review.service'\r\nimport { userService } from '../services/user.service'\r\n\r\n// Action Creators\r\nexport function getActionRemoveReview(reviewId) {\r\n  return { type: 'REMOVE_REVIEW', reviewId }\r\n}\r\nexport function getActionAddReview(review) {\r\n  return { type: 'ADD_REVIEW', review }\r\n}\r\nexport function getActionSetWatchedUser(user) {\r\n  return { type: 'SET_WATCHED_USER', user }\r\n}\r\n\r\nexport function loadReviews() {\r\n  return async dispatch => {\r\n    try {\r\n      const reviews = await reviewService.query()\r\n      dispatch({ type: 'SET_REVIEWS', reviews })\r\n\r\n    } catch (err) {\r\n      console.log('ReviewActions: err in loadReviews', err)\r\n    }\r\n  }\r\n}\r\n\r\nexport function addReview(review) {\r\n  return async dispatch => {\r\n    try {\r\n      const addedReview = await reviewService.add(review)\r\n      dispatch(getActionAddReview(addedReview))\r\n\r\n      // Change the score in user kept in sessionStorage\r\n      // userService.saveLocalUser(addedReview.byUser)\r\n      // const { score } = addedReview.byUser\r\n      // dispatch({ type: 'SET_SCORE', score })\r\n\r\n    } catch (err) {\r\n      console.log('ReviewActions: err in addReview', err)\r\n      throw err\r\n    }\r\n  }\r\n}\r\n\r\nexport function removeReview(reviewId) {\r\n  return async dispatch => {\r\n    try {\r\n      await reviewService.remove(reviewId)\r\n      dispatch(getActionRemoveReview(reviewId))\r\n    } catch (err) {\r\n      console.log('ReviewActions: err in removeReview', err)\r\n      throw err\r\n    }\r\n  }\r\n}\r\n","C:\\dev\\coding-academy\\sprint4\\src\\services\\async-storage.service.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\pages\\add-edit-stay.jsx",["173","174"],"// import { upload } from '@testing-library/user-event/dist/upload'\r\nimport { useEffect, useRef } from 'react'\r\nimport { useNavigate, useParams } from 'react-router-dom'\r\nimport { useDispatch } from 'react-redux'\r\nimport { useFormRegister } from '../hooks/useFormRegister'\r\nimport { addStay, updateStay } from '../store/stay.actions'\r\n\r\n\r\nexport const StayEdit = () => {\r\n\r\n    const params = useParams()\r\n    const navigate = useNavigate()\r\n    const dispatch = useDispatch()\r\n\r\n\r\n    const [register, setStay, stay] = useFormRegister({\r\n        name: '',\r\n        price: ''\r\n        // img: null\r\n    })\r\n\r\n    const inputRef = useRef()\r\n\r\n    useEffect(() => {\r\n        inputRef.current.focus()\r\n        const stayId = params.stayId\r\n        if (!stayId) return\r\n        // stayService\r\n        //     .getById(stayId)\r\n        //     .then((stay) => {\r\n        //         setStay(stay)\r\n        //     })\r\n        //     .catch((err) => {\r\n        //         console.log('err:', err)\r\n        //     })\r\n    }, [])\r\n\r\n    const onSaveStay = (ev) => {\r\n        ev.preventDefault()\r\n        if (stay._id) {\r\n            try {\r\n                dispatch(updateStay(stay))\r\n                navigate('/')\r\n            } catch (err) {\r\n                console.error('ERROR!', err)\r\n            }\r\n        } else {\r\n            try {\r\n                dispatch(addStay(stay))\r\n                navigate('/')\r\n            } catch (err) {\r\n                console.error('ERROR!', err)\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    return (\r\n        <form onSubmit={onSaveStay}>\r\n            <h1>{stay._id ? 'Edit' : 'Add'} stay</h1>\r\n\r\n            <label htmlFor=\"name\">name</label>\r\n            <input ref={inputRef} {...register('name', 'text')} />\r\n\r\n            <label htmlFor=\"price\">Price</label>\r\n            <input {...register('price', 'number')} />\r\n            <button>submit</button>\r\n        </form>\r\n    )\r\n}","C:\\dev\\coding-academy\\sprint4\\src\\pages\\stay-details.jsx",["175","176","177"],"import { useEffect } from \"react\"\r\nimport { useState } from \"react\"\r\nimport { useNavigate, useParams } from \"react-router-dom\"\r\nimport { Calender } from \"../cmps/calender\"\r\nimport { Reserve } from \"../cmps/reserve\"\r\nimport { stayService } from \"../services/stay.service\"\r\nimport { ReactComponent as Star } from '../assets/icons/star.svg';\r\nimport { ReactComponent as Heart } from '../assets/icons/heart.svg';\r\nimport { ReactComponent as Share } from '../assets/icons/share.svg';\r\nimport { ReactComponent as Footprint } from '../assets/icons/footprint.svg';\r\nimport { ReactComponent as Security } from '../assets/icons/security.svg';\r\nimport { ReactComponent as Location } from '../assets/icons/location.svg';\r\nimport { ReactComponent as User } from '../assets/icons/user.svg';\r\nimport wifi from '../assets/img/wifi.png'\r\nimport monitor from '../assets/img/monitor.png'\r\nimport kitchen from '../assets/img/kitchen-tools.png'\r\nimport hairDryer from '../assets/img/hair-dryer.png'\r\nimport hanger from '../assets/img/clothes-hanger.png'\r\nimport airConditioner from '../assets/img/air-conditioner.png'\r\nimport { Review } from \"../cmps/stay-review\"\r\nimport { useRef } from \"react\"\r\nimport { AppHeader } from \"../cmps/app-header\"\r\nimport { DetailsHeader } from \"../cmps/details-header\"\r\n\r\nexport const StayDetails = () => {\r\n\r\n    const [stay, setStay] = useState(null)\r\n    const params = useParams()\r\n    // const navigate = useNavigate()\r\n    const imgSection = useRef()\r\n    const [isOpen, setIsOpen] = useState(false)\r\n\r\n    const loadStay = () => {\r\n        const stayId = params.id\r\n        stayService.getById(stayId).then((stay) => {\r\n            console.log('stay:', stay)\r\n            setStay(stay)\r\n            // setReviews(reviews)\r\n        })\r\n    }\r\n\r\n    // useEffect(() => {\r\n\r\n    // }, [])\r\n\r\n    useEffect(() => {\r\n        loadStay()\r\n        if (!imgSection.current) return\r\n        const imgObserver = new IntersectionObserver(onImgObserver, {\r\n            rootMargin: \"-20px 0px 0px\",\r\n        });\r\n\r\n        imgObserver.observe(imgSection.current)\r\n\r\n        function onImgObserver(entries) {\r\n            console.log(entries, isOpen.current, imgSection)\r\n            if (!imgSection.current) return\r\n            entries.forEach((entry) => {\r\n                console.log(entry.isIntersecting)\r\n                setIsOpen(!isOpen.current)\r\n            })\r\n        }\r\n    }, [])\r\n\r\n    const avgRate = () => {\r\n        let rates = stay.reviews.map(review => review.rate)\r\n        rates = rates.reduce((a, b) => a + b, 0)\r\n        console.log('rates:', rates)\r\n        return (rates / stay.reviews.length).toFixed(2)\r\n    }\r\n\r\n    if (!stay) return <div>Loading...</div>\r\n\r\n    return <div className=\"stay-details\">\r\n\r\n        {/* <div style={{ \"display\": (isOpen) ? 'static' : 'none' }} > */}\r\n        {(isOpen) ? <DetailsHeader /> : '' }\r\n        {/* </div> */}\r\n    \r\n        <div className=\"header-details\">\r\n            <h1>{stay.name}</h1>\r\n            <div className=\"mini-details\">\r\n                <div className=\"mini-info\">\r\n                    <span><Star /> {avgRate()}</span>&middot;\r\n                    <button className=\"review-amount\">{stay.reviews.length} reviews</button>&middot;\r\n                    <span className=\"country-code\">{stay.loc.countryCode},{stay.loc.country}</span>\r\n                </div>\r\n                <div className=\"details-actions\">\r\n                    <div className=\"share-details\"><button href=\"#\"><span><Share /></span>Share</button></div>\r\n                    <div className=\"save-details\"><button href=\"#\"><span><Heart /></span> Save</button></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        \r\n        <div className=\"img-details\">\r\n            <div className=\"main-img\">\r\n                <img src={stay.imgUrls[0]} alt=\"\" srcSet=\"\" />\r\n            </div>\r\n            <div className=\"middle-top\">\r\n                <img src={stay.imgUrls[1]} alt=\"\" srcSet=\"\" />\r\n            </div>\r\n            <div className=\"middle-bottom\">\r\n                <img src={stay.imgUrls[2]} alt=\"\" srcSet=\"\" />\r\n            </div>\r\n            <div className=\"top-right\">\r\n                <img src={stay.imgUrls[3]} alt=\"\" srcSet=\"\" />\r\n            </div>\r\n            <div className=\"bottom-right\">\r\n                <img src={stay.imgUrls[4]} alt=\"\" srcSet=\"\" />\r\n            </div>\r\n        </div>\r\n        <div ref={imgSection}></div>\r\n        <div className=\"main-details\">\r\n            <div className=\"details-section\">\r\n                <div className=\"mini-details\">\r\n                    <div className=\"stay-details\">\r\n                        <h2>{stay.roomType} hosted by {stay.host.fullname}</h2>\r\n                        <span>{stay.capacity} guests</span>&middot;\r\n                        <span>{stay.bathrooms} bathrooms</span>&middot;\r\n                        <span>{stay.bedrooms} bedrooms</span>\r\n                    </div>\r\n                    <div><User /></div>\r\n                </div>\r\n                <hr />\r\n                <div className=\"some-keys\">\r\n                    <div className=\"guest-impression\">\r\n                        <div className=\"logo\"><Location /></div>\r\n                        <div className=\"txt\">\r\n                            <div className=\"header\">Great location</div>\r\n                            <div className=\"description\">100% of recent guests gave the location a 5-star rating.</div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"guest-impression\">\r\n                        <div className=\"logo\"><Security /></div>\r\n                        <div className=\"txt\">\r\n                            <div className=\"header\">Great check-in experience</div>\r\n                            <div className=\"description\">100% of recent guests gave the check-in process a 5-star rating.</div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"guest-impression\">\r\n                        <div className=\"logo\"><Footprint /></div>\r\n                        <div className=\"txt\">\r\n                            <div className=\"header\">Furry friends welcome</div>\r\n                            <div className=\"description\">Bring your pets along for the stay.</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <hr />\r\n                <div className=\"air-cover\">\r\n                    <h2 className=\"air-cover-img\">\r\n                        <img src=\"https://a0.muscache.com/im/pictures/54e427bb-9cb7-4a81-94cf-78f19156faad.jpg\" alt=\"\" />\r\n                    </h2>\r\n                    <div className=\"air-cover-description\">\r\n                        Every booking includes free protection from Host cancellations, listing inaccuracies, and other issues like trouble checking in.\r\n                    </div>\r\n                    <button aria-label=\"Learn more\" type=\"button\" className=\"learn-more-link\">Learn more</button>\r\n                </div>\r\n                <hr />\r\n                <div className=\"more-description\">\r\n                    <div className=\"summary\">{stay.summary}</div>\r\n                    <button className=\"show-more\">Show more </button>\r\n                </div>\r\n                <hr />\r\n                <div className=\"amenities-section\">\r\n                    <div className=\"amenities-header\">\r\n                        <h2>What this place offers</h2>\r\n                    </div>\r\n                    <div className=\"amenities\">\r\n                        <div>\r\n                            <div className=\"amenitie\">\r\n                                <div>Wifi</div>\r\n                                <div className=\"wifi-icon\"><img src={wifi} alt=\"\" /></div>\r\n                            </div>\r\n                        </div>\r\n                        <div>\r\n                            <div className=\"amenitie\">\r\n                                <div>Kitchen</div>\r\n                                <div className=\"kitchen-icon\"><img src={kitchen} alt=\"\" /></div>\r\n                            </div>\r\n                        </div>\r\n                        <div>\r\n                            <div className=\"amenitie\">\r\n                                <div>hair-dryer</div>\r\n                                <div className=\"hairDryer-icon\"><img src={hairDryer} alt=\"\" /></div>\r\n                            </div>\r\n                        </div>\r\n                        <div>\r\n                            <div className=\"amenitie\">\r\n                                <div>Hanger</div>\r\n                                <div className=\"hanger-icon\"><img src={hanger} alt=\"\" /></div>\r\n                            </div>\r\n                        </div>\r\n                        <div>\r\n                            <div className=\"amenitie\">\r\n                                <div>Air-Conditioner</div>\r\n                                <div className=\"airConditioner-icon\"><img src={airConditioner} alt=\"\" /></div>\r\n                            </div>\r\n                        </div>\r\n                        <div>\r\n                            <div className=\"amenitie\">\r\n                                <div>Monitor</div>\r\n                                <div className=\"monitor-icon\"><img src={monitor} alt=\"\" /></div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <hr />\r\n                <div className=\"date-picker\">\r\n                    <Calender stay={stay} />\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"reserve-section\" >\r\n                <div className=\"reserve-form\">\r\n                    <div className=\"reserve\">\r\n                        <Reserve stay={stay} avgRate={avgRate} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div className=\"reviews-section\" >\r\n\r\n            <Review stay={stay} avgRate={avgRate} />\r\n\r\n        </div>\r\n    </div>\r\n\r\n\r\n}","C:\\dev\\coding-academy\\sprint4\\src\\pages\\reserve-summary.jsx",[],"C:\\dev\\coding-academy\\sprint4\\src\\services\\review.service.js",["178"],"// import { httpService } from './http.service'\r\nimport { storageService } from './async-storage.service'\r\n// import { socketService, SOCKET_EVENT_REVIEW_ADDED, SOCKET_EVENT_REVIEW_ABOUT_YOU } from './socket.service'\r\nimport { getActionRemoveReview, getActionAddReview } from '../store/review.actions'\r\n\r\nconst reviewChannel = new BroadcastChannel('reviewChannel')\r\n\r\n// ;(() => {\r\n//   reviewChannel.addEventListener('message', (ev) => {\r\n//     store.dispatch(ev.data)\r\n//   })\r\n//   socketService.on(SOCKET_EVENT_REVIEW_ADDED, (review) => {\r\n//     console.log('GOT from socket', review)\r\n//     store.dispatch(getActionAddReview(review))\r\n//   })\r\n//   socketService.on(SOCKET_EVENT_REVIEW_ABOUT_YOU, (review) => {\r\n//     showSuccessMsg(`New review about me ${review.txt}`)\r\n//   })\r\n// })()\r\n\r\n\r\n\r\nexport const reviewService = {\r\n  add,\r\n  query,\r\n  remove\r\n}\r\n\r\n\r\nfunction query(filterBy) {\r\n  var queryStr = (!filterBy) ? '' : `?name=${filterBy.name}&sort=anaAref`\r\n  // return httpService.get(`review${queryStr}`)\r\n  return storageService.query('review')\r\n}\r\n\r\nasync function remove(reviewId) {\r\n  // await httpService.delete(`review/${reviewId}`)\r\n  await storageService.remove('review', reviewId)\r\n  reviewChannel.postMessage(getActionRemoveReview(reviewId))\r\n\r\n\r\n}\r\nasync function add(review) {\r\n  // const addedReview = await httpService.post(`review`, review)\r\n\r\n  // review.byUser = userService.getLoggedinUser()\r\n  // review.aboutUser = await userService.getById(review.aboutUserId)\r\n  const addedReview = await storageService.post('review', review)\r\n\r\n  reviewChannel.postMessage(getActionAddReview(addedReview))\r\n\r\n  return addedReview\r\n}\r\n\r\n// This way, we can also subscribe to none-store data change\r\n// function subscribe(listener) {\r\n//   reviewChannel.addEventListener('message', listener)\r\n// }\r\n// function unsubscribe(listener) {\r\n//   reviewChannel.removeEventListener('message', listener)\r\n// }\r\n","C:\\dev\\coding-academy\\sprint4\\src\\services\\stay.service.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\store\\stay.actions.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\hooks\\useFormRegister.js",["179"],"import { useEffect, useState } from \"react\"\nimport { useEffectUpdate } from \"./useEffectUpdate\"\n\nexport const useFormRegister = (initialState, callBack) => {\n\n    const [fields, setFields] = useState(initialState)\n\n    useEffectUpdate(() => {\n        if (callBack) callBack(fields)\n    }, [fields])\n\n    const handleChange = ({ target }) => {\n        const field = target.name\n        let value = target.value\n\n        switch (target.type) {\n            case 'number':\n            case 'range':\n                value = +target.value || ''\n                break;\n            case 'checkbox':\n                value = target.checked\n                break;\n            case 'date':\n                value = new Date(value)\n                break;\n            case 'time':\n                const newDate = new Date()\n                const hours = value.split(':')[0]\n                const minutes = value.split(':')[1]\n                newDate.setHours(hours)\n                newDate.setMinutes(minutes)\n                value = newDate\n                break\n            default:\n                break\n        }\n        setFields(prevFields => ({ ...prevFields, [field]: value }))\n    }\n\n    const getFormattedDate = (value) => {\n        const valueDate = new Date(value)\n        return `${valueDate.getFullYear()}-${(valueDate.getMonth() + 1 + '').padStart(2, '0')}-${(valueDate.getDate() + '').padStart(2, '0')}`\n    }\n    const getFormattedTime = (value) => {\n        const valueTime = new Date(value)\n        return `${(valueTime.getHours() + '').padStart(2, '0')}:${(valueTime.getMinutes() + '').padStart(2, '0')}`\n    }\n    const register = (field, type = '', value) => { // value only used when type === 'radio'\n        const inputProp = {\n            onChange: handleChange,\n            name: field,\n            id: field,\n            value: fields[field],\n            type\n        }\n        if (type === 'checkbox') inputProp.checked = fields[field]\n        if (type === 'date') inputProp.value = getFormattedDate(fields[field])\n        if (type === 'time') inputProp.value = getFormattedTime(fields[field])\n        if (type === 'radio') {\n            inputProp.value = value\n            inputProp.id = value\n            inputProp.checked = fields[field] === value\n        }\n        return inputProp\n    }\n    return [register, setFields, fields]\n}","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\stay-list.jsx",[],"C:\\dev\\coding-academy\\sprint4\\src\\cmps\\stay-filter.jsx",[],"C:\\dev\\coding-academy\\sprint4\\src\\cmps\\stay-review.jsx",[],"C:\\dev\\coding-academy\\sprint4\\src\\cmps\\details-header.jsx",[],"C:\\dev\\coding-academy\\sprint4\\src\\cmps\\calender.jsx",["180"],"import React from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\n// import { useSelector } from \"react-redux\";\r\nimport { useFormRegister } from \"../hooks/useFormRegister\";\r\n// import { orderService } from \"../services/order.service\";\r\nimport { saveDates } from \"../store/order.actions\";\r\nimport { compareAsc, format } from 'date-fns'\r\n\r\n\r\nexport const Calender = ({ stay }) => {\r\n  const [register, setStartDate, date] = useFormRegister({\r\n    startDate: '',\r\n    endDate: ''\r\n  });\r\n\r\n\r\n  const dispatch = useDispatch()\r\n\r\n  format(new Date(2014, 1, 11), 'yyyy-MM-dd')\r\n  //=> '2014-02-11'\r\n\r\n  const dates = [\r\n    new Date(1995, 6, 2),\r\n    new Date(1987, 1, 11),\r\n    new Date(1989, 6, 10),\r\n  ]\r\n  dates.sort(compareAsc)\r\n\r\n  useEffect(() => {\r\n\r\n  }, [])\r\n\r\n  const setDate = (ev) => {\r\n    ev.preventDefault()\r\n    const startDate = new Date(date.startDate).toLocaleDateString()\r\n    const endDate = new Date(date.endDate).toLocaleDateString()\r\n    dispatch(saveDates(stay._id, startDate, endDate))\r\n\r\n  }\r\n\r\n  return (\r\n    <section>\r\n      <form onSubmit={(ev) => setDate(ev)}>\r\n\r\n        <label htmlFor=\"start\">Start date:</label>\r\n        <input {...register('startDate', 'date')} />\r\n\r\n        <label htmlFor=\"end\">End date:</label>\r\n        <input {...register('endDate', 'date')} />\r\n\r\n        <button>set</button>\r\n      </form>\r\n    </section>\r\n  )\r\n};\r\n\r\n","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\reserve.jsx",["181"],"import { useState } from \"react\"\r\nimport { useDispatch } from \"react-redux\"\r\nimport { useSelector } from \"react-redux\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { saveOrder } from \"../store/order.actions\"\r\nimport { ReactComponent as Star } from '../assets/icons/star.svg';\r\nimport { CalcReserve } from \"./calc-reserve\"\r\n\r\nexport const Reserve = ({ stay, avgRate }) => {\r\n\r\n    let { order } = useSelector(state => state.orderModule)\r\n    const [isOpen, setIsOpen] = useState(false)\r\n    const dispatch = useDispatch()\r\n\r\n\r\n    const [guestsCount, setGuestsCount] = useState({\r\n        adults: 0,\r\n        children: 0,\r\n        infants: 0,\r\n        pets: 0,\r\n    })\r\n\r\n    const toggleMenu = () => {\r\n        setIsOpen(!isOpen)\r\n    }\r\n\r\n    const onClick = (category, action) => {\r\n        action = action === '+' ? 1 : -1\r\n        if (guestsCount[category] + action < 0 || action > stay.capacity) return\r\n        guestsCount[category] += action\r\n        setGuestsCount(prevGuestsCount => ({ ...prevGuestsCount }))\r\n        console.log(guestsCount)\r\n    }\r\n\r\n    const submitReserve = () => {\r\n        const guests = guestsCount\r\n        order = { ...order, guests }\r\n        console.log('order:', order)\r\n        dispatch(saveOrder(order))\r\n    }\r\n\r\n    const mouseMove = (e) => {\r\n        const rect = e.target.getBoundingClientRect();\r\n        const mouseX = e.pageX - e.currentTarget.offsetLeft;\r\n        const mouseY = e.pageY - e.currentTarget.offsetTop;\r\n        e.currentTarget.style.cssText = `\r\n    --mouse-x: ${mouseX}; \r\n    --mouse-y: ${mouseY};\r\n  `;\r\n    }\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"reserve-form\">\r\n            <div className=\"reserve-header\">\r\n                <div>\r\n                    <div><span className=\"price\">${stay.price}</span><span> night</span></div>\r\n                </div>\r\n                <div className=\"reserve-rate\">\r\n                    <div><span><Star /></span><span> {avgRate()}</span></div>&middot;\r\n                    <button>{stay.reviews.length} reviews</button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"reserve-info\">\r\n                <div className=\"pick-dates\">\r\n                    <div className=\"dates-first-layer\">\r\n                        <div className=\"dates-second-layer\">\r\n                            <button className=\"reserve-dates\">\r\n                                <div className=\"check-in\">\r\n                                    <div className=\"txt-reserve\">Check-in</div>\r\n                                    <div className=\"date-reserve\">{order.startDate}</div>\r\n                                </div>\r\n                                <div className=\"check-out\">\r\n                                    <div className=\"txt-reserve\">Check-out</div>\r\n                                    <div className=\"date-reserve\">{order.endDate}</div>\r\n                                </div>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"guest-info\">\r\n                    <div className=\"guest-first-layer\">\r\n                        <div className=\"guest-details-layer\">\r\n                            <div className=\"guest-final-details\">\r\n                                <button className=\"guests-details\" onClick={() => toggleMenu()}>\r\n                                    <div className=\"title\">Guests</div>\r\n                                    <div className=\"saddf\">\r\n                                        <div className=\"guest-description\">\r\n                                            {guestsCount.adults + guestsCount.children} guest\r\n                                            {(guestsCount.infants) ? ',' + guestsCount.infants + 'infants' : ''}\r\n                                            {(guestsCount.pets) ? ',' + guestsCount.pets + 'pets' : ''}\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                </button>\r\n                            </div>\r\n                            {isOpen &&\r\n\r\n                                <div className=\"select-guests\">\r\n                                    <div className=\"pick-guest-account\">\r\n                                        <div>\r\n                                            <h3>Adults</h3>\r\n                                            <h5>Age 13+</h5>\r\n                                        </div>\r\n                                        <div>\r\n                                            <span onClick={() => onClick('adults', '+')}>+</span>\r\n                                            <span>{guestsCount.adults}</span>\r\n                                            <span onClick={() => onClick('adults', '-')}>-</span>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"pick-guest-account\">\r\n                                        <div>\r\n                                            <h3>Children</h3>\r\n                                            <h5>Ages 2-12</h5>\r\n                                        </div>\r\n                                        <div>\r\n                                            <span onClick={() => onClick('children', '+')}>+</span>\r\n                                            <span>{guestsCount.children}</span>\r\n                                            <span onClick={() => onClick('children', '-')}>-</span>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"pick-guest-account\">\r\n                                        <div>\r\n                                            <h3>Infants</h3>\r\n                                            <h5>Under 2</h5>\r\n                                        </div>\r\n                                        <div>\r\n                                            <span onClick={() => onClick('infants', '+')}>+</span>\r\n                                            <span>{guestsCount.infants}</span>\r\n                                            <span onClick={() => onClick('infants', '-')}>-</span>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"pick-guest-account\">\r\n                                        <div>\r\n                                            <h3>Pets</h3>\r\n                                        </div>\r\n                                        <div>\r\n                                            <span onClick={() => onClick('pets', '+')}>+</span>\r\n                                            <span>{guestsCount.pets}</span>\r\n                                            <span onClick={() => onClick('pets', '-')}>-</span>\r\n                                        </div>\r\n                                    </div>\r\n                                    <button onClick={() => toggleMenu()}>close</button>\r\n                                </div>\r\n                            }\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"reserve-btn-section\">\r\n                <Link to=\"/summary\" params={stay}>\r\n\r\n                    <div className=\"min-h-screen flex flex-col items-center justify-center bg-gray-100\">\r\n                        <button onMouseMove={(e) => mouseMove(e)} onClick={() => submitReserve()} id=\"gradientBtn\">\r\n                            <span className=\"absolute inset-0 gradient opacity-0 transition-opacity duration-300\"></span>\r\n                            <span className=\"relative z-1 pointer-events-none\">Let's Go</span>\r\n                        </button>\r\n                    </div>\r\n\r\n                </Link>\r\n            </div>\r\n\r\n            {order.endDate &&\r\n                <section>\r\n                    <div className=\"msg-txt\">\r\n                        <div>You won't be charged yet</div>\r\n                    </div>\r\n                    <CalcReserve stay={stay} />\r\n                </section>\r\n            }\r\n\r\n        </div>\r\n    )\r\n}","C:\\dev\\coding-academy\\sprint4\\src\\services\\util.service.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\hooks\\useEffectUpdate.js",["182","183"],"import { useEffect, useRef } from \"react\"\n\nexport const useEffectUpdate = (callBack, dependencies) => {\n    \n    const isFirst = useRef(true)\n\n    useEffect(()=>{\n        if (isFirst.current) {\n            isFirst.current = false\n            return\n        }   \n        callBack()\n    }, dependencies)\n    \n}","C:\\dev\\coding-academy\\sprint4\\src\\store\\order.actions.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\cmps\\expanded-filter.jsx",[],"C:\\dev\\coding-academy\\sprint4\\src\\cmps\\stay-preview.jsx",["184"],"C:\\dev\\coding-academy\\sprint4\\src\\cmps\\calc-reserve.jsx",[],"C:\\dev\\coding-academy\\sprint4\\src\\services\\order.service.js",[],"C:\\dev\\coding-academy\\sprint4\\src\\cmps\\header-filter.jsx",["185","186"],"import { useLocation, useParams } from 'react-router-dom'\r\nimport search from '../assets/img/search-icon.png'\r\n\r\nexport function HeaderFilter({ onFilterClicked }) {\r\n    const pathname = useLocation().pathname\r\n\r\n    const checkIn = pathname.slice(1, 11)\r\n    const checkOut = pathname.slice(12, 22)\r\n    console.log('checkIn, checkOut:', checkIn, checkOut)\r\n\r\n    const checkIndDate = new Date(checkIn)\r\n    const checkOutDate = new Date(checkOut)\r\n\r\n    const checkInMonth = checkIndDate.toLocaleString('en-US', { month: 'short' })\r\n    const checkOutInMonth = checkOutDate.toLocaleString('en-US', { month: 'short' })\r\n\r\n    return (\r\n        <section className=\"header-filter\">\r\n            <div className='filter-contaner'>\r\n                <button className='header-btn' onClick={onFilterClicked}>Anywhere</button>\r\n                <span></span>\r\n                <button className='header-btn' onClick={onFilterClicked}>\r\n                    {checkIn && checkOut ? <p > {checkInMonth} {checkIndDate.getDate()} - {checkOutInMonth} {checkOutDate.getDate()} </p> : <p> Any week</p>}\r\n                </button>\r\n                <span></span>\r\n                <button className='header-btn search-last-btn' onClick={onFilterClicked}>Add guests</button>\r\n                <button className='search-btn ' onClick={onFilterClicked}><img src={search} /></button>\r\n            </div>\r\n        </section>\r\n    )\r\n}","C:\\dev\\coding-academy\\sprint4\\src\\cmps\\header-profile.jsx",[],"C:\\dev\\coding-academy\\sprint4\\src\\cmps\\header-expanded-filter.jsx",["187"],"import { useDispatch } from 'react-redux'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport search from '../assets/img/search-icon.png'\r\nimport { useFormRegister } from '../hooks/useFormRegister'\r\n// import { saveDates } from '../store/order.actions'\r\nimport { loadStays, setFilterBy } from '../store/stay.actions'\r\nimport {  format } from 'date-fns'\r\n\r\n\r\nexport function HeaderExpandedFilter({ onFilterClicked }) {\r\n    const dispatch = useDispatch()\r\n    const navigate = useNavigate()\r\n\r\n    const onChangeFilter = (filterBy) => {\r\n        dispatch(setFilterBy(filterBy))\r\n        dispatch(loadStays())\r\n    }\r\n\r\n    const [register, setFilter, filterBy] = useFormRegister({\r\n        where: '',\r\n        checkIn: '',\r\n        checkOut: '',\r\n        who: ''\r\n    }, onChangeFilter)\r\n\r\n    const onClickFilter = () => {\r\n        // if (filterBy.checkIn && filterBy.checkOut) {\r\n        //     dispatch(saveDates('', filterBy.checkIn, filterBy.checkOut))\r\n        // }\r\n        onFilterClicked()\r\n        const checkIn = format(new Date(filterBy.checkIn), 'yyyy-MM-dd') \r\n        const checkOut = format(new Date(filterBy.checkOut), 'yyyy-MM-dd') \r\n        // console.log('checkIn:', checkIn)\r\n        // navigate('/')\r\n        navigate(`/${checkIn}/${checkOut}`)\r\n    }\r\n\r\n    // console.log('filterBy:', filterBy)\r\n    return (\r\n        <section className=\"header-filter \">\r\n            <div className='header-expanded-filter'>\r\n                <div className=\"where-filter\">\r\n                    <label htmlFor=\"\">where</label>\r\n                    {/* <p>where</p> */}\r\n                    {/* <span>Search destination</span> */}\r\n                    <input className='filter-input' placeholder='Search destination' {...register('where', 'text')} />\r\n                </div>\r\n                <span></span>\r\n                {/* <div className=\"when-filter\"> */}\r\n                <div className=\"check-in\">\r\n                    <p>check in</p>\r\n                    {/* <span>Add dates</span> */}\r\n                    <input className='filter-input' {...register('checkIn', 'date')} />\r\n                </div>\r\n                <span></span>\r\n                <div className=\"check-out\">\r\n                    <p> check out</p>\r\n                    {/* <span>Add dates</span> */}\r\n                    {/* <input className='filter-input' type=\"date\" placeholder='Add dates' /> */}\r\n                    <input className='filter-input' {...register('checkOut', 'date')} />\r\n                </div>\r\n                {/* </div> */}\r\n                <span></span>\r\n                <div className=\"who-filter\">\r\n                    <p>who</p>\r\n                    <span>Add guests</span>\r\n                </div>\r\n                <button className=\"expanded-search-btn\" onClick={onClickFilter}>\r\n                    <div>\r\n                        <img src={search} alt= \"\"/>\r\n                        <p>search </p>\r\n                    </div>\r\n                </button>\r\n            </div>\r\n        </section>\r\n\r\n    )\r\n}","C:\\dev\\coding-academy\\sprint4\\src\\pages\\stay-app.jsx",["188"],"import React, { useEffect } from 'react'\r\n// import { connect } from 'react-redux'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { loadStays, setFilterBy } from '../store/stay.actions'\r\nimport { StayList } from '../cmps/stay-list'\r\nimport { StayFilter } from '../cmps/stay-filter'\r\n// import { stayService } from '../services/stay.service'\r\n// import {eventBusService } from '../services/event-bus.service'\r\n\r\nexport const StayApp = () => {\r\n    const { stays, isFilterOpen } = useSelector(state => state.stayModule)\r\n    const dispatch = useDispatch()\r\n\r\n    useEffect(() => {\r\n        dispatch(loadStays())\r\n    }, [])\r\n\r\n    const onChangeFilter = (filterBy) => {\r\n        dispatch(setFilterBy(filterBy))\r\n        dispatch(loadStays())\r\n    }\r\n\r\n    const onClickFilter = (ev) => {\r\n        ev.preventDefault()\r\n        dispatch({\r\n            type: 'SET_IS_FILTER_OPEN',\r\n            isFilterOpen: !isFilterOpen\r\n        })\r\n        if (!isFilterOpen) dispatch(loadStays())\r\n    }\r\n    \r\n    if (!stays) return <div>Loading...</div>\r\n    return (\r\n        <section className={isFilterOpen ? 'filter-open bnb-app full main-layout ' : 'bnb-app full main-layout '}>\r\n            <div onClick={onClickFilter} className='main-screen' ></div>\r\n            <StayFilter isFilterOpen={isFilterOpen} onChangeFilter={onChangeFilter} onClickFilter={onClickFilter} />\r\n            <StayList stays={stays} />\r\n        </section>\r\n    )\r\n}",{"ruleId":"189","replacedBy":"190"},{"ruleId":"191","replacedBy":"192"},{"ruleId":"193","severity":1,"message":"194","line":3,"column":10,"nodeType":"195","messageId":"196","endLine":3,"endColumn":33},{"ruleId":"193","severity":1,"message":"197","line":30,"column":10,"nodeType":"195","messageId":"196","endLine":30,"endColumn":22},{"ruleId":"193","severity":1,"message":"198","line":1,"column":10,"nodeType":"195","messageId":"196","endLine":1,"endColumn":24},{"ruleId":"193","severity":1,"message":"199","line":3,"column":10,"nodeType":"195","messageId":"196","endLine":3,"endColumn":21},{"ruleId":"193","severity":1,"message":"200","line":16,"column":22,"nodeType":"195","messageId":"196","endLine":16,"endColumn":29},{"ruleId":"201","severity":1,"message":"202","line":36,"column":8,"nodeType":"203","endLine":36,"endColumn":10,"suggestions":"204"},{"ruleId":"193","severity":1,"message":"205","line":3,"column":10,"nodeType":"195","messageId":"196","endLine":3,"endColumn":21},{"ruleId":"193","severity":1,"message":"206","line":22,"column":10,"nodeType":"195","messageId":"196","endLine":22,"endColumn":19},{"ruleId":"201","severity":1,"message":"207","line":63,"column":8,"nodeType":"203","endLine":63,"endColumn":10,"suggestions":"208"},{"ruleId":"193","severity":1,"message":"209","line":31,"column":7,"nodeType":"195","messageId":"196","endLine":31,"endColumn":15},{"ruleId":"193","severity":1,"message":"210","line":1,"column":10,"nodeType":"195","messageId":"196","endLine":1,"endColumn":19},{"ruleId":"193","severity":1,"message":"211","line":12,"column":20,"nodeType":"195","messageId":"196","endLine":12,"endColumn":32},{"ruleId":"193","severity":1,"message":"212","line":43,"column":15,"nodeType":"195","messageId":"196","endLine":43,"endColumn":19},{"ruleId":"201","severity":1,"message":"213","line":13,"column":8,"nodeType":"195","endLine":13,"endColumn":20},{"ruleId":"201","severity":1,"message":"214","line":13,"column":8,"nodeType":"195","endLine":13,"endColumn":20,"suggestions":"215"},{"ruleId":"216","severity":1,"message":"217","line":26,"column":13,"nodeType":"218","endLine":26,"endColumn":42},{"ruleId":"193","severity":1,"message":"219","line":1,"column":23,"nodeType":"195","messageId":"196","endLine":1,"endColumn":32},{"ruleId":"216","severity":1,"message":"217","line":27,"column":75,"nodeType":"218","endLine":27,"endColumn":95},{"ruleId":"193","severity":1,"message":"220","line":19,"column":22,"nodeType":"195","messageId":"196","endLine":19,"endColumn":31},{"ruleId":"201","severity":1,"message":"221","line":16,"column":8,"nodeType":"203","endLine":16,"endColumn":10,"suggestions":"222"},"no-native-reassign",["223"],"no-negated-in-lhs",["224"],"no-unused-vars","'getActionSetWatchedUser' is defined but never used.","Identifier","unusedVar","'onUserUpdate' is defined but never used.","'showSuccessMsg' is defined but never used.","'userService' is defined but never used.","'setStay' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'params.stayId'. Either include it or remove the dependency array.","ArrayExpression",["225"],"'useNavigate' is defined but never used.","'AppHeader' is defined but never used.","React Hook useEffect has missing dependencies: 'isOpen' and 'loadStay'. Either include them or remove the dependency array. You can also do a functional update 'setIsOpen(i => ...)' if you only need 'isOpen' in the 'setIsOpen' call.",["226"],"'queryStr' is assigned a value but never used.","'useEffect' is defined but never used.","'setStartDate' is assigned a value but never used.","'rect' is assigned a value but never used.","React Hook useEffect was passed a dependency list that is not an array literal. This means we can't statically verify whether you've passed the correct dependencies.","React Hook useEffect has a missing dependency: 'callBack'. Either include it or remove the dependency array. If 'callBack' changes too often, find the parent component that defines it and wrap that definition in useCallback.",["227"],"jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","'useParams' is defined but never used.","'setFilter' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'dispatch'. Either include it or remove the dependency array.",["228"],"no-global-assign","no-unsafe-negation",{"desc":"229","fix":"230"},{"desc":"231","fix":"232"},{"desc":"233","fix":"234"},{"desc":"235","fix":"236"},"Update the dependencies array to be: [params.stayId]",{"range":"237","text":"238"},"Update the dependencies array to be: [isOpen, loadStay]",{"range":"239","text":"240"},"Update the dependencies array to be: [callBack]",{"range":"241","text":"242"},"Update the dependencies array to be: [dispatch]",{"range":"243","text":"244"},[1015,1017],"[params.stayId]",[2390,2392],"[isOpen, loadStay]",[288,300],"[callBack]",[635,637],"[dispatch]"]
=======
[{"/Users/davidlaufer/sprint4/src/index.js":"1","/Users/davidlaufer/sprint4/src/store/store.js":"2","/Users/davidlaufer/sprint4/src/root-cmp.jsx":"3","/Users/davidlaufer/sprint4/src/store/user.reducer.js":"4","/Users/davidlaufer/sprint4/src/store/order.reducer.js":"5","/Users/davidlaufer/sprint4/src/store/stay.reducer.js":"6","/Users/davidlaufer/sprint4/src/store/review.reducer.js":"7","/Users/davidlaufer/sprint4/src/services/user.service.js":"8","/Users/davidlaufer/sprint4/src/routes.js":"9","/Users/davidlaufer/sprint4/src/cmps/app-footer.jsx":"10","/Users/davidlaufer/sprint4/src/cmps/app-header.jsx":"11","/Users/davidlaufer/sprint4/src/cmps/stay-filter.jsx":"12","/Users/davidlaufer/sprint4/src/store/review.actions.js":"13","/Users/davidlaufer/sprint4/src/services/async-storage.service.js":"14","/Users/davidlaufer/sprint4/src/services/event-bus.service.js":"15","/Users/davidlaufer/sprint4/src/pages/add-edit-stay.jsx":"16","/Users/davidlaufer/sprint4/src/pages/reserve-summary.jsx":"17","/Users/davidlaufer/sprint4/src/pages/stay-details.jsx":"18","/Users/davidlaufer/sprint4/src/pages/bnb-app.jsx":"19","/Users/davidlaufer/sprint4/src/cmps/header-filter.jsx":"20","/Users/davidlaufer/sprint4/src/cmps/header-profile.jsx":"21","/Users/davidlaufer/sprint4/src/cmps/expanded-filter.jsx":"22","/Users/davidlaufer/sprint4/src/services/review.service.js":"23","/Users/davidlaufer/sprint4/src/services/stay.service.js":"24","/Users/davidlaufer/sprint4/src/store/stay.actions.js":"25","/Users/davidlaufer/sprint4/src/hooks/useFormRegister.js":"26","/Users/davidlaufer/sprint4/src/cmps/stay-list.jsx":"27","/Users/davidlaufer/sprint4/src/cmps/calender.jsx":"28","/Users/davidlaufer/sprint4/src/cmps/stay-review.jsx":"29","/Users/davidlaufer/sprint4/src/services/util.service.js":"30","/Users/davidlaufer/sprint4/src/hooks/useEffectUpdate.js":"31","/Users/davidlaufer/sprint4/src/store/order.actions.js":"32","/Users/davidlaufer/sprint4/src/services/order.service.js":"33","/Users/davidlaufer/sprint4/src/cmps/stay-preview.jsx":"34","/Users/davidlaufer/sprint4/src/cmps/calc-reserve.jsx":"35","/Users/davidlaufer/sprint4/src/cmps/main-header.jsx":"36","/Users/davidlaufer/sprint4/src/cmps/details-header.jsx":"37","/Users/davidlaufer/sprint4/src/cmps/stayDetails/stay-keys.jsx":"38","/Users/davidlaufer/sprint4/src/cmps/stayDetails/stay-air-cover.jsx":"39","/Users/davidlaufer/sprint4/src/cmps/stayDetails/stay-amenities.jsx":"40","/Users/davidlaufer/sprint4/src/cmps/reserve.jsx":"41"},{"size":790,"mtime":1663249118004,"results":"42","hashOfConfig":"43"},{"size":1089,"mtime":1663319141188,"results":"44","hashOfConfig":"43"},{"size":1149,"mtime":1663742710683,"results":"45","hashOfConfig":"43"},{"size":1393,"mtime":1663167552845,"results":"46","hashOfConfig":"43"},{"size":263,"mtime":1663494704751,"results":"47","hashOfConfig":"43"},{"size":1839,"mtime":1663515847712,"results":"48","hashOfConfig":"43"},{"size":647,"mtime":1663167552844,"results":"49","hashOfConfig":"43"},{"size":3176,"mtime":1663249279319,"results":"50","hashOfConfig":"43"},{"size":620,"mtime":1663631658235,"results":"51","hashOfConfig":"43"},{"size":422,"mtime":1663500250711,"results":"52","hashOfConfig":"43"},{"size":426,"mtime":1663757610371,"results":"53","hashOfConfig":"43"},{"size":2116,"mtime":1663759894621,"results":"54","hashOfConfig":"43"},{"size":1516,"mtime":1663167552844,"results":"55","hashOfConfig":"43"},{"size":2080,"mtime":1663167552836,"results":"56","hashOfConfig":"43"},{"size":1235,"mtime":1663167552837,"results":"57","hashOfConfig":"43"},{"size":1875,"mtime":1663500250716,"results":"58","hashOfConfig":"43"},{"size":1468,"mtime":1663804959049,"results":"59","hashOfConfig":"43"},{"size":4589,"mtime":1663848501930,"results":"60","hashOfConfig":"43"},{"size":1405,"mtime":1663759956677,"results":"61","hashOfConfig":"43"},{"size":117,"mtime":1663631658226,"results":"62","hashOfConfig":"43"},{"size":111,"mtime":1663500250713,"results":"63","hashOfConfig":"43"},{"size":919,"mtime":1663631658226,"results":"64","hashOfConfig":"43"},{"size":1864,"mtime":1663249463032,"results":"65","hashOfConfig":"43"},{"size":3624,"mtime":1663827620897,"results":"66","hashOfConfig":"43"},{"size":4055,"mtime":1663827612621,"results":"67","hashOfConfig":"43"},{"size":2347,"mtime":1663500250715,"results":"68","hashOfConfig":"43"},{"size":396,"mtime":1663631658227,"results":"69","hashOfConfig":"43"},{"size":1382,"mtime":1663843987147,"results":"70","hashOfConfig":"43"},{"size":1717,"mtime":1663829566314,"results":"71","hashOfConfig":"43"},{"size":1255,"mtime":1663528966097,"results":"72","hashOfConfig":"43"},{"size":308,"mtime":1663500250715,"results":"73","hashOfConfig":"43"},{"size":1033,"mtime":1663494913111,"results":"74","hashOfConfig":"43"},{"size":1963,"mtime":1663442741724,"results":"75","hashOfConfig":"43"},{"size":631,"mtime":1663631658228,"results":"76","hashOfConfig":"43"},{"size":1494,"mtime":1663623156167,"results":"77","hashOfConfig":"43"},{"size":790,"mtime":1663681084510,"results":"78","hashOfConfig":"43"},{"size":1297,"mtime":1663827143469,"results":"79","hashOfConfig":"43"},{"size":1237,"mtime":1663837881734,"results":"80","hashOfConfig":"43"},{"size":523,"mtime":1663838019616,"results":"81","hashOfConfig":"43"},{"size":1220,"mtime":1663843924032,"results":"82","hashOfConfig":"43"},{"size":9842,"mtime":1663848678206,"results":"83","hashOfConfig":"43"},{"filePath":"84","messages":"85","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"86"},"1bcx9lh",{"filePath":"87","messages":"88","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"86"},{"filePath":"89","messages":"90","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"91","usedDeprecatedRules":"86"},{"filePath":"92","messages":"93","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"86"},{"filePath":"94","messages":"95","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"86"},{"filePath":"96","messages":"97","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"98","usedDeprecatedRules":"86"},{"filePath":"99","messages":"100","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"86"},{"filePath":"101","messages":"102","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"103","usedDeprecatedRules":"86"},{"filePath":"104","messages":"105","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"86"},{"filePath":"106","messages":"107","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"86"},{"filePath":"108","messages":"109","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"110","usedDeprecatedRules":"86"},{"filePath":"111","messages":"112","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"113","usedDeprecatedRules":"86"},{"filePath":"114","messages":"115","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"116","usedDeprecatedRules":"86"},{"filePath":"117","messages":"118","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"86"},{"filePath":"119","messages":"120","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"86"},{"filePath":"121","messages":"122","errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"123","usedDeprecatedRules":"86"},{"filePath":"124","messages":"125","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"86"},{"filePath":"126","messages":"127","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"128","messages":"129","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"130","usedDeprecatedRules":"86"},{"filePath":"131","messages":"132","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"86"},{"filePath":"133","messages":"134","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"86"},{"filePath":"135","messages":"136","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"137","usedDeprecatedRules":"86"},{"filePath":"138","messages":"139","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"140","usedDeprecatedRules":"86"},{"filePath":"141","messages":"142","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"143","usedDeprecatedRules":"86"},{"filePath":"144","messages":"145","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"86"},{"filePath":"146","messages":"147","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"148","usedDeprecatedRules":"86"},{"filePath":"149","messages":"150","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"86"},{"filePath":"151","messages":"152","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"153","usedDeprecatedRules":"86"},{"filePath":"154","messages":"155","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"86"},{"filePath":"156","messages":"157","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"86"},{"filePath":"158","messages":"159","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"160","usedDeprecatedRules":"86"},{"filePath":"161","messages":"162","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"86"},{"filePath":"163","messages":"164","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"165","usedDeprecatedRules":"86"},{"filePath":"166","messages":"167","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"168","usedDeprecatedRules":"86"},{"filePath":"169","messages":"170","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"86"},{"filePath":"171","messages":"172","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"86"},{"filePath":"173","messages":"174","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"86"},{"filePath":"175","messages":"176","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"86"},{"filePath":"177","messages":"178","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"86"},{"filePath":"179","messages":"180","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"86"},{"filePath":"181","messages":"182","errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"/Users/davidlaufer/sprint4/src/index.js",[],["183","184"],"/Users/davidlaufer/sprint4/src/store/store.js",[],"/Users/davidlaufer/sprint4/src/root-cmp.jsx",["185"],"import React ,{useState,useEffect}from \"react\";\nimport { Routes, Route, useLocation } from 'react-router'\n// import { AppHeader } from \"./cmps/app-header\";\nimport routes from './routes'\nimport { AppHeader } from './cmps/app-header'\nimport { AppFooter } from './cmps/app-footer'\nimport { StayFilter } from \"./cmps/stay-filter\";\n\n\nexport function RootCmp () {\n  \n  const location = useLocation()\n\n    const [layoutClass, setLayoutClass] = useState(false)\n\n    console.log('location:', location)\n    useEffect(() => {\n      location.pathname.includes('details')? setLayoutClass(true):  setLayoutClass(false)\n\n    }, [location.pathname])\n\n  \n    return (\n      <div className= \"full main-layout\">\n        <AppHeader layoutClass={layoutClass} />\n        <main className={`${layoutClass? 'main-layout-details':'full main-layout'} `} >\n          <Routes>\n            {routes.map(route => <Route key={route.path} exact={true} element={route.component} path={route.path} />)}\n            {/* <Route path=\"user/:id\" element={<UserDetails />} /> */}\n          </Routes>\n        </main>\n        <AppFooter layoutClass={layoutClass} />\n      </div>\n    )\n    \n}\n","/Users/davidlaufer/sprint4/src/store/user.reducer.js",[],"/Users/davidlaufer/sprint4/src/store/order.reducer.js",[],"/Users/davidlaufer/sprint4/src/store/stay.reducer.js",["186","187"],"const initialState = {\n    stays: [],\n    filterBy: null,\n    isFilterOpen: false\n}\nexport function stayReducer(state = initialState, action) {\n    var newState = state\n    var stays\n    var stay\n    var isFilterOpen\n    switch (action.type) {\n        case 'SET_STAYS':\n            return { ...state, stays: action.stays }\n\n        case 'REMOVE_STAY':\n            const lastRemovedStay = state.stays.find(stay => stay._id === action.stayId)\n            stays = state.stays.filter(stay => stay._id !== action.stayId)\n            return { ...state, stays, lastRemovedStay }\n\n        case 'ADD_STAY':\n            return { ...state, stays: [...state.stays, action.stay] }\n\n        case 'UPDATE_STAY':\n            stays = state.stays.map(stay => (stay._id === action.stay._id) ? action.stay : stay)\n            return { ...state, stays }\n\n        case 'ADD_TO_CART':\n            return { ...state, stay: [...state.stay, action.stay] }\n\n        case 'REMOVE_FROM_CART':\n            stay = state.stay.filter(stay => stay._id !== action.stayId)\n            return { ...state, stay }\n\n        case 'SET_ISOPENFILTER':\n            isFilterOpen = action.isFilterOpen\n            return { ...state, isFilterOpen}\n\n        // case 'CLEAR_CART':\n        //     return  { ...state, stay: []}\n        //     \n        case 'StayUNDO_REMOVE_CART':\n            if (state.lastRemovedStay) {\n                return { ...state, stays: [...state.stays, state.lastRemovedStay], lastRemovedStay: null }\n            }\n\n        case 'SET_FILTER_BY':\n            return { ...state, filterBy: { ...action.filterBy } }\n        default:\n            return state;\n    }\n    // For debug:\n    // window.stayState = newState\n    // console.log('Prev State:', state)\n    // console.log('Action:', action)\n    // console.log('New State:', newState)\n    // return newState\n\n}\n","/Users/davidlaufer/sprint4/src/store/review.reducer.js",[],"/Users/davidlaufer/sprint4/src/services/user.service.js",["188","189"],"import { storageService } from './async-storage.service'\n// import { httpService } from './http.service'\nimport { getActionSetWatchedUser } from '../store/review.actions'\n// import { socketService, SOCKET_EVENT_USER_UPDATED, SOCKET_EMIT_USER_WATCH } from './socket.service'\nimport { showSuccessMsg } from '../services/event-bus.service'\n\nconst STORAGE_KEY_LOGGEDIN_USER = 'loggedinUser'\n\nexport const userService = {\n    login,\n    logout,\n    signup,\n    getLoggedinUser,\n    saveLocalUser,\n    getUsers,\n    getById,\n    remove,\n    update,\n    changeScore\n}\n\nwindow.userService = userService\n\n\nfunction getUsers() {\n    return storageService.query('user')\n    // return httpService.get(`user`)\n}\n\nfunction onUserUpdate(user) {\n    showSuccessMsg(`This user ${user.fullname} just got updated from socket, new score: ${user.score}`)\n}\n\nasync function getById(userId) {\n    const user = await storageService.get('user', userId)\n    // const user = await httpService.get(`user/${userId}`)\n\n    // socketService.emit(SOCKET_EMIT_USER_WATCH, userId)\n    // socketService.off(SOCKET_EVENT_USER_UPDATED, onUserUpdate)\n    // socketService.on(SOCKET_EVENT_USER_UPDATED, onUserUpdate)\n\n    return user\n}\nfunction remove(userId) {\n    return storageService.remove('user', userId)\n    // return httpService.delete(`user/${userId}`)\n}\n\nasync function update(user) {\n    await storageService.put('user', user)\n    // user = await httpService.put(`user/${user._id}`, user)\n    // Handle case in which admin updates other user's details\n    if (getLoggedinUser()._id === user._id) saveLocalUser(user)\n    return user;\n}\n\nasync function login(userCred) {\n    const users = await storageService.query('user')\n    const user = users.find(user => user.username === userCred.username)\n    // const user = await httpService.post('auth/login', userCred)\n    if (user) {\n        // socketService.login(user._id)\n        return saveLocalUser(user)\n    }\n}\nasync function signup(userCred) {\n    userCred.score = 10000;\n    const user = await storageService.post('user', userCred)\n    // const user = await httpService.post('auth/signup', userCred)\n    // socketService.login(user._id)\n    return saveLocalUser(user)\n}\nasync function logout() {\n    sessionStorage.removeItem(STORAGE_KEY_LOGGEDIN_USER)\n    // socketService.logout()\n    // return await httpService.post('auth/logout')\n}\n\nasync function changeScore(by) {\n    const user = getLoggedinUser()\n    if (!user) throw new Error('Not loggedin')\n    user.score = user.score + by || by\n    await update(user)\n    return user.score\n}\n\n\nfunction saveLocalUser(user) {\n    sessionStorage.setItem(STORAGE_KEY_LOGGEDIN_USER, JSON.stringify(user))\n    return user\n}\n\nfunction getLoggedinUser() {\n    return JSON.parse(sessionStorage.getItem(STORAGE_KEY_LOGGEDIN_USER))\n}\n\n\n// ;(async ()=>{\n//     await userService.signup({fullname: 'Puki Norma', username: 'user1', password:'123',score: 10000, isAdmin: false})\n//     await userService.signup({fullname: 'Master Adminov', username: 'admin', password:'123', score: 10000, isAdmin: true})\n//     await userService.signup({fullname: 'Muki G', username: 'muki', password:'123', score: 10000})\n// })()\n\n\n\n","/Users/davidlaufer/sprint4/src/routes.js",[],"/Users/davidlaufer/sprint4/src/cmps/app-footer.jsx",[],"/Users/davidlaufer/sprint4/src/cmps/app-header.jsx",["190"],"import { DetailsHeader } from './details-header'\nimport { MainHeader } from './main-header'\n\nexport function AppHeader({layoutClass, isOpen}) {\n\n\n    console.log(isOpen);\n    return <header className={`${layoutClass ? 'main-layout-details details-header flex full' : 'main-layout app-header flex full'} `}>\n        \n        {/* {isOpen ?   <DetailsHeader/> : <MainHeader/>} */}\n        <MainHeader/>\n\n        \n    </header>\n\n}","/Users/davidlaufer/sprint4/src/cmps/stay-filter.jsx",["191"],"import { ExpandedFilter } from './expanded-filter'\nimport filterImg from '../assets/img/filter-btn-img.png'\nimport amazingPools from '../assets/img/vector/amazing-pools.jpg'\nimport amazingViews from '../assets/img/vector/amazing-views.jpg'\nimport sharedHomes from '../assets/img/vector/shared-homes.jpg'\nimport surfing from '../assets/img/vector/surfing.jpg'\nimport React, { useEffect, useRef } from 'react'\n\nexport const StayFilter = (props) => {\n    const filter = useRef(null)\n    const filterContainer = useRef(null)\n    \n    useEffect(() => {\n        if (!filterContainer.current || !filter.current)return\n        const filterObserver = new IntersectionObserver(onFilterObserved, {\n            rootMargin: \"-60px 0px 0px\",\n        });\n\n        filterObserver.observe(filter.current)\n\n        function onFilterObserved(entries) {\n            if (!filterContainer.current || !filter.current)return\n            entries.forEach((entry) => {\n                console.log(entry.isIntersecting)\n                filterContainer.current.className = entry.isIntersecting ? 'full main-layout' : 'fixed full main-layout';\n            })\n        }\n    }, [])\n\n    const { onClickFilter, onChangeFilter, isFilterOpen } = props\n\n    return (\n        <section className='stay-filter full main-layout' ref={filter}>\n            <div  ref={filterContainer}> \n            <div className={isFilterOpen ? 'filter-open filter-container ' : 'filter-container '}>\n                <div className='labels-container'>\n                    <div><img src={amazingPools} alt=\"\"/></div>\n                    <div><img src={amazingViews} alt=\"\"/></div>\n                    <div><img src={sharedHomes} alt=\"\"/></div>\n                    <div><img src={surfing} alt=\"\"/></div>\n\n                </div>\n                <button className='stay-filter-btn' onClick={onClickFilter}>\n                    <div><img src={filterImg} /></div>\n                    Filters\n                </button>\n                <ExpandedFilter onChangeFilter={onChangeFilter} onClickFilter={onClickFilter} />\n            </div>\n            </div>\n        </section>\n    )\n}","/Users/davidlaufer/sprint4/src/store/review.actions.js",["192","193"],"import { showSuccessMsg } from '../services/event-bus.service'\nimport { reviewService } from '../services/review.service'\nimport { userService } from '../services/user.service'\n\n// Action Creators\nexport function getActionRemoveReview(reviewId) {\n  return { type: 'REMOVE_REVIEW', reviewId }\n}\nexport function getActionAddReview(review) {\n  return { type: 'ADD_REVIEW', review }\n}\nexport function getActionSetWatchedUser(user) {\n  return { type: 'SET_WATCHED_USER', user }\n}\n\nexport function loadReviews() {\n  return async dispatch => {\n    try {\n      const reviews = await reviewService.query()\n      dispatch({ type: 'SET_REVIEWS', reviews })\n\n    } catch (err) {\n      console.log('ReviewActions: err in loadReviews', err)\n    }\n  }\n}\n\nexport function addReview(review) {\n  return async dispatch => {\n    try {\n      const addedReview = await reviewService.add(review)\n      dispatch(getActionAddReview(addedReview))\n\n      // Change the score in user kept in sessionStorage\n      // userService.saveLocalUser(addedReview.byUser)\n      // const { score } = addedReview.byUser\n      // dispatch({ type: 'SET_SCORE', score })\n\n    } catch (err) {\n      console.log('ReviewActions: err in addReview', err)\n      throw err\n    }\n  }\n}\n\nexport function removeReview(reviewId) {\n  return async dispatch => {\n    try {\n      await reviewService.remove(reviewId)\n      dispatch(getActionRemoveReview(reviewId))\n    } catch (err) {\n      console.log('ReviewActions: err in removeReview', err)\n      throw err\n    }\n  }\n}\n","/Users/davidlaufer/sprint4/src/services/async-storage.service.js",[],"/Users/davidlaufer/sprint4/src/services/event-bus.service.js",[],"/Users/davidlaufer/sprint4/src/pages/add-edit-stay.jsx",["194","195","196","197","198"],"// import { upload } from '@testing-library/user-event/dist/upload'\nimport { useEffect, useState, useRef } from 'react'\nimport { useNavigate, useParams } from 'react-router-dom'\nimport { useDispatch } from 'react-redux'\nimport { useFormRegister } from '../hooks/useFormRegister'\nimport { addStay, updateStay } from '../store/stay.actions'\n\n\nexport const StayEdit = () => {\n\n    const params = useParams()\n    const navigate = useNavigate()\n    const dispatch = useDispatch()\n\n\n    const [register, setStay, stay] = useFormRegister({\n        name: '',\n        price: ''\n        // img: null\n    })\n\n    const inputRef = useRef()\n\n    useEffect(() => {\n        inputRef.current.focus()\n        const stayId = params.stayId\n        if (!stayId) return\n        // stayService\n        //     .getById(stayId)\n        //     .then((stay) => {\n        //         setStay(stay)\n        //     })\n        //     .catch((err) => {\n        //         console.log('err:', err)\n        //     })\n    }, [])\n\n    const onSaveStay = (ev) => {\n        ev.preventDefault()\n        if (stay._id) {\n            try {\n                const res = dispatch(updateStay(stay))\n                navigate('/')\n            } catch (err) {\n                console.error('ERROR!', err)\n            }\n        } else {\n            try {\n                const res = dispatch(addStay(stay))\n                navigate('/')\n            } catch (err) {\n                console.error('ERROR!', err)\n            }\n        }\n\n    }\n\n    return (\n        <form onSubmit={onSaveStay}>\n            <h1>{stay._id ? 'Edit' : 'Add'} stay</h1>\n\n            <label htmlFor=\"name\">name</label>\n            <input ref={inputRef} {...register('name', 'text')} />\n\n            <label htmlFor=\"price\">Price</label>\n            <input {...register('price', 'number')} />\n            <button>submit</button>\n        </form>\n    )\n}","/Users/davidlaufer/sprint4/src/pages/reserve-summary.jsx",[],"/Users/davidlaufer/sprint4/src/pages/stay-details.jsx",["199","200"],"/Users/davidlaufer/sprint4/src/pages/bnb-app.jsx",["201"],"import React, { useEffect } from 'react'\n// import { connect } from 'react-redux'\nimport { useDispatch, useSelector } from 'react-redux'\n\nimport { loadStays, setFilterBy } from '../store/stay.actions'\nimport { StayList } from '../cmps/stay-list'\nimport { StayFilter } from '../cmps/stay-filter'\n// import { stayService } from '../services/stay.service'\n// import {eventBusService } from '../services/event-bus.service'\n\nexport const BnbApp = () => {\n    const { stays, isFilterOpen } = useSelector(state => state.stayModule)\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        dispatch(loadStays())\n    }, [])\n\n    const onChangeFilter = (filterBy) => {\n        dispatch(setFilterBy(filterBy))\n        dispatch(loadStays())\n    }\n\n    const onClickFilter = (ev) => {\n        ev.preventDefault()\n        dispatch({\n            type: 'SET_ISOPENFILTER',\n            isFilterOpen: !isFilterOpen\n        })\n        if (!isFilterOpen) dispatch(loadStays())\n    }\n    \n    if (!stays) return <div>Loading...</div>\n    return (\n        <section className={isFilterOpen ? 'filter-open bnb-app full main-layout ' : 'bnb-app full main-layout '}>\n            <div onClick={onClickFilter} className='main-screen' ></div>\n            <StayFilter isFilterOpen={isFilterOpen} onChangeFilter={onChangeFilter} onClickFilter={onClickFilter} />\n            <StayList stays={stays} />\n        </section>\n    )\n}","/Users/davidlaufer/sprint4/src/cmps/header-filter.jsx",[],"/Users/davidlaufer/sprint4/src/cmps/header-profile.jsx",[],"/Users/davidlaufer/sprint4/src/cmps/expanded-filter.jsx",["202","203"],"import { useFormRegister } from '../hooks/useFormRegister'\n\n\nexport const ExpandedFilter = (props) => {\n\n    const [register, setFilter, filterBy] = useFormRegister({\n        name: '',\n        maxPrice: 1610,\n        minPrice: 50,\n        labels: '',\n    }, props.onChangeFilter)\n\n    const { onClickFilter } = props\n\n    return (\n        <form className='expanded-filter' onSubmit={onClickFilter}>\n           \n            <h1>Price range</h1>\n            <section className='range-slider'>\n                <input min=\"0\" max=\"1800\"  {...register('minPrice', 'range')} />\n                <input min=\"0\" max=\"1600\"  {...register('maxPrice', 'range')} />\n            </section>\n            <div className='number-price-filter'>\n                <input {...register('minPrice', 'number')} /> - <input {...register('maxPrice', 'number')} />\n            </div>\n            <button>show homes</button>\n        </form>\n    )\n}\n","/Users/davidlaufer/sprint4/src/services/review.service.js",["204"],"// import { httpService } from './http.service'\nimport { storageService } from './async-storage.service'\n// import { socketService, SOCKET_EVENT_REVIEW_ADDED, SOCKET_EVENT_REVIEW_ABOUT_YOU } from './socket.service'\nimport { getActionRemoveReview, getActionAddReview } from '../store/review.actions'\n\nconst reviewChannel = new BroadcastChannel('reviewChannel')\n\n// ;(() => {\n//   reviewChannel.addEventListener('message', (ev) => {\n//     store.dispatch(ev.data)\n//   })\n//   socketService.on(SOCKET_EVENT_REVIEW_ADDED, (review) => {\n//     console.log('GOT from socket', review)\n//     store.dispatch(getActionAddReview(review))\n//   })\n//   socketService.on(SOCKET_EVENT_REVIEW_ABOUT_YOU, (review) => {\n//     showSuccessMsg(`New review about me ${review.txt}`)\n//   })\n// })()\n\n\n\nexport const reviewService = {\n  add,\n  query,\n  remove\n}\n\n\nfunction query(filterBy) {\n  var queryStr = (!filterBy) ? '' : `?name=${filterBy.name}&sort=anaAref`\n  // return httpService.get(`review${queryStr}`)\n  return storageService.query('review')\n}\n\nasync function remove(reviewId) {\n  // await httpService.delete(`review/${reviewId}`)\n  await storageService.remove('review', reviewId)\n  reviewChannel.postMessage(getActionRemoveReview(reviewId))\n\n\n}\nasync function add(review) {\n  // const addedReview = await httpService.post(`review`, review)\n\n  // review.byUser = userService.getLoggedinUser()\n  // review.aboutUser = await userService.getById(review.aboutUserId)\n  const addedReview = await storageService.post('review', review)\n\n  reviewChannel.postMessage(getActionAddReview(addedReview))\n\n  return addedReview\n}\n\n// This way, we can also subscribe to none-store data change\n// function subscribe(listener) {\n//   reviewChannel.addEventListener('message', listener)\n// }\n// function unsubscribe(listener) {\n//   reviewChannel.removeEventListener('message', listener)\n// }\n","/Users/davidlaufer/sprint4/src/services/stay.service.js",["205"],"\nimport { storageService } from './async-storage.service.js'\nimport { utilService } from './util.service.js'\nimport { userService } from './user.service.js'\nconst fs = require('fs')\n// This file demonstrates how to use a BroadcastChannel to notify other browser tabs \n\nconst STORAGE_KEY = 'stay'\n\nvar gStays = require('../data/stay.json')\n\nexport const stayService = {\n    query,\n    getById,\n    save,\n    remove,\n    avgRate\n}\nwindow.cs = stayService\n\nfunction query(filterBy) {\n    return storageService.query(STORAGE_KEY).then(stays => {\n      if (!stays[0]){\n        gStays.forEach(stay => stay.reviews.map(review => review.rate = utilService.getRandomIntInclusive(3,5)))\n        stays = storageService.postMany(STORAGE_KEY, gStays).then(x => console.log(x))\n      }\n        if (filterBy) {\n            let { maxPrice, minPrice } = filterBy\n            if (!maxPrice) maxPrice = Infinity\n            if (!minPrice) minPrice = 0\n            stays = stays.filter(stay => stay.price <= maxPrice && stay.price >= minPrice)\n            return stays\n        }\n        return stays\n    }\n    )\n}\n\nfunction getById(stayId) {\n    return storageService.get(STORAGE_KEY, stayId)\n    // return axios.get(`/api/stay/${stayId}`)\n}\nasync function remove(stayId) {\n    await storageService.remove(STORAGE_KEY, stayId)\n}\nasync function save(stay) {\n    var savedStay\n    if (stay._id) {\n        savedStay = await storageService.put(STORAGE_KEY, stay)\n\n    } else {\n        // Later, owner is set by the backend\n        let newStay = _getEmptyStay()\n        newStay.name = stay.name\n        newStay.price =stay.price\n        console.log('newStay:', newStay)\n        gStays.push(newStay)\n        savedStay = await storageService.post(STORAGE_KEY, newStay)\n    }\n    return  _saveStayToFile()\n        .then(() => savedStay)\n}\n\nfunction _saveStayToFile() {\n  return new Promise((resolve, reject) => {\n      const data = JSON.stringify(gStays, null, 2)\n      fs.writeFile('data/stay.json', data, (err) => {\n          if (err) return reject('Cannot save to file')\n          resolve()\n      })\n  })\n}\n\nfunction _getEmptyStay(){\n    return     {\n        \"type\": \"House\",\n        \"imgUrls\": [\"https://a0.muscache.com/im/pictures/e83e702f-ef49-40fb-8fa0-6512d7e26e9b.jpg?aki_policy=large\", \"otherImg.jpg\"],\n        \"summary\": \"Fantastic duplex apartment with three bedrooms, located in the historic area of Porto, Ribeira (Cube)...\",\n        \"capacity\": 8,\n        \"amenities\": [\n          \"TV\",\n          \"Wifi\",\n          \"Kitchen\",\n          \"Smoking allowed\",\n          \"Pets allowed\",\n          \"Cooking basics\"\n        ],\n        \"host\": {\n          \"_id\": \"u101\",\n          \"fullname\": \"Davit Pok\",\n          \"imgUrl\": \"https://a0.muscache.com/im/pictures/fab79f25-2e10-4f0f-9711-663cb69dc7d8.jpg?aki_policy=profile_small\",\n        },\n        \"loc\": {\n          \"country\": \"Portugal\",\n          \"countryCode\": \"PT\",\n          \"city\": \"Porto\",\n          \"address\": \"17 Kombo st\",\n          \"lat\": -8.61308,\n          \"lng\": 41.1413\n        },\n        \"reviews\": [\n          {\n            \"id\": \"madeId\",\n            \"txt\": \"Very helpful hosts. Cooked traditional...\",\n            \"rate\": 4,\n            \"by\": {\n              \"_id\": \"u102\",\n              \"fullname\": \"user2\",\n              \"imgUrl\": \"/img/img2.jpg\"\n            }\n          }\n        ],\n        \"likedByUsers\" : ['mini-user'] // for user-wishlist : use $in\n      }\n\n}\n\nfunction avgRate(stay){\n  let rates = stay.reviews.map(review => review.rate)\n  rates = rates.reduce((a, b) => a + b, 0)\n  console.log('rates:', rates)\n  return (rates / stay.reviews.length).toFixed(2)\n}\n\n\n","/Users/davidlaufer/sprint4/src/store/stay.actions.js",[],"/Users/davidlaufer/sprint4/src/hooks/useFormRegister.js",["206"],"import { useEffect, useState } from \"react\"\nimport { useEffectUpdate } from \"./useEffectUpdate\"\n\nexport const useFormRegister = (initialState, callBack) => {\n\n    const [fields, setFields] = useState(initialState)\n\n    useEffectUpdate(() => {\n        if (callBack) callBack(fields)\n    }, [fields])\n\n    const handleChange = ({ target }) => {\n        const field = target.name\n        let value = target.value\n\n        switch (target.type) {\n            case 'number':\n            case 'range':\n                value = +target.value || ''\n                break;\n            case 'checkbox':\n                value = target.checked\n                break;\n            case 'date':\n                value = new Date(value)\n                break;\n            case 'time':\n                const newDate = new Date()\n                const hours = value.split(':')[0]\n                const minutes = value.split(':')[1]\n                newDate.setHours(hours)\n                newDate.setMinutes(minutes)\n                value = newDate\n                break\n            default:\n                break\n        }\n        setFields(prevFields => ({ ...prevFields, [field]: value }))\n    }\n\n    const getFormattedDate = (value) => {\n        const valueDate = new Date(value)\n        return `${valueDate.getFullYear()}-${(valueDate.getMonth() + 1 + '').padStart(2, '0')}-${(valueDate.getDate() + '').padStart(2, '0')}`\n    }\n    const getFormattedTime = (value) => {\n        const valueTime = new Date(value)\n        return `${(valueTime.getHours() + '').padStart(2, '0')}:${(valueTime.getMinutes() + '').padStart(2, '0')}`\n    }\n    const register = (field, type = '', value) => { // value only used when type === 'radio'\n        const inputProp = {\n            onChange: handleChange,\n            name: field,\n            id: field,\n            value: fields[field],\n            type\n        }\n        if (type === 'checkbox') inputProp.checked = fields[field]\n        if (type === 'date') inputProp.value = getFormattedDate(fields[field])\n        if (type === 'time') inputProp.value = getFormattedTime(fields[field])\n        if (type === 'radio') {\n            inputProp.value = value\n            inputProp.id = value\n            inputProp.checked = fields[field] === value\n        }\n        return inputProp\n    }\n    return [register, setFields, fields]\n}","/Users/davidlaufer/sprint4/src/cmps/stay-list.jsx",[],"/Users/davidlaufer/sprint4/src/cmps/calender.jsx",["207"],"import React from \"react\";\nimport { useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\n// import { useSelector } from \"react-redux\";\nimport { useFormRegister } from \"../hooks/useFormRegister\";\n// import { orderService } from \"../services/order.service\";\nimport { saveDates } from \"../store/order.actions\";\nimport { compareAsc, format } from 'date-fns'\n\n\nexport const Calender = ({ stay }) => {\n  const [register, setStartDate, date] = useFormRegister({\n    startDate: '',\n    endDate: ''\n  });\n\n\n  const dispatch = useDispatch()\n\n  format(new Date(2014, 1, 11), 'yyyy-MM-dd')\n  //=> '2014-02-11'\n\n  const dates = [\n    new Date(1995, 6, 2),\n    new Date(1987, 1, 11),\n    new Date(1989, 6, 10),\n  ]\n  dates.sort(compareAsc)\n\n  useEffect(() => {\n\n  }, [])\n\n  const setDate = (ev) => {\n    ev.preventDefault()\n    const startDate = new Date(date.startDate).toLocaleDateString()\n    const endDate = new Date(date.endDate).toLocaleDateString()\n    dispatch(saveDates(stay._id, startDate, endDate))\n\n  }\n\n  return (\n    <section className=\"date-picker\">\n      <form onSubmit={(ev) => setDate(ev)}>\n\n        <label htmlFor=\"start\">Start date:</label>\n        <input {...register('startDate', 'date')} />\n\n        <label htmlFor=\"end\">End date:</label>\n        <input {...register('endDate', 'date')} />\n\n        <button>set</button>\n      </form>\n    </section>\n  )\n};\n\n","/Users/davidlaufer/sprint4/src/cmps/stay-review.jsx",[],"/Users/davidlaufer/sprint4/src/services/util.service.js",[],"/Users/davidlaufer/sprint4/src/hooks/useEffectUpdate.js",["208","209"],"import { useEffect, useRef } from \"react\"\n\nexport const useEffectUpdate = (callBack, dependencies) => {\n    \n    const isFirst = useRef(true)\n\n    useEffect(()=>{\n        if (isFirst.current) {\n            isFirst.current = false\n            return\n        }   \n        callBack()\n    }, dependencies)\n    \n}","/Users/davidlaufer/sprint4/src/store/order.actions.js",[],"/Users/davidlaufer/sprint4/src/services/order.service.js",["210"],"\nimport { storageService } from './async-storage.service.js'\nimport { utilService } from './util.service.js'\nimport { userService } from './user.service.js'\n\n// This file demonstrates how to use a BroadcastChannel to notify other browser tabs \n\nconst STORAGE_KEY = 'order'\n\nexport const orderService = {\n    query,\n    getById,\n    save,\n    remove,\n    createOrder\n}\nwindow.cs = orderService\n\nfunction query(filterBy) {\n    return storageService.query(STORAGE_KEY).then(orders => {\n        \n        // if(!orders) return _getEmptyOrder()\n        return orders\n    }\n    )\n}\n\nfunction createOrder(hostId, startDate, endDate){\n     const order = _getNewOrder(hostId, startDate, endDate)\n     save(order)\n     return order\n}\n\nfunction getById(orderId) {\n    return storageService.get(STORAGE_KEY, orderId)\n    // return axios.get(`/api/order/${orderId}`)\n}\nasync function remove(orderId) {\n    await storageService.remove(STORAGE_KEY, orderId)\n}\n\nasync function save(order) {\n    var savedOrder\n    if (order._id) {\n        savedOrder = await storageService.put(STORAGE_KEY, order)\n\n    } else {\n        // Later, owner is set by the backend\n        let newOrder = _getNewOrder()\n        newOrder.name = order.name\n        newOrder.price = order.price\n        console.log('newOrder:', newOrder)\n        savedOrder = await storageService.post(STORAGE_KEY, newOrder)\n    }\n    return savedOrder\n}\n\nfunction _getNewOrder(hostId='', startDate='', endDate='') {\n    return {\n        \"_id\": utilService.makeId(),\n        hostId,\n        \"createdAt\": Date.now(),\n        \"buyer\": {\n            \"_id\": \"u101\",\n            \"fullname\": \"User 1\"\n        },\n        \"totalPrice\": 160,\n        startDate,\n        endDate,\n        \"guests\": {\n            \"adults\": 2,\n            \"kids\": 1\n        },\n        \"stay\": {\n            \"_id\": \"h102\",\n            \"name\": \"House Of Uncle My\",\n            \"price\": 80.00\n        },\n        \"status\": \"pending\"\n    }\n\n}\n\n\n// TEST DATA\n\n\n","/Users/davidlaufer/sprint4/src/cmps/stay-preview.jsx",["211"],"import React from \"react\";\n\nexport function StayPreview({ stay }) {\n    return (\n        // <React.Fragment>\n            <div key={stay._id} className='stay-preview'>\n                <img src={stay.imgUrls[0]} />\n                <div>\n                    <p><span>{stay.loc.city}, {stay.loc.country}</span></p>\n                    <p>{stay.loc.address}, {stay.loc.city}</p>\n                    {/* <p>{stay.capacity.guests} beds</p> */}\n                    <p>Oct 12-18</p>\n                    <p className=\"price\"><span>${stay.price}</span> night</p>\n                </div>\n            </div>\n\n        // </React.Fragment>\n    )\n}","/Users/davidlaufer/sprint4/src/cmps/calc-reserve.jsx",[],"/Users/davidlaufer/sprint4/src/cmps/main-header.jsx",[],"/Users/davidlaufer/sprint4/src/cmps/details-header.jsx",[],"/Users/davidlaufer/sprint4/src/cmps/stayDetails/stay-keys.jsx",[],"/Users/davidlaufer/sprint4/src/cmps/stayDetails/stay-air-cover.jsx",[],"/Users/davidlaufer/sprint4/src/cmps/stayDetails/stay-amenities.jsx",[],"/Users/davidlaufer/sprint4/src/cmps/reserve.jsx",["212","213","214","215","216","217"],{"ruleId":"218","replacedBy":"219"},{"ruleId":"220","replacedBy":"221"},{"ruleId":"222","severity":1,"message":"223","line":7,"column":10,"nodeType":"224","messageId":"225","endLine":7,"endColumn":20},{"ruleId":"222","severity":1,"message":"226","line":7,"column":9,"nodeType":"224","messageId":"225","endLine":7,"endColumn":17},{"ruleId":"227","severity":1,"message":"228","line":46,"column":9,"nodeType":"229","messageId":"230","endLine":47,"endColumn":66},{"ruleId":"222","severity":1,"message":"231","line":3,"column":10,"nodeType":"224","messageId":"225","endLine":3,"endColumn":33},{"ruleId":"222","severity":1,"message":"232","line":30,"column":10,"nodeType":"224","messageId":"225","endLine":30,"endColumn":22},{"ruleId":"222","severity":1,"message":"233","line":1,"column":10,"nodeType":"224","messageId":"225","endLine":1,"endColumn":23},{"ruleId":"234","severity":1,"message":"235","line":44,"column":26,"nodeType":"236","endLine":44,"endColumn":49},{"ruleId":"222","severity":1,"message":"237","line":1,"column":10,"nodeType":"224","messageId":"225","endLine":1,"endColumn":24},{"ruleId":"222","severity":1,"message":"238","line":3,"column":10,"nodeType":"224","messageId":"225","endLine":3,"endColumn":21},{"ruleId":"222","severity":1,"message":"239","line":2,"column":21,"nodeType":"224","messageId":"225","endLine":2,"endColumn":29},{"ruleId":"222","severity":1,"message":"240","line":16,"column":22,"nodeType":"224","messageId":"225","endLine":16,"endColumn":29},{"ruleId":"241","severity":1,"message":"242","line":36,"column":8,"nodeType":"243","endLine":36,"endColumn":10,"suggestions":"244"},{"ruleId":"222","severity":1,"message":"245","line":42,"column":23,"nodeType":"224","messageId":"225","endLine":42,"endColumn":26},{"ruleId":"222","severity":1,"message":"245","line":49,"column":23,"nodeType":"224","messageId":"225","endLine":49,"endColumn":26},{"ruleId":"241","severity":1,"message":"246","line":43,"column":8,"nodeType":"243","endLine":43,"endColumn":10,"suggestions":"247"},{"ruleId":"241","severity":1,"message":"248","line":61,"column":8,"nodeType":"243","endLine":61,"endColumn":14,"suggestions":"249"},{"ruleId":"241","severity":1,"message":"250","line":17,"column":8,"nodeType":"243","endLine":17,"endColumn":10,"suggestions":"251"},{"ruleId":"222","severity":1,"message":"252","line":6,"column":22,"nodeType":"224","messageId":"225","endLine":6,"endColumn":31},{"ruleId":"222","severity":1,"message":"253","line":6,"column":33,"nodeType":"224","messageId":"225","endLine":6,"endColumn":41},{"ruleId":"222","severity":1,"message":"254","line":31,"column":7,"nodeType":"224","messageId":"225","endLine":31,"endColumn":15},{"ruleId":"222","severity":1,"message":"238","line":4,"column":10,"nodeType":"224","messageId":"225","endLine":4,"endColumn":21},{"ruleId":"222","severity":1,"message":"255","line":1,"column":10,"nodeType":"224","messageId":"225","endLine":1,"endColumn":19},{"ruleId":"222","severity":1,"message":"256","line":12,"column":20,"nodeType":"224","messageId":"225","endLine":12,"endColumn":32},{"ruleId":"241","severity":1,"message":"257","line":13,"column":8,"nodeType":"224","endLine":13,"endColumn":20},{"ruleId":"241","severity":1,"message":"258","line":13,"column":8,"nodeType":"224","endLine":13,"endColumn":20,"suggestions":"259"},{"ruleId":"222","severity":1,"message":"238","line":4,"column":10,"nodeType":"224","messageId":"225","endLine":4,"endColumn":21},{"ruleId":"234","severity":1,"message":"235","line":7,"column":17,"nodeType":"236","endLine":7,"endColumn":46},{"ruleId":"222","severity":1,"message":"255","line":2,"column":10,"nodeType":"224","messageId":"225","endLine":2,"endColumn":19},{"ruleId":"222","severity":1,"message":"260","line":3,"column":10,"nodeType":"224","messageId":"225","endLine":3,"endColumn":16},{"ruleId":"222","severity":1,"message":"261","line":6,"column":10,"nodeType":"224","messageId":"225","endLine":6,"endColumn":14},{"ruleId":"222","severity":1,"message":"262","line":7,"column":10,"nodeType":"224","messageId":"225","endLine":7,"endColumn":22},{"ruleId":"222","severity":1,"message":"263","line":8,"column":10,"nodeType":"224","messageId":"225","endLine":8,"endColumn":20},{"ruleId":"222","severity":1,"message":"264","line":52,"column":15,"nodeType":"224","messageId":"225","endLine":52,"endColumn":19},"no-native-reassign",["265"],"no-negated-in-lhs",["266"],"no-unused-vars","'StayFilter' is defined but never used.","Identifier","unusedVar","'newState' is assigned a value but never used.","no-fallthrough","Expected a 'break' statement before 'case'.","SwitchCase","case","'getActionSetWatchedUser' is defined but never used.","'onUserUpdate' is defined but never used.","'DetailsHeader' is defined but never used.","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","'showSuccessMsg' is defined but never used.","'userService' is defined but never used.","'useState' is defined but never used.","'setStay' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'params.stayId'. Either include it or remove the dependency array.","ArrayExpression",["267"],"'res' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'loadStay'. Either include it or remove the dependency array.",["268"],"React Hook useLayoutEffect has a missing dependency: 'isOpen'. Either include it or remove the dependency array.",["269"],"React Hook useEffect has a missing dependency: 'dispatch'. Either include it or remove the dependency array.",["270"],"'setFilter' is assigned a value but never used.","'filterBy' is assigned a value but never used.","'queryStr' is assigned a value but never used.","'useEffect' is defined but never used.","'setStartDate' is assigned a value but never used.","React Hook useEffect was passed a dependency list that is not an array literal. This means we can't statically verify whether you've passed the correct dependencies.","React Hook useEffect has a missing dependency: 'callBack'. Either include it or remove the dependency array. If 'callBack' changes too often, find the parent component that defines it and wrap that definition in useCallback.",["271"],"'useRef' is defined but never used.","'Link' is defined but never used.","'orderService' is defined but never used.","'savedOrder' is defined but never used.","'rect' is assigned a value but never used.","no-global-assign","no-unsafe-negation",{"desc":"272","fix":"273"},{"desc":"274","fix":"275"},{"desc":"276","fix":"277"},{"desc":"278","fix":"279"},{"desc":"280","fix":"281"},"Update the dependencies array to be: [params.stayId]",{"range":"282","text":"283"},"Update the dependencies array to be: [loadStay]",{"range":"284","text":"285"},"Update the dependencies array to be: [isOpen, stay]",{"range":"286","text":"287"},"Update the dependencies array to be: [dispatch]",{"range":"288","text":"289"},"Update the dependencies array to be: [callBack]",{"range":"290","text":"291"},[990,992],"[params.stayId]",[1455,1457],"[loadStay]",[2046,2052],"[isOpen, stay]",[620,622],"[dispatch]",[288,300],"[callBack]"]
>>>>>>> b5191937f4dcfa73a77c3839302975cc5f86d153
